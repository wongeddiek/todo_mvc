!function(){var n={},t=function(t){for(var e=n[t],o=e.deps,i=e.defn,u=o.length,a=new Array(u),c=0;c<u;++c)a[c]=r(o[c]);var s=i.apply(null,a);if(void 0===s)throw"module ["+t+"] returned undefined";e.instance=s},e=function(t,e,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;n[t]={deps:e,defn:r,instance:void 0}},r=function(e){var r=n[e];if(void 0===r)throw"module ["+e+"] was undefined";return void 0===r.instance&&t(e),r.instance},o=function(n,t){for(var e=n.length,o=new Array(e),i=0;i<e;++i)o[i]=r(n[i]);t.apply(null,o)};({}).bolt={module:{api:{define:e,require:o,demand:r}}};var i=e,u=function(n,t){i(n,[],function(){return t})};u("u",Array),u("v",Error),i("6",["u","v"],function(n,t){var e=function(n){return function(){return n}};return{noop:function(){},noarg:function(n){return function(){return n()}},compose:function(n,t){return function(){return n(t.apply(null,arguments))}},constant:e,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(t){for(var e=new n(arguments.length-1),r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){for(var r=new n(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=e.concat(r);return t.apply(null,i)}},not:function(n){return function(){return!n.apply(null,arguments)}},die:function(n){return function(){throw new t(n)}},apply:function(n){return n()},call:function(n){n()},never:e(!1),always:e(!0)}}),u("2n",Object),i("z",["6","2n"],function(n,t){var e=n.never,r=n.always,o=function(){return i},i=function(){var i=function(n){return n.isNone()},u=function(n){return n()},a=function(n){return n},c={fold:function(n){return n()},is:e,isSome:e,isNone:r,getOr:a,getOrThunk:u,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:a,orThunk:u,map:o,ap:o,each:function(){},bind:o,flatten:o,exists:e,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:n.constant("none()")};return t.freeze&&t.freeze(c),c}(),u=function(n){var t=function(){return n},a=function(){return s},c=function(t){return t(n)},s={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:r,isNone:e,getOr:t,getOrThunk:t,getOrDie:t,or:a,orThunk:a,map:function(t){return u(t(n))},ap:function(t){return t.fold(o,function(t){return u(t(n))})},each:function(t){t(n)},bind:c,flatten:t,exists:c,forall:c,filter:function(t){return t(n)?s:i},equals:function(t){return t.is(n)},equals_:function(t,r){return t.fold(e,function(t){return r(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return s};return{some:u,none:o,from:function(n){return null===n||void 0===n?i:u(n)}}}),u("2m",String),i("y",["z","u","v","2m"],function(n,t,e,r){var o=function(){var n=t.prototype.indexOf;return void 0===n?function(n,t){return w(n,t)}:function(t,e){return n.call(t,e)}}(),i=function(t,e){var r=o(t,e);return-1===r?n.none():n.some(r)},u=function(n,t){return o(n,t)>-1},a=function(n,t){return b(n,t).isSome()},c=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},s=function(n,t){for(var e=[],r=0;r<n.length;r+=t){var o=n.slice(r,r+t);e.push(o)}return e},f=function(n,e){for(var r=n.length,o=new t(r),i=0;i<r;i++){var u=n[i];o[i]=e(u,i,n)}return o},l=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e,n)}},d=function(n,t){for(var e=n.length-1;e>=0;e--){t(n[e],e,n)}},m=function(n,t){for(var e=[],r=[],o=0,i=n.length;o<i;o++){var u=n[o];(t(u,o,n)?e:r).push(u)}return{pass:e,fail:r}},g=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r,n)&&e.push(i)}return e},p=function(n,t){if(0===n.length)return[];for(var e=t(n[0]),r=[],o=[],i=0,u=n.length;i<u;i++){var a=n[i],c=t(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r},v=function(n,t,e){return d(n,function(n){e=t(e,n)}),e},h=function(n,t,e){return l(n,function(n){e=t(e,n)}),e},y=function(t,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r,t))return n.some(i)}return n.none()},b=function(t,e){for(var r=0,o=t.length;r<o;r++){if(e(t[r],r,t))return n.some(r)}return n.none()},w=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},O=t.prototype.push,x=function(n){for(var r=[],o=0,i=n.length;o<i;++o){if(!t.prototype.isPrototypeOf(n[o]))throw new e("Arr.flatten item "+o+" was not an array, input: "+n);O.apply(r,n[o])}return r},S=function(n,t){var e=f(n,t);return x(e)},T=function(n,t){for(var e=0,r=n.length;e<r;++e){if(!0!==t(n[e],e,n))return!1}return!0},k=function(n,t){return n.length===t.length&&T(n,function(n,e){return n===t[e]})},C=t.prototype.slice;return{map:f,each:l,eachr:d,partition:m,filter:g,groupBy:p,indexOf:i,foldr:v,foldl:h,find:y,findIndex:b,flatten:x,bind:S,forall:T,exists:a,contains:u,equal:k,reverse:function(n){var t=C.call(n,0);return t.reverse(),t},chunk:s,difference:function(n,t){return g(n,function(n){return!u(t,n)})},mapToObject:function(n,t){for(var e={},o=0,i=n.length;o<i;o++){var u=n[o];e[r(u)]=t(u,o)}return e},pure:function(n){return[n]},sort:function(n,t){var e=C.call(n,0);return e.sort(t),e},range:c,head:function(t){return 0===t.length?n.none():n.some(t[0])},last:function(t){return 0===t.length?n.none():n.some(t[t.length-1])}}}),i("8q",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("6i",["8q"],function(n){var t=function(t,e){for(var r=void 0!==e?e:n,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},e=function(n,t){return void 0!==n[t]&&null!==n[t]||(n[t]={}),n[t]},r=function(t,r){for(var o=void 0!==r?r:n,i=0;i<t.length;++i)o=e(o,t[i]);return o};return{path:t,resolve:function(n,e){var r=n.split(".");return t(r,e)},forge:r,namespace:function(n,t){var e=n.split(".");return r(e,t)}}}),i("4m",["6i"],function(n){var t=function(t,e){return n.resolve(t,e)};return{getOrDie:function(n,e){var r=t(n,e);if(void 0===r)throw n+" not available on this browser";return r}}}),i("2q",["4m"],function(n){var t=function(){return n.getOrDie("Node")},e=function(n,t,e){return 0!=(n.compareDocumentPosition(t)&e)};return{documentPositionPreceding:function(n,r){return e(n,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(n,r){return e(n,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),i("17",[],function(){return{cached:function(n){var t,e=!1;return function(){return e||(e=!0,t=n.apply(null,arguments)),t}}}}),u("6j",Number),i("44",["y","6j","2m"],function(n,t,e){var r=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},o=function(n,e){var o=r(n,e);if(!o)return{major:0,minor:0};var i=function(n){return t(e.replace(o,"$"+n))};return a(i(1),i(2))},i=function(n,t){var r=e(t).toLowerCase();return 0===n.length?u():o(n,r)},u=function(){return a(0,0)},a=function(n,t){return{major:n,minor:t}};return{nu:a,detect:i,unknown:u}}),i("2h",["6","44"],function(n,t){var e="Edge",r="Chrome",o="IE",i="Opera",u="Firefox",a="Safari",c=function(n,t){return function(){return t===n}},s=function(){return f({current:void 0,version:t.unknown()})},f=function(n){var t=n.current;return{current:t,version:n.version,isEdge:c(e,t),isChrome:c(r,t),isIE:c(o,t),isOpera:c(i,t),isFirefox:c(u,t),isSafari:c(a,t)}};return{unknown:s,nu:f,edge:n.constant(e),chrome:n.constant(r),ie:n.constant(o),opera:n.constant(i),firefox:n.constant(u),safari:n.constant(a)}}),i("2i",["6","44"],function(n,t){var e="Windows",r="iOS",o="Android",i="Linux",u="OSX",a="Solaris",c="FreeBSD",s=function(n,t){return function(){return t===n}},f=function(){return l({current:void 0,version:t.unknown()})},l=function(n){var t=n.current;return{current:t,version:n.version,isWindows:s(e,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(u,t),isLinux:s(i,t),isSolaris:s(a,t),isFreeBSD:s(c,t)}};return{unknown:f,nu:l,windows:n.constant(e),ios:n.constant(r),android:n.constant(o),linux:n.constant(i),osx:n.constant(u),solaris:n.constant(a),freebsd:n.constant(c)}}),i("2j",["6"],function(n){return function(t,e,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,u=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,c=o||u||a&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),f=s&&!c,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:n.constant(o),isiPhone:n.constant(i),isTablet:n.constant(c),isPhone:n.constant(f),isTouch:n.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:n.constant(l)}}}),i("2k",["y","44","2m"],function(n,t,e){var r=function(t,r){var o=e(r).toLowerCase();return n.find(t,function(n){return n.search(o)})};return{detectBrowser:function(n,e){return r(n,e).map(function(n){var r=t.detect(n.versionRegexes,e);return{current:n.name,version:r}})},detectOs:function(n,e){return r(n,e).map(function(n){var r=t.detect(n.versionRegexes,e);return{current:n.name,version:r}})}}}),i("45",[],function(){return{addToStart:function(n,t){return t+n},addToEnd:function(n,t){return n+t},removeFromStart:function(n,t){return n.substring(t)},removeFromEnd:function(n,t){return n.substring(0,n.length-t)}}}),i("46",["z","v"],function(n){return{first:function(n,t){return n.substr(0,t)},last:function(n,t){return n.substr(n.length-t,n.length)},head:function(t){return""===t?n.none():n.some(t.substr(0,1))},tail:function(t){return""===t?n.none():n.some(t.substring(1))}}}),i("37",["45","46","v"],function(n,t){var e=function(n,t,e){if(""===t)return!0;if(n.length<t.length)return!1;return n.substr(e,e+t.length)===t},r=function(t,e){return a(t,e)?n.removeFromStart(t,e.length):t},o=function(t,e){return c(t,e)?n.removeFromEnd(t,e.length):t},i=function(t,e){return a(t,e)?t:n.addToStart(t,e)},u=function(t,e){return c(t,e)?t:n.addToEnd(t,e)},a=function(n,t){return e(n,t,0)},c=function(n,t){return e(n,t,n.length-t.length)};return{supplant:function(n,t){var e=function(n){var t=typeof n;return"string"===t||"number"===t};return n.replace(/\${([^{}]*)}/g,function(n,r){var o=t[r];return e(o)?o:n})},startsWith:a,removeLeading:r,removeTrailing:o,ensureLeading:i,ensureTrailing:u,endsWith:c,contains:function(n,t){return-1!==n.indexOf(t)},trim:function(n){return n.replace(/^\s+|\s+$/g,"")},lTrim:function(n){return n.replace(/^\s+/g,"")},rTrim:function(n){return n.replace(/\s+$/g,"")},capitalize:function(n){return t.head(n).bind(function(e){return t.tail(n).map(function(n){return e.toUpperCase()+n})}).getOr(n)}}}),i("2l",["6","37"],function(n,t){var e=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(n){return function(e){return t.contains(e,n)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return t.contains(n,"edge/")&&t.contains(n,"chrome")&&t.contains(n,"safari")&&t.contains(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e],search:function(n){return t.contains(n,"chrome")&&!t.contains(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return t.contains(n,"msie")||t.contains(n,"trident")}},{name:"Opera",versionRegexes:[e,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[e,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(t.contains(n,"safari")||t.contains(n,"mobile/"))&&t.contains(n,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return t.contains(n,"iphone")||t.contains(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:n.constant(o),oses:n.constant(i)}}),i("18",["2h","2i","2j","2k","2l"],function(n,t,e,r,o){return{detect:function(i){var u=o.browsers(),a=o.oses(),c=r.detectBrowser(u,i).fold(n.unknown,n.nu),s=r.detectOs(a,i).fold(t.unknown,t.nu);return{browser:c,os:s,deviceType:e(s,c,i)}}}}),u("19",navigator),i("7",["17","18","19"],function(n,t,e){return{detect:n.cached(function(){var n=e.userAgent;return t.detect(n)})}}),i("16",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),u("1b",document),i("a",["6","z","v","16","1b"],function(n,t,e,r,o){var i=function(n,t){var e=(t||o).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||e.childNodes.length>1)throw r.error("HTML does not have a single root node",n),"HTML must have a single root node";return c(e.childNodes[0])},u=function(n,t){var e=(t||o).createElement(n);return c(e)},a=function(n,t){var e=(t||o).createTextNode(n);return c(e)},c=function(t){if(null===t||void 0===t)throw new e("Node cannot be null or undefined");return{dom:n.constant(t)}};return{fromHtml:i,fromTag:u,fromText:a,fromDom:c,fromPoint:function(n,e,r){return t.from(n.dom().elementFromPoint(e,r)).map(c)}}}),i("1d",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("2r",["y","z","a","1d","v","1b"],function(n,t,e,r,o,i){var u=r.ELEMENT,a=r.DOCUMENT,c=function(n){return n.nodeType!==u&&n.nodeType!==a||0===n.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return c(o)?[]:n.map(o.querySelectorAll(t),e.fromDom)},is:function(n,t){var e=n.dom();if(e.nodeType!==u)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},one:function(n,r){var o=void 0===r?i:r.dom();return c(o)?t.none():t.from(o.querySelector(n)).map(e.fromDom)}}}),i("1a",["y","6","2q","7","2r"],function(n,t,e,r,o){var i=function(n,t){return n.dom()===t.dom()},u=function(n,t){return n.dom().isEqualNode(t.dom())},a=function(e,r){return n.exists(r,t.curry(i,e))},c=function(n,t){var e=n.dom(),r=t.dom();return e!==r&&e.contains(r)},s=function(n,t){return e.documentPositionContainedBy(n.dom(),t.dom())},f=r.detect().browser.isIE()?s:c;return{eq:i,isEqualNode:u,member:a,contains:f,is:o.is}}),i("43",["1a"],function(n){return{isSource:function(t,e){return n.eq(t.element(),e.event().target())}}}),i("2g",["6"],function(n){return{contextmenu:n.constant("contextmenu"),touchstart:n.constant("touchstart"),touchmove:n.constant("touchmove"),touchend:n.constant("touchend"),gesturestart:n.constant("gesturestart"),mousedown:n.constant("mousedown"),mousemove:n.constant("mousemove"),mouseout:n.constant("mouseout"),mouseup:n.constant("mouseup"),mouseover:n.constant("mouseover"),focusin:n.constant("focusin"),keydown:n.constant("keydown"),input:n.constant("input"),change:n.constant("change"),focus:n.constant("focus"),click:n.constant("click"),transitionend:n.constant("transitionend"),selectstart:n.constant("selectstart")}}),i("t",["2g","6","7"],function(n,t,e){var r={tap:t.constant("alloy.tap")};return{focus:t.constant("alloy.focus"),postBlur:t.constant("alloy.blur.post"),receive:t.constant("alloy.receive"),execute:t.constant("alloy.execute"),focusItem:t.constant("alloy.focus.item"),tap:r.tap,tapOrClick:e.detect().deviceType.isTouch()?r.tap:n.click,longpress:t.constant("alloy.longpress"),sandboxClose:t.constant("alloy.sandbox.close"),systemInit:t.constant("alloy.system.init"),windowScroll:t.constant("alloy.system.scroll"),attachedToDom:t.constant("alloy.system.attached"),detachedFromDom:t.constant("alloy.system.detached"),changeTab:t.constant("alloy.change.tab"),dismissTab:t.constant("alloy.dismiss.tab")}}),i("1i",["u","2m"],function(n,t){var e=function(e){if(null===e)return"null";var r=typeof e;return"object"===r&&n.prototype.isPrototypeOf(e)?"array":"object"===r&&t.prototype.isPrototypeOf(e)?"string":r},r=function(n){return function(t){return e(t)===n}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),i("w",["1i","u","v"],function(n,t,e){var r=function(n,t){return t},o=function(n){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new e("Can't merge zero objects");for(var i={},u=0;u<r.length;u++){var a=r[u];for(var c in a)a.hasOwnProperty(c)&&(i[c]=n(i[c],a[c]))}return i}},i=o(function(t,e){return n.isObject(t)&&n.isObject(e)?i(t,e):e}),u=o(r);return{deepMerge:i,merge:u}}),i("x",["z","2n"],function(n,t){var e=function(){var n=t.keys;return void 0===n?function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}:n}(),r=function(n,t){for(var r=e(n),o=0,i=r.length;o<i;o++){var u=r[o];t(n[u],u,n)}},o=function(n,t){return i(n,function(n,e,r){return{k:e,v:t(n,e,r)}})},i=function(n,t){var e={};return r(n,function(r,o){var i=t(r,o,n);e[i.k]=i.v}),e},u=function(n,t){var e=[];return r(n,function(n,r){e.push(t(n,r))}),e},a=function(n){return u(n,function(n){return n})};return{bifilter:function(n,t){var e={},o={};return r(n,function(n,r){(t(n,r)?e:o)[r]=n}),{t:e,f:o}},each:r,map:o,mapToArray:u,tupleMap:i,find:function(t,r){for(var o=e(t),i=0,u=o.length;i<u;i++){var a=o[i],c=t[a];if(r(c,a,t))return n.some(c)}return n.none()},keys:e,values:a,size:function(n){return a(n).length}}}),i("2",["t","6","w","x"],function(n,t,e,r){var o=function(n,t){a(n,n.element(),t,{})},i=function(n,t,e){a(n,n.element(),t,e)},u=function(n,t,e){a(n,t,e,{})},a=function(n,o,i,u){var a=e.deepMerge({target:o},u);n.getSystem().triggerEvent(i,o,r.map(a,t.constant))};return{emit:o,emitWith:i,emitExecute:function(t){o(t,n.execute())},dispatch:u,dispatchWith:a,dispatchEvent:function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event())},dispatchFocus:function(n,t){n.getSystem().triggerFocus(t,n.element())}}}),i("6k",["y","x","1i","u","v","16"],function(n,t,e,r,o,i){return{generate:function(u){if(!e.isArray(u))throw new o("cases must be an array");if(0===u.length)throw new o("there must be at least one case");var a=[],c={};return n.each(u,function(s,f){var l=t.keys(s);if(1!==l.length)throw new o("one and only one name per case");var d=l[0],m=s[d];if(void 0!==c[d])throw new o("duplicate key detected:"+d);if("cata"===d)throw new o("cannot have a case named cata (sorry)");if(!e.isArray(m))throw new o("case arguments must be an array");a.push(d),c[d]=function(){var e=arguments.length;if(e!==m.length)throw new o("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+e);for(var c=new r(e),s=0;s<c.length;s++)c[s]=arguments[s];return{fold:function(){if(arguments.length!==u.length)throw new o("Wrong number of arguments to fold. Expected "+u.length+", got "+arguments.length);return arguments[f].apply(null,c)},match:function(e){var r=t.keys(e);if(a.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+r.join(","));if(!n.forall(a,function(t){return n.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+a.join(", "));return e[d].apply(null,c)},log:function(n){i.log(n,{constructors:a,constructor:d,params:c})}}}}),c}}}),i("4c",["6k","6"],function(n,t){var e=n.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),r=function(n){return e.defaultedThunk(t.constant(n))},o=function(n){return e.asDefaultedOptionThunk(t.constant(n))},i=function(n){return e.mergeWithThunk(t.constant(n))};return{strict:e.strict,asOption:e.asOption,defaulted:r,defaultedThunk:e.defaultedThunk,asDefaultedOption:o,asDefaultedOptionThunk:e.asDefaultedOptionThunk,mergeWith:i,mergeWithThunk:e.mergeWithThunk}}),i("48",["6","z"],function(n,t){var e=function(r){var o=function(){return e(r)},i=function(){return e(r)},u=function(n){return e(n(r))},a=function(n){n(r)},c=function(n){return n(r)},s=function(n,t){return t(r)},f=function(n){return n(r)},l=function(n){return n(r)},d=function(){return t.some(r)};return{is:function(n){return r===n},isValue:n.constant(!0),isError:n.constant(!1),getOr:n.constant(r),getOrThunk:n.constant(r),getOrDie:n.constant(r),or:o,orThunk:i,fold:s,map:u,each:a,bind:c,exists:f,forall:l,toOption:d}},r=function(e){var o=function(n){return n()},i=function(){return n.die(e)()},u=function(n){return n},a=function(n){return n()},c=function(){return r(e)},s=function(){return r(e)},f=function(n){return n(e)};return{is:n.constant(!1),isValue:n.constant(!1),isError:n.constant(!0),getOr:n.identity,getOrThunk:o,getOrDie:i,or:u,orThunk:a,fold:f,map:c,each:n.noop,bind:s,exists:n.constant(!1),forall:n.constant(!0),toOption:t.none}};return{value:e,error:r}}),i("49",["6k","y"],function(n,t){var e=n.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);return{partition:function(n){var e=[],r=[];return t.each(n,function(n){n.fold(function(n){e.push(n)},function(n){r.push(n)})}),{errors:e,values:r}},compare:function(n,t){return n.fold(function(n){return t.fold(function(t){return e.bothErrors(n,t)},function(t){return e.firstError(n,t)})},function(n){return t.fold(function(t){return e.secondError(n,t)},function(t){return e.bothValues(n,t)})})}}}),i("2a",["y","6","w","48","49"],function(n,t,e,r,o){var i=function(n,t){return r.value(e.deepMerge.apply(void 0,[t].concat(n)))},u=function(e){return t.compose(r.error,n.flatten)(e)};return{consolidateObj:function(n,t){var e=o.partition(n);return e.errors.length>0?u(e.errors):i(e.values,t)},consolidateArr:function(n){var t=o.partition(n);return t.errors.length>0?u(t.errors):r.value(t.values)}}}),i("2b",["y","x"],function(n,t){return{narrow:function(t,e){var r={};return n.each(e,function(n){void 0!==t[n]&&t.hasOwnProperty(n)&&(r[n]=t[n])}),r},exclude:function(e,r){var o={};return t.each(e,function(t,e){n.contains(r,e)||(o[e]=t)}),o},indexOnKey:function(t,e){var r={};return n.each(t,function(n){var t=n[e];r[t]=n}),r}}}),i("2c",["z"],function(n){var t=function(t){return function(e){return e.hasOwnProperty(t)?n.from(e[t]):n.none()}};return{readOpt:t,readOr:function(n,e){return function(r){return t(n)(r).getOr(e)}},readOptFrom:function(n,e){return t(e)(n)},hasKey:function(n,t){return n.hasOwnProperty(t)&&void 0!==n[t]&&null!==n[t]}}}),i("2d",["y"],function(n){return{wrap:function(n,t){var e={};return e[n]=t,e},wrapAll:function(t){var e={};return n.each(t,function(n){e[n.key]=n.value}),e}}}),i("14",["2a","2b","2c","2d"],function(n,t,e,r){return{narrow:function(n,e){return t.narrow(n,e)},exclude:function(n,e){return t.exclude(n,e)},readOpt:function(n){return e.readOpt(n)},readOr:function(n,t){return e.readOr(n,t)},readOptFrom:function(n,t){return e.readOptFrom(n,t)},wrap:function(n,t){return r.wrap(n,t)},wrapAll:function(n){return r.wrapAll(n)},indexOnKey:function(n,e){return t.indexOnKey(n,e)},hasKey:function(n,t){return e.hasKey(n,t)},consolidate:function(t,e){return n.consolidateObj(t,e)}}}),i("6n",["4m"],function(n){var t=function(){return n.getOrDie("JSON")};return{parse:function(n){return t().parse(n)},stringify:function(n,e,r){return t().stringify(n,e,r)}}}),i("4f",["y","x","1i","6n"],function(n,t,e,r){return{formatObj:function(n){return e.isObject(n)&&t.keys(n).length>100?" removed due to size":r.stringify(n,null,2)},formatErrors:function(t){var e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t;return n.map(e,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()})}}}),i("6l",["4f","48"],function(n,t){var e=function(n,e){return t.error([{path:n,getErrorInfo:e}])};return{missingStrict:function(t,r,o){return e(t,function(){return'Could not find valid *strict* value for "'+r+'" in '+n.formatObj(o)})},missingKey:function(n,t){return e(n,function(){return'Choice schema did not contain choice key: "'+t+'"'})},missingBranch:function(t,r,o){return e(t,function(){return'The chosen schema: "'+o+'" did not exist in branches: '+n.formatObj(r)})},unsupportedFields:function(n,t){return e(n,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})},custom:function(n,t){return e(n,function(){return t})},toString:function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}}}),i("6m",["6k"],function(n){return{typeAdt:n.generate([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]}]),fieldAdt:n.generate([{field:["name","presence","type"]},{state:["name"]}])}}),i("4d",["4c","14","2a","2c","2d","6l","6m","6k","y","6","w","x","z","48","1i"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g){var p=a.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),v=function(n,t){return p.state(n,s.constant(t))},h=function(n){return p.state(n,s.identity)},y=function(n,t,e){return r.readOptFrom(t,e).fold(function(){return i.missingStrict(n,e,t)},m.value)},b=function(n,t,e){var o=r.readOptFrom(n,t).fold(function(){return e(n)},s.identity);return m.value(o)},w=function(n,t){return m.value(r.readOptFrom(n,t))},O=function(n,t,e){var o=r.readOptFrom(n,t).map(function(t){return!0===t?e(n):t});return m.value(o)},x=function(n,t,e,r){return e.fold(function(e,i,u,a){var c=function(t){return a.extract(n.concat([e]),r,t).map(function(n){return o.wrap(i,r(n))})},l=function(t){return t.fold(function(){var n=o.wrap(i,r(d.none()));return m.value(n)},function(t){return a.extract(n.concat([e]),r,t).map(function(n){return o.wrap(i,r(d.some(n)))})})};return u.fold(function(){return y(n,t,e).bind(c)},function(n){return b(t,e,n).bind(c)},function(){return w(t,e).bind(l)},function(n){return O(t,e,n).bind(l)},function(n){var r=n(t);return b(t,e,s.constant({})).map(function(n){return f.deepMerge(r,n)}).bind(c)})},function(n,e){var i=e(t);return m.value(o.wrap(n,r(i)))})},S=function(n,t,r,o){var i=c.map(r,function(e){return x(n,t,e,o)});return e.consolidateObj(i,{})},T=function(n){return{extract:function(t,e,r){return n(r).fold(function(n){return i.custom(t,n)},m.value)},toString:function(){return"val"},toDsl:function(){return u.typeAdt.itemOf(n)}}},k=function(n){var e=l.keys(n);return c.filter(e,function(e){return t.hasKey(n,e)})},C=function(n){var e=E(n),r=c.foldr(n,function(n,e){return e.fold(function(e){return f.deepMerge(n,t.wrap(e,!0))},s.constant(n))},{});return{extract:function(n,o,u){var a=g.isBoolean(u)?[]:k(u),s=c.filter(a,function(n){return!t.hasKey(r,n)});return 0===s.length?e.extract(n,o,u):i.unsupportedFields(n,s)},toString:e.toString,toDsl:e.toDsl}},E=function(n){return{extract:function(t,e,r){return S(t,r,n,e)},toString:function(){return"obj{\n"+c.map(n,function(n){return n.fold(function(n,t,e,r){return n+" -> "+r.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"},toDsl:function(){return u.typeAdt.objOf(c.map(n,function(n){return n.fold(function(n,t,e,r){return u.fieldAdt.field(n,e,r)},function(n){return u.fieldAdt.state(n)})}))}}},D=function(n){return{extract:function(t,r,o){var i=c.map(o,function(e,o){return n.extract(t.concat(["["+o+"]"]),r,e)});return e.consolidateArr(i)},toString:function(){return"array("+n.toString()+")"},toDsl:function(){return u.typeAdt.arrOf(n)}}},A=function(t,e){var r=function(n,e){return D(T(t)).extract(n,s.identity,e)};return{extract:function(t,o,i){var u=l.keys(i);return r(t,u).bind(function(r){var u=c.map(r,function(t){return p.field(t,t,n.strict(),e)});return E(u).extract(t,o,i)})},toString:function(){return"setOf("+e.toString()+")"},toDsl:function(){return u.typeAdt.setOf(t,e)}}},R=T(m.value),F=s.compose(D,E);return{anyValue:s.constant(R),value:T,obj:E,objOnly:C,arr:D,setOf:A,arrOfObj:F,state:p.state,field:p.field,output:v,snapshot:h}}),i("29",["4c","4d","48","1i"],function(n,t,e,r){var o=function(e,r){return t.field(e,e,n.strict(),r)};return{strict:function(e){return t.field(e,e,n.strict(),t.anyValue())},strictOf:o,strictObjOf:function(e,r){return t.field(e,e,n.strict(),t.obj(r))},strictArrayOf:function(n,t){return o(n,t)},strictArrayOfObj:function(e,r){return t.field(e,e,n.strict(),t.arrOfObj(r))},strictFunction:function(o){return t.field(o,o,n.strict(),t.value(function(n){return r.isFunction(n)?e.value(n):e.error("Not a function")}))},forbid:function(r,o){return t.field(r,r,n.asOption(),t.value(function(){return e.error("The field: "+r+" is forbidden. "+o)}))},option:function(e){return t.field(e,e,n.asOption(),t.anyValue())},optionOf:function(e,r){return t.field(e,e,n.asOption(),r)},optionObjOf:function(e,r){return t.field(e,e,n.asOption(),t.obj(r))},optionObjOfOnly:function(e,r){return t.field(e,e,n.asOption(),t.objOnly(r))},defaulted:function(e,r){return t.field(e,e,n.defaulted(r),t.anyValue())},defaultedOf:function(e,r,o){return t.field(e,e,n.defaulted(r),o)},defaultedObjOf:function(e,r,o){return t.field(e,e,n.defaulted(r),t.obj(o))},field:function(n,e,r,o){return t.field(n,e,r,o)},state:function(n,e){return t.state(n,e)}}}),i("4e",["14","6l","4d","6m","x"],function(n,t,e,r,o){var i=function(r,o,i,u,a){return n.readOptFrom(u,a).fold(function(){return t.missingBranch(r,u,a)},function(n){return e.obj(n).extract(r.concat(["branch: "+a]),o,i)})};return{choose:function(e,u){return{extract:function(r,o,a){return n.readOptFrom(a,e).fold(function(){return t.missingKey(r,e)},function(n){return i(r,o,a,u,n)})},toString:function(){return"chooseOn("+e+"). Possible values: "+o.keys(u)},toDsl:function(){return r.typeAdt.choiceOf(e,u)}}}}}),i("2e",["4e","4d","4f","6","48","v"],function(n,t,e,r,o,i){var u=t.value(o.value),a=function(n){return t.arrOfObj(n)},c=function(){return t.arr(u)},s=t.arr,f=t.obj,l=t.objOnly,d=t.setOf,m=function(n){return t.value(n)},g=function(n,t,e,r){return t.extract([n],e,r).fold(function(n){return o.error({input:r,errors:n})},o.value)},p=function(n,t,e){return g(n,t,r.constant,e)},v=function(n,t,e){return g(n,t,r.identity,e)},h=function(n){return n.fold(function(n){throw new i(w(n))},r.identity)},y=function(n,t,e){return h(v(n,t,e))},b=function(n,t,e){return h(p(n,t,e))},w=function(n){return"Errors: \n"+e.formatErrors(n.errors)+"\n\nInput object: "+e.formatObj(n.input)},O=function(t,e){return n.choose(t,e)};return{anyValue:r.constant(u),arrOfObj:a,arrOf:s,arrOfVal:c,valueOf:m,setOf:d,objOf:f,objOfOnly:l,asStruct:p,asRaw:v,asStructOrDie:b,asRawOrDie:y,getOrDie:h,formatError:w,choose:O}}),i("47",["29","14","2e","1i","y","6n","6","u","v"],function(n,t,e,r,o,i,u,a,c){var s=function(r){if(!t.hasKey(r,"can")&&!t.hasKey(r,"abort")&&!t.hasKey(r,"run"))throw new c("EventHandler defined by: "+i.stringify(r,null,2)+" does not have can, abort, or run!");return e.asRawOrDie("Extracting event.handler",e.objOfOnly([n.defaulted("can",u.constant(!0)),n.defaulted("abort",u.constant(!1)),n.defaulted("run",u.noop)]),r)},f=function(n,t){return function(){var e=a.prototype.slice.call(arguments,0);return o.foldl(n,function(n,r){return n&&t(r).apply(void 0,e)},!0)}},l=function(n,t){return function(){var e=a.prototype.slice.call(arguments,0);return o.foldl(n,function(n,r){return n||t(r).apply(void 0,e)},!1)}};return{read:function(n){return r.isFunction(n)?{can:u.constant(!0),abort:u.constant(!1),run:n}:n},fuse:function(n){var t=f(n,function(n){return n.can}),e=l(n,function(n){return n.abort});return s({can:t,abort:e,run:function(){var t=a.prototype.slice.call(arguments,0);o.each(n,function(n){n.run.apply(void 0,t)})}})},nu:s}}),i("3d",["43","2","t","47","14"],function(n,t,e,r,o){var i=function(n,t){return{key:n,value:r.nu({abort:t})}},u=function(n,t){return{key:n,value:r.nu({can:t})}},a=function(n,t){return{key:n,value:r.nu({run:t})}},c=function(n){return function(t){return a(n,t)}},s=function(t){return function(e){return{key:t,value:r.nu({run:function(t,r){n.isSource(t,r)&&e(t,r)}})}}},f=function(n,e){return a(n,function(r,o){r.getSystem().getByUid(e).each(function(e){t.dispatchEvent(e,e.element(),n,o)})})},l=function(n,t,e){var r=t.partUids()[e];return f(n,r)},d=function(n,t){return a(n,function(n,e){n.getSystem().getByDom(e.event().target()).each(function(r){t(n,r,e)})})},m=function(n){return a(n,function(n,t){t.cut()})},g=function(n){return a(n,function(n,t){t.stop()})};return{derive:o.wrapAll,run:a,preventDefault:function(n){return{key:n,value:r.nu({run:function(n,t){t.event().prevent()}})}},runActionExtra:function(n,t,e){return{key:n,value:r.nu({run:function(n){t.apply(void 0,[n].concat(e))}})}},runOnAttached:s(e.attachedToDom()),runOnDetached:s(e.detachedFromDom()),
runOnInit:s(e.systemInit()),runOnExecute:c(e.execute()),redirectToUid:f,redirectToPart:l,runWithTarget:d,abort:i,can:u,cutter:m,stopper:g}}),i("4a",["z"],function(n){return{markAsBehaviourApi:function(n){return n},markAsExtraApi:function(n){return n},markAsSketchApi:function(n){return n},getAnnotation:n.none}}),i("4k",["y","6","u","v"],function(n,t,e,r){return function(){var o=arguments;return function(){for(var i=new e(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var a={};return n.each(o,function(n,e){a[n]=t.constant(i[e])}),a}}}),i("6p",["y","1i","v"],function(n,t,e){var r=function(n){return n.slice(0).sort()};return{sort:r,reqMessage:function(n,t){throw new e("All required keys ("+r(n).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(n){throw new e("Unsupported keys for object: "+r(n).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new e("The "+r+" fields must be an array. Was: "+o+".");n.each(o,function(n){if(!t.isString(n))throw new e("The value "+n+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(n,t){throw new e("All values need to be of type: "+t+". Keys ("+r(n).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);n.find(o,function(n,t){return t<o.length-1&&n===o[t+1]}).each(function(n){throw new e("The field: "+n+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),i("4l",["y","6","x","z","6p","v","2n"],function(n,t,e,r,o,i,u){return function(a,c){var s=a.concat(c);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",a),o.validateStrArr("optional",c),o.checkDupes(s),function(i){var f=e.keys(i);n.forall(a,function(t){return n.contains(f,t)})||o.reqMessage(a,f);var l=n.filter(f,function(t){return!n.contains(s,t)});l.length>0&&o.unsuppMessage(l);var d={};return n.each(a,function(n){d[n]=t.constant(i[n])}),n.each(c,function(n){d[n]=t.constant(u.prototype.hasOwnProperty.call(i,n)?r.some(i[n]):r.none())}),d}}}),i("2o",["4k","4l"],function(n,t){return{immutable:n,immutableBag:t}}),i("6o",["6n","2o","2m"],function(n,t,e){var r=function(t){var e=o(t);return n.stringify(e,null,2)},o=function(n){return{tag:n.tag(),classes:n.classes().getOr([]),attributes:n.attributes().getOr({}),styles:n.styles().getOr({}),value:n.value().getOr("<none>"),innerHtml:n.innerHtml().getOr("<none>"),defChildren:n.defChildren().getOr("<none>"),domChildren:n.domChildren().fold(function(){return"<none>"},function(n){return 0===n.length?"0 children, but still specified":e(n.length)})}};return{nu:t.immutableBag(["tag"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),defToStr:r,defToRaw:o}}),i("4b",["6o","14","y","x","w","6n","2o"],function(n,t,e,r,o,i,u){var a=["classes","attributes","styles","value","innerHtml","defChildren","domChildren"],c=u.immutableBag([],a),s=function(n){var t=f(n);return i.stringify(t,null,2)},f=function(n){return{classes:n.classes().getOr("<none>"),attributes:n.attributes().getOr("<none>"),styles:n.styles().getOr("<none>"),value:n.value().getOr("<none>"),innerHtml:n.innerHtml().getOr("<none>"),defChildren:n.defChildren().getOr("<none>"),domChildren:n.domChildren().fold(function(){return"<none>"},function(n){return 0===n.length?"0 children, but still specified":String(n.length)})}},l=function(n,e,r){return e.fold(function(){return r.fold(function(){return{}},function(e){return t.wrap(n,e)})},function(e){return r.fold(function(){return t.wrap(n,e)},function(e){return t.wrap(n,e)})})};return{nu:c,derive:function(n){var t={},o=r.keys(n);return e.each(o,function(e){n[e].each(function(n){t[e]=n})}),c(t)},merge:function(e,r){var i=o.deepMerge({tag:e.tag(),classes:r.classes().getOr([]).concat(e.classes().getOr([])),attributes:o.merge(e.attributes().getOr({}),r.attributes().getOr({})),styles:o.merge(e.styles().getOr({}),r.styles().getOr({}))},r.innerHtml().or(e.innerHtml()).map(function(n){return t.wrap("innerHtml",n)}).getOr({}),l("domChildren",r.domChildren(),e.domChildren()),l("defChildren",r.defChildren(),e.defChildren()),r.value().or(e.value()).map(function(n){return t.wrap("value",n)}).getOr({}));return n.nu(i)},modToStr:s,modToRaw:f}}),i("27",["3d","4a","4b","29","14","2e","6","w","x","z","17","u","16","v"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var g=function(n,t,e,o,u,a){var c=i.objOfOnly(n),s=r.optionObjOf(t,[r.optionObjOfOnly("config",n)]);return y(c,s,t,e,o,u,a)},p=function(n,t,e,o,i,u){var a=n,c=r.optionObjOf(t,[r.optionOf("config",n)]);return y(a,c,t,e,o,i,u)},v=function(n,e,r){var o=function(t){var o=arguments;return t.config({name:u.constant(n)}).fold(function(){throw new m("We could not find any behaviour configuration for: "+n+". Using API: "+r)},function(n){var r=l.prototype.slice.call(o,1);return e.apply(void 0,[t,n.config,n.state].concat(r))})};return t.markAsBehaviourApi(o,r,e)},h=function(n){return{key:n,value:void 0}},y=function(n,r,l,d,m,g,p){var y=function(n){return o.hasKey(n,l)?n[l]():s.none()},b=c.map(m,function(n,t){return v(l,n,t)}),w=c.map(g,function(n,e){return t.markAsExtraApi(n,e)}),O=a.deepMerge(w,b,{revoke:u.curry(h,l),config:function(t){var e=i.asStructOrDie(l+"-config",n,t);return{key:l,value:{config:e,me:O,configAsRaw:f.cached(function(){return i.asRawOrDie(l+"-config",n,t)}),initialConfig:t,state:p}}},schema:function(){return r},exhibit:function(n,t){return y(n).bind(function(n){return o.readOptFrom(d,"exhibit").map(function(e){return e(t,n.config,n.state)})}).getOr(e.nu({}))},name:function(){return l},handlers:function(n){return y(n).bind(function(n){return o.readOptFrom(d,"events").map(function(t){return t(n.config,n.state)})}).getOr({})}});return O};return{executeEvent:function(t,e,r){return n.runOnExecute(function(n){r(n,t,e)})},loadEvent:function(t,e,r){return n.runOnInit(function(n){r(n,t,e)})},create:g,createModes:p}}),i("6q",["y","6","x","1i","6p","v"],function(n,t,e,r,o,i){var u=function(n,t){return a(n,t,{validate:r.isFunction,label:"function"})},a=function(t,r,u){if(0===r.length)throw new i("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(i){var a=e.keys(i);n.forall(r,function(t){return n.contains(a,t)})||o.reqMessage(r,a),t(r,a);var c=n.filter(r,function(n){return!u.validate(i[n],n)});return c.length>0&&o.invalidTypeMessage(c,u.label),i}},c=function(t,e){var r=n.filter(e,function(e){return!n.contains(t,e)});r.length>0&&o.unsuppMessage(r)},s=t.noop;return{exactly:t.curry(u,c),ensure:t.curry(u,s),ensureWith:t.curry(a,s)}}),i("4g",["6q"],function(n){return n.ensure(["readState"])}),u("1w",Math),i("28",["4g","1w"],function(n){return{init:function(){return n({readState:function(){return"No State required"}})}}}),i("q",["27","28","29","14","2e","6"],function(n,t,e,r,o,i){var u=function(n){return r.wrapAll(n)},a=o.objOfOnly([e.strict("fields"),e.strict("name"),e.defaulted("active",{}),e.defaulted("apis",{}),e.defaulted("extra",{}),e.defaulted("state",t)]),c=function(t){var e=o.asRawOrDie("Creating behaviour: "+t.name,a,t);return n.create(e.fields,e.name,e.active,e.apis,e.extra,e.state)},s=o.objOfOnly([e.strict("branchKey"),e.strict("branches"),e.strict("name"),e.defaulted("active",{}),e.defaulted("apis",{}),e.defaulted("extra",{}),e.defaulted("state",t)]),f=function(t){var e=o.asRawOrDie("Creating behaviour: "+t.name,s,t);return n.createModes(o.choose(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)};return{derive:u,revoke:i.constant(void 0),noActive:i.constant({}),noApis:i.constant({}),noExtra:i.constant({}),noState:i.constant(t),create:c,createModes:f}}),i("4h",[],function(){return function(n,t,e){var r=e||!1,o=function(){t(),r=!0},i=function(){n(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}}),i("b",["1d"],function(n){var t=function(n){return n.dom().nodeName.toLowerCase()},e=function(n){return n.dom().nodeType},r=function(n){return n.dom().nodeValue},o=function(n){return function(t){return e(t)===n}},i=function(r){return e(r)===n.COMMENT||"#comment"===t(r)},u=o(n.ELEMENT),a=o(n.TEXT),c=o(n.DOCUMENT);return{name:t,type:e,value:r,isElement:u,isText:a,isDocument:c,isComment:i}}),i("4i",["1i","y","x","b","v","16"],function(n,t,e,r,o,i){var u=function(t,e,r){if(!(n.isString(r)||n.isBoolean(r)||n.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(e,r+"")},a=function(n,t,e){u(n.dom(),t,e)},c=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},s=function(n,t){var e=n.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},f=function(n,t,e){s(n,e)&&!s(t,e)&&a(t,e,c(n,e))};return{clone:function(n){return t.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:a,setAll:function(n,t){var r=n.dom();e.each(t,function(n,t){u(r,t,n)})},get:c,has:s,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(n,e,o){r.isElement(n)&&r.isElement(e)&&t.each(o,function(t){f(n,e,t)})}}}),i("6r",["y","4i"],function(n,t){var e=function(n,e){var r=t.get(n,e);return void 0===r||""===r?[]:r.split(" ")};return{read:e,add:function(n,r,o){var i=e(n,r).concat([o]);t.set(n,r,i.join(" "))},remove:function(r,o,i){var u=n.filter(e(r,o),function(n){return n!==i});u.length>0?t.set(r,o,u.join(" ")):t.remove(r,o)}}}),i("4j",["y","6r"],function(n,t){var e=function(n){return t.read(n,"class")},r=function(n,e){return t.add(n,"class",e)},o=function(n,e){return t.remove(n,"class",e)};return{get:e,add:r,remove:o,toggle:function(t,i){n.contains(e(t),i)?o(t,i):r(t,i)},supports:function(n){return void 0!==n.dom().classList}}}),i("2f",["4h","4i","4j"],function(n,t,e){var r=function(n){0===(e.supports(n)?n.dom().classList:e.get(n)).length&&t.remove(n,"class")},o=function(t,r){var o=e.supports(t),u=t.dom().classList;return n(function(){o?u.remove(r):e.remove(t,r)},function(){o?u.add(r):e.add(t,r)},i(t,r))},i=function(n,t){return e.supports(n)&&n.dom().classList.contains(t)};return{add:function(n,t){e.supports(n)?n.dom().classList.add(t):e.add(n,t)},remove:function(n,t){if(e.supports(n)){n.dom().classList.remove(t)}else e.remove(n,t);r(n)},toggle:function(n,t){return e.supports(n)?n.dom().classList.toggle(t):e.toggle(n,t)},toggler:o,has:i}}),i("r",["2f"],function(n){var t=function(t,e,r){n.remove(t,r),n.add(t,e)};return{toAlpha:function(n,e){t(n.element(),e.alpha(),e.omega())},toOmega:function(n,e){t(n.element(),e.omega(),e.alpha())},isAlpha:function(t,e){return n.has(t.element(),e.alpha())},isOmega:function(t,e){return n.has(t.element(),e.omega())},clear:function(t,e){n.remove(t.element(),e.alpha()),n.remove(t.element(),e.omega())}}}),i("s",["29"],function(n){return[n.strict("alpha"),n.strict("omega")]}),i("1",["q","r","s"],function(n,t,e){return n.create({fields:e,name:"swapping",apis:t})}),i("2p",[],function(){return{toArray:function(n,t){var e=[],r=function(n){return e.push(n),t(n)},o=t(n);do{o=o.bind(r)}while(o.isSome());return e}}}),i("10",["1i","y","6","z","2o","2p","1a","a"],function(n,t,e,r,o,i,u,a){var c=function(n){return a.fromDom(n.dom().ownerDocument)},s=function(n){var t=c(n);return a.fromDom(t.dom().documentElement)},f=function(n){var t=n.dom().ownerDocument.defaultView;return a.fromDom(t)},l=function(n){var t=n.dom();return r.from(t.parentNode).map(a.fromDom)},d=function(n){return l(n).bind(function(e){var r=w(e);return t.findIndex(r,function(t){return u.eq(n,t)})})},m=function(t,r){for(var o=n.isFunction(r)?r:e.constant(!1),i=t.dom(),u=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,s=a.fromDom(c);if(u.push(s),!0===o(s))break;i=c}return u},g=function(n){var e=function(e){return t.filter(e,function(t){return!u.eq(n,t)})};return l(n).map(w).map(e).getOr([])},p=function(n){var t=n.dom();return r.from(t.offsetParent).map(a.fromDom)},v=function(n){var t=n.dom();return r.from(t.previousSibling).map(a.fromDom)},h=function(n){var t=n.dom();return r.from(t.nextSibling).map(a.fromDom)},y=function(n){return t.reverse(i.toArray(n,v))},b=function(n){return i.toArray(n,h)},w=function(n){var e=n.dom();return t.map(e.childNodes,a.fromDom)},O=function(n,t){var e=n.dom().childNodes;return r.from(e[t]).map(a.fromDom)},x=function(n){return O(n,0)},S=function(n){return O(n,n.dom().childNodes.length-1)},T=function(n){return n.dom().childNodes.length},k=function(n){return n.dom().hasChildNodes()},C=o.immutable("element","offset");return{owner:c,defaultView:f,documentElement:s,parent:l,findIndex:d,parents:m,siblings:g,prevSibling:v,offsetParent:p,prevSiblings:y,nextSibling:h,nextSiblings:b,children:w,child:O,firstChild:x,lastChild:S,childNodesCount:T,hasChildNodes:k,leaf:function(n,t){var e=w(n);return e.length>0&&t<e.length?C(e[t],0):C(n,t)}}}),i("9",["10"],function(n){var t=function(t,e){n.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},e=function(e,r){n.nextSibling(e).fold(function(){n.parent(e).each(function(n){o(n,r)})},function(n){t(n,r)})},r=function(t,e){n.firstChild(t).fold(function(){o(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},o=function(n,t){n.dom().appendChild(t.dom())};return{before:t,after:e,prepend:r,append:o,appendAt:function(e,r,i){n.child(e,i).fold(function(){o(e,r)},function(n){t(n,r)})},wrap:function(n,e){t(n,e),o(e,n)}}}),i("2s",["y","9"],function(n,t){return{before:function(e,r){n.each(r,function(n){t.before(e,n)})},after:function(e,r){n.each(r,function(n,o){var i=0===o?e:r[o-1];t.after(i,n)})},prepend:function(e,r){n.each(r.slice().reverse(),function(n){t.prepend(e,n)})},append:function(e,r){n.each(r,function(n){t.append(e,n)})}}}),i("11",["y","2s","10"],function(n,t,e){var r=function(t){t.dom().textContent="",n.each(e.children(t),function(n){o(n)})},o=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(n){var r=e.children(n);r.length>0&&t.before(n,r),o(n)}}}),i("12",["17","a","b","1b"],function(n,t,e,r){var o=function(n){var t=e.isText(n)?n.dom().parentNode:n.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=n.cached(function(){return u(t.fromDom(r))}),u=function(n){var e=n.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return t.fromDom(e)};return{body:i,getBody:u,inBody:o}}),i("3",["2","t","y","z","9","11","12","10"],function(n,t,e,r,o,i,u,a){var c=function(r){n.emit(r,t.detachedFromDom());var o=r.components();e.each(o,c)},s=function(r){var o=r.components();e.each(o,s),n.emit(r,t.attachedToDom())},f=function(n,t){l(n,t,o.append)},l=function(n,t,e){n.getSystem().addToWorld(t),e(n.element(),t.element()),u.inBody(n.element())&&s(t),n.syncComponents()},d=function(n){c(n),i.remove(n.element()),n.getSystem().removeFromWorld(n)};return{attach:f,attachWith:l,detach:function(n){var t=a.parent(n.element()).bind(function(t){return n.getSystem().getByDom(t).fold(r.none,r.some)});d(n),t.each(function(n){n.syncComponents()})},detachChildren:function(n){var t=n.components();e.each(t,d),i.empty(n.element()),n.syncComponents()},attachSystem:function(n,t){o.append(n,t.element());var r=a.children(t.element());e.each(r,function(n){t.getByDom(n).each(s)})},detachSystem:function(n){var t=a.children(n.element());e.each(t,function(t){n.getByDom(t).each(c)}),i.remove(n.element())}}}),i("6s",["y","a","10","1b"],function(n,t,e,r){return{fromHtml:function(n,o){var i=(o||r).createElement("div");return i.innerHTML=n,e.children(t.fromDom(i))},fromTags:function(e,r){return n.map(e,function(n){return t.fromTag(n,r)})},fromText:function(e,r){return n.map(e,function(n){return t.fromText(n,r)})},fromDom:function(e){return n.map(e,t.fromDom)}}}),i("4n",["a","6s","9","2s","11","10"],function(n,t,e,r,o,i){var u=function(n){return n.dom().innerHTML};return{get:u,set:function(u,a){var c=i.owner(u).dom(),s=n.fromDom(c.createDocumentFragment()),f=t.fromHtml(a,c);r.append(s,f),o.empty(u),e.append(u,s)},getOuter:function(t){var r=n.fromTag("div"),o=n.fromDom(t.dom().cloneNode(!0));return e.append(r,o),u(r)}}}),i("4o",["4i","a","9","2s","11","10"],function(n,t,e,r,o,i){var u=function(n,e){return t.fromDom(n.dom().cloneNode(e))},a=function(n){return u(n,!0)},c=function(e,r){var o=t.fromTag(r),i=n.clone(e);return n.setAll(o,i),o};return{shallow:function(n){return u(n,!1)},shallowAs:c,deep:a,copy:function(n,t){var e=c(n,t),o=i.children(a(n));return r.append(e,o),e},mutate:function(n,t){var u=c(n,t);e.before(n,u);var a=i.children(n);return r.append(u,a),o.remove(n),u}}}),i("2t",["4n","4o"],function(n,t){return{getHtml:function(e){var r=t.shallow(e);return n.getOuter(r)}}}),i("13",["2t"],function(n){return{element:function(t){return n.getHtml(t)}}}),i("15",["z"],function(n){return{cat:function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},findMap:function(t,e){for(var r=0;r<t.length;r++){var o=e(t[r],r);if(o.isSome())return o}return n.none()},liftN:function(t,e){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return n.none();r.push(i.getOrDie())}return n.some(e.apply(null,r))}}}),i("4",["t","13","14","y","6","x","15","16","v"],function(n,t,e,r,o,i,u,a,c){var s="unknown",f=!0,l="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__",d=[],m=["alloy/data/Fields","alloy/debugging/Debugging"],g=function(){if(!1===f)return s;var n=new c;if(void 0!==n.stack){var t=n.stack.split("\n");return r.find(t,function(n){return n.indexOf("alloy")>0&&!r.exists(m,function(t){return n.indexOf(t)>-1})}).getOr(s)}return s},p=function(){},v={logEventCut:o.noop,logEventStopped:o.noop,logNoParent:o.noop,logEventNoHandlers:o.noop,logEventResponse:o.noop,write:o.noop},h=function(e,o,i){var u=f&&("*"===d||r.contains(d,e))?function(){var i=[];return{logEventCut:function(n,t,e){i.push({outcome:"cut",target:t,purpose:e})},logEventStopped:function(n,t,e){i.push({outcome:"stopped",target:t,purpose:e})},logNoParent:function(n,t,e){i.push({outcome:"no-parent",target:t,purpose:e})},logEventNoHandlers:function(n,t){i.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,e){i.push({outcome:"response",purpose:e,target:t})},write:function(){r.contains(["mousemove","mouseover","mouseout",n.systemInit()],e)||a.log(e,{event:e,target:o.dom(),sequence:r.map(i,function(n){return r.contains(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+t.element(n.target)+")":n.outcome})})}}}():v,c=i(u);return u.write(),c},y=function(n){var e=function(n){var o=n.spec();return{"(original.spec)":o,"(dom.ref)":n.element().dom(),"(element)":t.element(n.element()),"(initComponents)":r.map(void 0!==o.components?o.components:[],e),"(components)":r.map(n.components(),e),"(bound.events)":i.mapToArray(n.events(),function(n,t){return[t]}).join(", "),"(behaviours)":void 0!==o.behaviours?i.map(o.behaviours,function(t,e){return void 0===t?"--revoked--":{config:t.configAsRaw(),"original-config":t.initialConfig,state:n.readState(e)}}):"none"}};return e(n)},b=function(){return void 0!==window[l]?window[l]:(window[l]={systems:{},lookup:function(n){var r=window[l].systems,o=i.keys(r);return u.findMap(o,function(o){return r[o].getByUid(n).toOption().map(function(n){return e.wrap(t.element(n.element()),y(n))})})}},window[l])},w=function(n,t){b().systems[n]=t};return{logHandler:p,noLogger:o.constant(v),getTrace:g,monitorEvent:h,isDebugging:o.constant(f),registerInspector:w}}),i("5",[],function(){var n=function(t){var e=t,r=function(){return e};return{get:r,set:function(n){e=n},clone:function(){return n(r())}}};return n}),i("4p",["1i","z"],function(n,t){return function(e,r,o,i,u){return e(o,i)?t.some(o):n.isFunction(u)&&u(o)?t.none():r(o,i,u)}}),i("2u",["1i","y","6","z","12","1a","a","4p"],function(n,t,e,r,o,i,u,a){var c=function(n){return d(o.body(),n)},s=function(t,o,i){for(var a=t.dom(),c=n.isFunction(i)?i:e.constant(!1);a.parentNode;){a=a.parentNode;var s=u.fromDom(a);if(o(s))return r.some(s);if(c(s))break}return r.none()},f=function(n,t){var e=n.dom();return e.parentNode?l(u.fromDom(e.parentNode),function(e){return!i.eq(n,e)&&t(e)}):r.none()},l=function(n,r){return t.find(n.dom().childNodes,e.compose(r,u.fromDom)).map(u.fromDom)},d=function(n,t){var e=function(n){for(var o=0;o<n.childNodes.length;o++){if(t(u.fromDom(n.childNodes[o])))return r.some(u.fromDom(n.childNodes[o]));var i=e(n.childNodes[o]);if(i.isSome())return i}return r.none()};return e(n.dom())};return{first:c,ancestor:s,closest:function(n,t,e){return a(function(n){return t(n)},s,n,t,e)},sibling:f,child:l,descendant:d}}),i("1c",["2u"],function(n){return{any:function(t){return n.first(t).isSome()},ancestor:function(t,e,r){return n.ancestor(t,e,r).isSome()},closest:function(t,e,r){return n.closest(t,e,r).isSome()},sibling:function(t,e){return n.sibling(t,e).isSome()},child:function(t,e){return n.child(t,e).isSome()},descendant:function(t,e){return n.descendant(t,e).isSome()}}}),i("8",["6","z","1a","a","1c","10","1b"],function(n,t,e,r,o,i,u){var a=function(n){n.dom().focus()},c=function(n){var e=void 0!==n?n.dom():u;return t.from(e.activeElement).map(r.fromDom)};return{hasFocus:function(n){var t=i.owner(n).dom();return n.dom()===t.activeElement},focus:a,blur:function(n){n.dom().blur()},active:c,search:function(n){return c(i.owner(n)).filter(function(t){return n.dom().contains(t.dom())})},focusInside:function(t){var r=i.owner(t);c(r).filter(function(r){return o.closest(r,n.curry(e.eq,t))}).fold(function(){a(t)},n.noop)}}}),u("1e",tinymce.util.Tools.resolve),i("c",["1e"],function(n){return n("tinymce.ThemeManager")}),i("d",["1e"],function(n){return n("tinymce.dom.DOMUtils")}),i("e",["1b"],function(n){return{openLink:function(t){var e=n.createElement("a");e.target="_blank",e.href=t.href,e.rel="noreferrer noopener";var r=n.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.body.appendChild(e),e.dispatchEvent(r),n.body.removeChild(e)}}}),i("f",[],function(){return{isSkinDisabled:function(n){return!1===n.settings.skin}}}),i("g",["6"],function(n){var t="formatChanged",e="orientationChanged",r="dropupDismissed";return{formatChanged:n.constant(t),orientationChanged:n.constant(e),dropupDismissed:n.constant(r)}}),i("2v",["3d","t","13","2e","y","x"],function(n,t,e,r,o,i){var u=function(n,t){return t.universal()?n:o.filter(n,function(n){return o.contains(t.channels(),n)})};return{events:function(a){return n.derive([n.run(t.receive(),function(n,t){var c=a.channels(),s=i.keys(c),f=u(s,t);o.each(f,function(o){var i=c[o](),u=i.schema(),a=r.asStructOrDie("channel["+o+"] data\nReceiver: "+e.element(n.element()),u,t.data());i.onReceive()(n,a)})})])}}}),i("6t",["29","2e","6"],function(n,t,e){var r=[n.strict("menu"),n.strict("selectedMenu")],o=[n.strict("item"),n.strict("selectedItem")],i=t.objOfOnly(o.concat(r)),u=t.objOfOnly(o);return{menuFields:e.constant(r),itemFields:e.constant(o),schema:e.constant(i),itemSchema:e.constant(u)}}),i("4q",["4","6t","4c","29","2e","y","6","z","48","16"],function(n,t,e,r,o,i,u,a,c){var s=r.strictObjOf("initSize",[r.strict("numColumns"),r.strict("numRows")]),f=function(){return r.strictOf("markers",t.itemSchema())},l=function(){return r.strictOf("markers",t.schema())},d=function(){return r.strictObjOf("markers",[r.strict("backgroundMenu")].concat(t.menuFields()).concat(t.itemFields()))},m=function(n){return r.strictObjOf("markers",i.map(n,r.strict))},g=function(t,e,i){var u=n.getTrace();return r.field(e,e,i,o.valueOf(function(r){return c.value(function(){return n.logHandler(t,e,u),r.apply(void 0,arguments)})}))},p=function(n){return g("onHandler",n,e.defaulted(u.noop))},v=function(n){return g("onKeyboardHandler",n,e.defaulted(a.none))},h=function(n){return g("onHandler",n,e.strict())},y=function(n){return g("onKeyboardHandler",n,e.strict())},b=function(n,t){return r.state(n,u.constant(t))},w=function(n){return r.state(n,u.identity)};return{initSize:u.constant(s),itemMarkers:f,menuMarkers:l,tieredMenuMarkers:d,markers:m,onHandler:p,onKeyboardHandler:v,onStrictHandler:h,onStrictKeyboardHandler:y,output:b,snapshot:w}}),i("2w",["4q","29","2e","48"],function(n,t,e,r){return[t.strictOf("channels",e.setOf(r.value,e.objOfOnly([n.onStrictHandler("onReceive"),t.defaulted("schema",e.anyValue())])))]}),i("1f",["q","2v","2w"],function(n,t,e){return n.create({fields:e,name:"receiving",active:t})}),i("2y",["2f"],function(n){var t=function(n,t){var e=o(n,t),r=t.aria();r.update()(n,r,e)},e=function(e,r){n.add(e.element(),r.toggleClass()),t(e,r)},r=function(e,r){n.remove(e.element(),r.toggleClass()),t(e,r)},o=function(t,e){return n.has(t.element(),e.toggleClass())};return{onLoad:function(n,t,o){(t.selected()?e:r)(n,t,o)},toggle:function(e,r){n.toggle(e.element(),r.toggleClass()),t(e,r)},isOn:o,on:e,off:r}}),i("2x",["3d","27","2y","4b","y"],function(n,t,e,r,o){return{exhibit:function(){return r.nu({})},events:function(r,i){var u=t.executeEvent(r,i,e.toggle),a=t.loadEvent(r,i,e.onLoad);return n.derive(o.flatten([r.toggleOnExecute()?[u]:[],[a]]))}}}),i("4r",["14","y","z","b","4i"],function(n,t,e,r,o){var i=function(n,t,e){o.set(n.element(),"aria-pressed",e),t.syncWithExpanded()&&u(n,t,e)},u=function(n,t,e){o.set(n.element(),"aria-expanded",e)},a={button:["aria-pressed"],"input:checkbox":["aria-checked"]},c={button:["aria-pressed"],listbox:["aria-pressed","aria-expanded"],menuitemcheckbox:["aria-checked"]},s=function(t){var e=t.element(),i=r.name(e),u="input"===i&&o.has(e,"type")?":"+o.get(e,"type"):"";return n.readOptFrom(a,i+u)},f=function(t){var r=t.element();if(o.has(r,"role")){var i=o.get(r,"role");return n.readOptFrom(c,i)}return e.none()};return{updatePressed:i,updateSelected:function(n,t,e){o.set(n.element(),"aria-selected",e)},updateChecked:function(n,t,e){o.set(n.element(),"aria-checked",e)},updateExpanded:u,updateAuto:function(n,e,r){var i=f(n).orThunk(function(){return s(n)}).getOr([]);t.each(i,function(t){o.set(n.element(),t,r)})}}}),i("2z",["4r","4q","29","2e","6"],function(n,t,e,r,o){return[e.defaulted("selected",!1),e.strict("toggleClass"),e.defaulted("toggleOnExecute",!0),e.defaultedOf("aria",{mode:"none"},r.choose("mode",{pressed:[e.defaulted("syncWithExpanded",!1),t.output("update",n.updatePressed)],checked:[t.output("update",n.updateChecked)],expanded:[t.output("update",n.updateExpanded)],selected:[t.output("update",n.updateSelected)],none:[t.output("update",o.noop)]}))]}),i("1g",["q","2x","2y","2z"],function(n,t,e,r){return n.create({fields:r,name:"toggling",active:t,apis:e})}),i("4s",["6"],function(n){var t="alloy-id-",e="data-alloy-id";return{prefix:n.constant(t),idAttr:n.constant(e)}}),u("4t",Date),i("3f",["4t","1w","2m"],function(n,t,e){var r=0;return{generate:function(o){var i=(new n).getTime(),u=t.floor(1e9*t.random());return r++,o+"_"+u+r+e(i)}}}),i("4u",["2u","2r","4p"],function(n,t,e){var r=function(e,r,o){return n.ancestor(e,function(n){return t.is(n,r)},o)};return{first:function(n){return t.one(n)},ancestor:r,sibling:function(e,r){return n.sibling(e,function(n){return t.is(n,r)})},child:function(e,r){return n.child(e,function(n){return t.is(n,r)})},descendant:function(n,e){return t.one(e,n)},closest:function(n,o,i){return e(t.is,r,n,o,i)}}}),i("30",["4s","3f","6","z","4i","b","4u"],function(n,t,e,r,o,i,u){var a=n.prefix(),c=n.idAttr();return{revoke:function(n){o.remove(n,c)},write:function(n,e){var r=t.generate(a+n);return o.set(e,c,r),r},writeOnly:function(n,t){o.set(n,c,t)},read:function(n){var t=i.isElement(n)?o.get(n,c):null;return r.from(t)},find:function(n,t){return u.descendant(n,t)},generate:function(n){return t.generate(n)},attribute:e.constant(c)}}),i("1h",["30","14","w","z"],function(n,t,e,r){return{record:function(o){var i=t.hasKey(o,"uid")?o.uid:n.generate("memento");return{get:function(n){return n.getSystem().getByUid(i).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(i).fold(r.none,r.some)},asSpec:function(){return e.deepMerge(o,{uid:i})}}}}}),u("1j",setTimeout),u("1k",window),i("1l",["1f","14","g"],function(n,t,e){return{format:function(r,o){return n.config({channels:t.wrap(e.formatChanged(),{onReceive:function(n,t){t.command===r&&o(n,t.state)}})})},orientation:function(r){return n.config({channels:t.wrap(e.orientationChanged(),{onReceive:r})})},receive:function(n,t){return{key:n,value:{onReceive:t}}}}}),i("i",["6"],function(n){var t="tinymce-mobile";return{resolve:function(n){return t+"-"+n},prefix:n.constant(t)}}),i("31",["3d","2g","4b","6"],function(n,t,e,r){return{events:function(){return n.derive([n.abort(t.selectstart(),r.constant(!0))])},exhibit:function(){return e.nu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}}),i("1m",["q","31"],function(n,t){return n.create({fields:[],name:"unselecting",active:t})}),i("4w",["8"],function(n){return{focus:function(t,e){e.ignore()||(n.focus(t.element()),e.onFocus()(t))},blur:function(t,e){e.ignore()||n.blur(t.element())},isFocused:function(t){return n.hasFocus(t.element())}}}),i("4v",["3d","t","4w","4b"],function(n,t,e,r){return{exhibit:function(n,t){return t.ignore()?r.nu({}):r.nu({attributes:{tabindex:"-1"}})},events:function(r){return n.derive([n.run(t.focus(),function(n,t){e.focus(n,r),t.stop()})])}}}),i("4x",["4q","29"],function(n,t){return[n.onHandler("onFocus"),t.defaulted("ignore",!1)]}),i("32",["q","4v","4w","4x"],function(n,t,e,r){return n.create({fields:r,name:"focusing",active:t,apis:e})}),i("8b",["6"],function(n){return{BACKSPACE:n.constant([8]),TAB:n.constant([9]),ENTER:n.constant([13]),SHIFT:n.constant([16]),CTRL:n.constant([17]),ALT:n.constant([18]),CAPSLOCK:n.constant([20]),ESCAPE:n.constant([27]),SPACE:n.constant([32]),PAGEUP:n.constant([33]),PAGEDOWN:n.constant([34]),END:n.constant([35]),HOME:n.constant([36]),LEFT:n.constant([37]),UP:n.constant([38]),RIGHT:n.constant([39]),DOWN:n.constant([40]),INSERT:n.constant([45]),DEL:n.constant([46]),META:n.constant([91,93,224]),F10:n.constant([121])}}),i("94",[],function(){return{cycleBy:function(n,t,e,r){var o=n+t;return o>r?e:o<e?r:o},cap:function(n,t,e){return n<=t?t:n>=e?e:n}}}),i("7o",["y","12","10"],function(n,t,e){var r=function(n){return o(t.body(),n)},o=function(t,r){var i=[];return n.each(e.children(t),function(n){r(n)&&(i=i.concat([n])),i=i.concat(o(n,r))}),i};return{all:r,ancestors:function(t,r,o){return n.filter(e.parents(t,o),r)},siblings:function(t,r){return n.filter(e.siblings(t),r)},children:function(t,r){return n.filter(e.children(t),r)},descendants:o}}),i("5l",["7o","2r"],function(n,t){return{all:function(n){return t.all(n)},ancestors:function(e,r,o){return n.ancestors(e,function(n){return t.is(n,r)},o)},siblings:function(e,r){return n.siblings(e,function(n){return t.is(n,r)})},children:function(e,r){return n.children(e,function(n){return t.is(n,r)})},descendants:function(n,e){return t.all(e,n)}}}),i("7m",["94","y","z","48","2f","5l","4u","v"],function(n,t,e,r,o,i,u,a){var c=function(n,e){var r=i.descendants(n.element(),"."+e.highlightClass());t.each(r,function(t){o.remove(t,e.highlightClass()),n.getSystem().getByDom(t).each(function(t){e.onDehighlight()(n,t)})})},s=function(n,t,e,r){var i=g(n,t,e,r);o.remove(r.element(),t.highlightClass()),i&&t.onDehighlight()(n,r)},f=function(n,t,e,r){var i=g(n,t,e,r);c(n,t,e),o.add(r.element(),t.highlightClass()),i||t.onHighlight()(n,r)},l=function(n,t,e){v(n,t,e).each(function(r){f(n,t,e,r)})},d=function(n,t,e){h(n,t,e).each(function(r){f(n,t,e,r)})},m=function(n,t,e,r){p(n,t,e,r).fold(function(n){throw new a(n)},function(r){f(n,t,e,r)})},g=function(n,t,e,r){return o.has(r.element(),t.highlightClass())},p=function(n,t,o,u){var a=i.descendants(n.element(),"."+t.itemClass());return e.from(a[u]).fold(function(){return r.error("No element found with index "+u)},n.getSystem().getByDom)},v=function(n,t){return u.descendant(n.element(),"."+t.itemClass()).bind(n.getSystem().getByDom)},h=function(n,t){var r=i.descendants(n.element(),"."+t.itemClass());return(r.length>0?e.some(r[r.length-1]):e.none()).bind(n.getSystem().getByDom)},y=function(e,r,u,a){var c=i.descendants(e.element(),"."+r.itemClass());return t.findIndex(c,function(n){return o.has(n,r.highlightClass())}).bind(function(t){var r=n.cycleBy(t,a,0,c.length-1);return e.getSystem().getByDom(c[r])})};return{dehighlightAll:c,dehighlight:s,highlight:f,highlightFirst:l,highlightLast:d,highlightAt:m,isHighlighted:g,getHighlighted:function(n,t){return u.descendant(n.element(),"."+t.highlightClass()).bind(n.getSystem().getByDom)},getFirst:v,getLast:h,getPrevious:function(n,t,e){return y(n,t,e,-1)},getNext:function(n,t,e){return y(n,t,e,1)}}}),
i("7n",["4q","29"],function(n,t){return[t.strict("highlightClass"),t.strict("itemClass"),n.onHandler("onHighlight"),n.onHandler("onDehighlight")]}),i("5j",["q","7m","7n","u"],function(n,t,e){return n.create({fields:e,name:"highlighting",apis:t})}),i("97",["5j","6","8"],function(n,t,e){return{dom:function(){return{get:function(n){return e.search(n.element())},set:function(n,t){n.getSystem().triggerFocus(t,n.element())}}},highlights:function(){return{get:function(t){return n.getHighlighted(t).map(function(n){return n.element()})},set:function(e,r){e.getSystem().getByDom(r).fold(t.noop,function(t){n.highlight(e,t)})}}}}}),i("8t",["y","6"],function(n,t){var e=function(n){return!0===n.raw().shiftKey};return{inSet:function(t){return function(e){return n.contains(t,e.raw().which)}},and:function(t){return function(e){return n.forall(t,function(n){return n(e)})}},is:function(n){return function(t){return t.raw().which===n}},isShift:e,isNotShift:t.not(e)}}),i("8u",["8t","y"],function(n,t){return{basic:function(t,e){return{matches:n.is(t),classification:e}},rule:function(n,t){return{matches:n,classification:t}},choose:function(n,e){return t.find(n,function(n){return n.matches(e)}).map(function(n){return n.classification})}}}),i("8r",["3d","2g","t","97","4q","8u","29","w"],function(n,t,e,r,o,i,u,a){return{typical:function(c,s,f,l,d,m){var g=function(n,t,e,r){var o=f(n,t,e,r);return i.choose(o,t.event()).bind(function(o){return o(n,t,e,r)})},p={schema:function(){return c.concat([u.defaulted("focusManager",r.dom()),o.output("handler",p),o.output("state",s)])},processKey:g,toEvents:function(r,o){var i=l(r,o),u=n.derive(m.map(function(t){return n.run(e.focus(),function(n,e){t(n,r,o,e),e.stop()})}).toArray().concat([n.run(t.keydown(),function(n,t){g(n,t,r,o).each(function(){t.stop()})})]));return a.deepMerge(i,u)},toApis:d};return p}}}),i("8s",["y","1w"],function(n){return{cyclePrev:function(t,e,r){var o=n.reverse(t.slice(0,e)),i=n.reverse(t.slice(e+1));return n.find(o.concat(i),r)},cycleNext:function(t,e,r){var o=t.slice(0,e),i=t.slice(e+1);return n.find(i.concat(o),r)},tryPrev:function(t,e,r){var o=n.reverse(t.slice(0,e));return n.find(o,r)},tryNext:function(t,e,r){var o=t.slice(e+1);return n.find(o,r)}}}),i("57",[],function(){return{isSupported:function(n){return void 0!==n.style}}}),i("39",["1i","y","x","z","4i","12","a","b","57","37","v","16","1k"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(t,e,r){if(!n.isString(r))throw l.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new f("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(e,r)},g=function(n,t){c.isSupported(n)&&n.style.removeProperty(t)},p=function(n,t,e){var r=n.dom();m(r,t,e)},v=function(n,t){var e=n.dom(),r=d.getComputedStyle(e).getPropertyValue(t),o=""!==r||i.inBody(n)?r:h(e,t);return null===o?void 0:o},h=function(n,t){return c.isSupported(n)?n.style.getPropertyValue(t):""},y=function(n,t){var e=n.dom(),o=h(e,t);return r.from(o).filter(function(n){return n.length>0})},b=function(n,t,e){y(n,e).each(function(n){y(t,e).isNone()&&p(t,e,n)})};return{copy:function(n,t){var e=n.dom(),r=t.dom();c.isSupported(e)&&c.isSupported(r)&&(r.style.cssText=e.style.cssText)},set:p,preserve:function(n,t){var e=o.get(n,"style"),r=t(n);return(void 0===e?o.remove:o.set)(n,"style",e),r},setAll:function(n,t){var r=n.dom();e.each(t,function(n,t){m(r,t,n)})},setOptions:function(n,t){var r=n.dom();e.each(t,function(n,t){n.fold(function(){g(r,t)},function(n){m(r,t,n)})})},remove:function(n,t){var e=n.dom();g(e,t),o.has(n,"style")&&""===s.trim(o.get(n,"style"))&&o.remove(n,"style")},get:v,getRaw:y,getAllRaw:function(n){var t={},e=n.dom();if(c.isSupported(e))for(var r=0;r<e.style.length;r++){var o=e.style.item(r);t[o]=e.style[o]}return t},isValidValue:function(n,t,e){var r=u.fromTag(n);p(r,t,e);return y(r,t).isSome()},reflow:function(n){return n.dom().offsetWidth},transfer:function(n,e,r){a.isElement(n)&&a.isElement(e)&&t.each(r,function(t){b(n,e,t)})}}}),i("78",["1i","y","39","57"],function(n,t,e,r){return function(o,i){var u=function(n){var t=i(n);if(t<=0||null===t){var r=e.get(n,o);return parseFloat(r)||0}return t},a=function(n,r){return t.foldl(r,function(t,r){var o=e.get(n,r),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i},0)};return{set:function(t,e){if(!n.isNumber(e)&&!e.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+e;var i=t.dom();r.isSupported(i)&&(i.style[o]=e+"px")},get:u,getOuter:u,aggregate:a,max:function(n,t,e){var r=a(n,e);return t>r?t-r:0}}}}),i("8a",["12","39","78"],function(n,t,e){var r=e("height",function(t){return n.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight});return{set:function(n,t){r.set(n,t)},get:function(n){return r.get(n)},getOuter:function(n){return r.getOuter(n)},setMax:function(n,e){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=r.max(n,e,o);t.set(n,"max-height",i+"px")}}}),i("6u",["8b","28","4q","8r","13","8s","8t","8u","29","y","6","z","1a","8","5l","4u","8a"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v){var h=[c.defaulted("selector",'[data-alloy-tabstop="true"]'),c.option("onEscape"),c.option("onEnter"),c.defaulted("firstTabstop",0),c.defaulted("useTabstopAt",f.constant(!0)),c.option("visibilitySelector")],y=function(n,t){var e=g.descendants(n.element(),t.selector()),r=s.filter(e,function(n){return b(t,n)});l.from(r[t.firstTabstop()]).each(function(t){var e=n.element();n.getSystem().triggerFocus(t,e)})},b=function(n,t){var e=n.visibilitySelector().bind(function(n){return p.closest(t,n)}).getOr(t);return v.get(e)>0},w=function(n,t){return m.search(n.element()).bind(function(n){return p.closest(n,t.selector())})},O=function(n,t,e,r,o){return o(t,e,function(n){return b(r,n)&&r.useTabstopAt(n)}).fold(function(){return l.some(!0)},function(t){var e=n.getSystem(),r=n.element();return e.triggerFocus(t,r),l.some(!0)})},x=function(n,t,e,r){var o=g.descendants(n.element(),e.selector());return w(n,e).bind(function(t){return s.findIndex(o,f.curry(d.eq,t)).bind(function(t){return O(n,o,t,e,r)})})},S=function(n,t,e){return x(n,t,e,i.cyclePrev)},T=function(n,t,e){return x(n,t,e,i.cycleNext)},k=function(n,t,e){return e.onEnter().bind(function(e){return e(n,t)})},C=function(n,t,e){return e.onEscape().bind(function(e){return e(n,t)})},E=f.constant([a.rule(u.and([u.isShift,u.inSet(n.TAB())]),S),a.rule(u.inSet(n.TAB()),T),a.rule(u.inSet(n.ESCAPE()),C),a.rule(u.and([u.isNotShift,u.inSet(n.ENTER())]),k)]),D=f.constant({}),A=f.constant({});return r.typical(h,t.init,E,D,A,l.some(y))}),i("8v",["4i","b"],function(n,t){return{inside:function(e){return"input"===t.name(e)&&"radio"!==n.get(e,"type")||"textarea"===t.name(e)}}}),i("8w",["8v","8b","2","t","8t","z"],function(n,t,e,r,o,i){var u=function(n,t,o){return e.dispatch(n,o,r.execute()),i.some(!0)};return{defaultExecute:function(e,r,a){return n.inside(a)&&o.inSet(t.SPACE())(r.event())?i.none():u(e,r,a)}}}),i("6v",["8v","8b","28","8r","8w","13","8t","8u","29","6","z"],function(n,t,e,r,o,i,u,a,c,s,f){var l=[c.defaulted("execute",o.defaultExecute),c.defaulted("useSpace",!1),c.defaulted("useEnter",!0),c.defaulted("useDown",!1)],d=function(n,t,e){return e.execute()(n,t,n.element())},m=function(e,r,o){var i=o.useSpace()&&!n.inside(e.element())?t.SPACE():[],c=o.useEnter()?t.ENTER():[],s=o.useDown()?t.DOWN():[],f=i.concat(c).concat(s);return[a.rule(u.inSet(f),d)]},g=s.constant({}),p=s.constant({});return r.typical(l,e.init,m,g,p,f.none())}),i("4z",["4g","5","6","z"],function(n,t,e,r){return{flatgrid:function(){var o=t(r.none()),i=function(n,t){o.set(r.some({numRows:e.constant(n),numColumns:e.constant(t)}))},u=function(){return o.get().map(function(n){return n.numRows()})},a=function(){return o.get().map(function(n){return n.numColumns()})};return n({readState:e.constant({}),setGridSize:i,getNumRows:u,getNumColumns:a})},init:function(n){return n.state()(n)}}}),i("9y",["39"],function(n){var t=function(n,t){return function(r){return"rtl"===e(r)?t:n}},e=function(t){return"rtl"===n.get(t,"direction")?"rtl":"ltr"};return{onDirection:t,getDirection:e}}),i("8x",["9y"],function(n){var t=function(n){return function(t,e,o,i){var u=n(t.element());return r(u,t,e,o,i)}},e=function(n){return function(t,e,o,i){return r(n,t,e,o,i)}},r=function(n,t,e,r,o){return r.focusManager().get(t).bind(function(e){return n(t.element(),e,r,o)}).map(function(n){return r.focusManager().set(t,n),!0})};return{east:function(e,r){var o=n.onDirection(r,e);return t(o)},west:function(e,r){var o=n.onDirection(e,r);return t(o)},north:e,south:e,move:e}}),i("9z",["y","2o"],function(n,t){var e=t.immutableBag(["index","candidates"],[]);return{locate:function(t,r){return n.findIndex(t,r).map(function(n){return e({index:n,candidates:t})})}}}),i("a0",["6","4h","39"],function(n,t,e){var r=function(r,o,i,u){var a=e.get(r,o);void 0===a&&(a="");var c=a===i?u:i,s=n.curry(e.set,r,o,a),f=n.curry(e.set,r,o,c);return t(s,f,!1)},o=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0};return{toggler:function(n){return r(n,"visibility","hidden","visible")},displayToggler:function(n,t){return r(n,"display","none",t)},isVisible:function(n){var t=n.dom();return!o(t)}}}),i("8y",["9z","y","6","1a","5l","a0"],function(n,t,e,r,o,i){var u=function(n,t,e){var r=i.isVisible;return a(n,t,e,r)},a=function(u,a,c){var s=e.curry(r.eq,a),f=o.descendants(u,c),l=t.filter(f,i.isVisible);return n.locate(l,s)};return{locateVisible:u,locateIn:a,findIndex:function(n,e){return t.findIndex(n,function(n){return r.eq(e,n)})}}}),i("8z",["94","6","z","1w"],function(n,t,e,r){var o=function(n,t,o,i){return i(r.floor(t/o),t%o).bind(function(t){var r=t.row()*o+t.column();return r>=0&&r<n.length?e.some(n[r]):e.none()})},i=function(r,i,u,a,c){return o(r,i,a,function(o,i){var s=o===u-1?r.length-o*a:a,f=n.cycleBy(i,c,0,s-1);return e.some({row:t.constant(o),column:t.constant(f)})})},u=function(r,i,u,a,c){return o(r,i,a,function(o,i){var s=n.cycleBy(o,c,0,u-1),f=s===u-1?r.length-s*a:a,l=n.cap(i,0,f-1);return e.some({row:t.constant(s),column:t.constant(l)})})};return{cycleDown:function(n,t,e,r){return u(n,t,e,r,1)},cycleUp:function(n,t,e,r){return u(n,t,e,r,-1)},cycleLeft:function(n,t,e,r){return i(n,t,e,r,-1)},cycleRight:function(n,t,e,r){return i(n,t,e,r,1)}}}),i("6w",["8b","4z","4q","8r","8w","8x","8y","8t","8u","8z","29","5","6","z","8","4u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p){var v=[f.strict("selector"),f.defaulted("execute",o.defaultExecute),e.onKeyboardHandler("onEscape"),f.defaulted("captureTab",!1),e.initSize()],h=function(n,t){p.descendant(n.element(),t.selector()).each(function(t){n.getSystem().triggerFocus(t,n.element())})},y=function(n,t,e){return g.search(n.element(),e.selector()).bind(function(r){return e.execute()(n,t,r)})},b=function(n){return function(t,e,r,o){return u.locateVisible(t,e,r.selector()).bind(function(t){return n(t.candidates(),t.index(),o.getNumRows().getOr(r.initSize().numRows()),o.getNumColumns().getOr(r.initSize().numColumns()))})}},w=function(n,t,e){return e.captureTab()?m.some(!0):m.none()},O=function(n,t,e){return e.onEscape()(n,t)},x=b(s.cycleLeft),S=b(s.cycleRight),T=b(s.cycleUp),k=b(s.cycleDown),C=d.constant([c.rule(a.inSet(n.LEFT()),i.west(x,S)),c.rule(a.inSet(n.RIGHT()),i.east(x,S)),c.rule(a.inSet(n.UP()),i.north(T)),c.rule(a.inSet(n.DOWN()),i.south(k)),c.rule(a.and([a.isShift,a.inSet(n.TAB())]),w),c.rule(a.and([a.isNotShift,a.inSet(n.TAB())]),w),c.rule(a.inSet(n.ESCAPE()),O),c.rule(a.inSet(n.SPACE().concat(n.ENTER())),y)]),E=d.constant({}),D={};return r.typical(v,t.flatgrid,C,E,D,m.some(h))}),i("90",["94","8y","6","z"],function(n,t,e,r){return{horizontal:function(o,i,u,a){return t.locateVisible(o,u,i,e.constant(!0)).bind(function(t){var e=t.index(),o=t.candidates(),i=n.cycleBy(e,a,0,o.length-1);return r.from(o[i])})}}}),i("6x",["8v","8b","28","8r","8w","8x","90","8t","8u","29","6","z","8","4u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var g=[s.strict("selector"),s.defaulted("getInitial",l.none),s.defaulted("execute",o.defaultExecute),s.defaulted("executeOnMove",!1)],p=function(n,t,e){return d.search(n.element()).bind(function(r){return e.execute()(n,t,r)})},v=function(n,t){t.getInitial()(n).or(m.descendant(n.element(),t.selector())).each(function(t){n.getSystem().triggerFocus(t,n.element())})},h=function(n,t,e){return u.horizontal(n,e.selector(),t,-1)},y=function(n,t,e){return u.horizontal(n,e.selector(),t,1)},b=function(n){return function(t,e,r){return n(t,e,r).bind(function(){return r.executeOnMove()?p(t,e,r):l.some(!0)})}},w=function(){return[c.rule(a.inSet(t.LEFT().concat(t.UP())),b(i.west(h,y))),c.rule(a.inSet(t.RIGHT().concat(t.DOWN())),b(i.east(h,y))),c.rule(a.inSet(t.ENTER()),p),c.rule(a.inSet(t.SPACE()),p)]},O=f.constant({}),x=f.constant({});return r.typical(g,e.init,w,O,x,l.some(v))}),i("91",["94","z","2o","1w"],function(n,t,e){var r=e.immutableBag(["rowIndex","columnIndex","cell"],[]),o=function(n,e,o){return t.from(n[e]).bind(function(n){return t.from(n[o]).map(function(n){return r({rowIndex:e,columnIndex:o,cell:n})})})},i=function(t,e,r,i){var u=t[e].length,a=n.cycleBy(r,i,0,u-1);return o(t,e,a)},u=function(t,e,r,i){var u=n.cycleBy(r,i,0,t.length-1),a=t[u].length,c=n.cap(e,0,a-1);return o(t,u,c)},a=function(t,e,r,i){var u=t[e].length,a=n.cap(r+i,0,u-1);return o(t,e,a)},c=function(t,e,r,i){var u=n.cap(r+i,0,t.length-1),a=t[u].length,c=n.cap(e,0,a-1);return o(t,u,c)};return{cycleRight:function(n,t,e){return i(n,t,e,1)},cycleLeft:function(n,t,e){return i(n,t,e,-1)},cycleUp:function(n,t,e){return u(n,e,t,-1)},cycleDown:function(n,t,e){return u(n,e,t,1)},moveLeft:function(n,t,e){return a(n,t,e,-1)},moveRight:function(n,t,e){return a(n,t,e,1)},moveUp:function(n,t,e){return c(n,e,t,-1)},moveDown:function(n,t,e){return c(n,e,t,1)}}}),i("6y",["8b","28","8r","8w","8x","8y","8t","8u","91","29","y","6","z","8","5l","4u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p){var v=[s.strictObjOf("selectors",[s.strict("row"),s.strict("cell")]),s.defaulted("cycles",!0),s.defaulted("previousSelector",d.none),s.defaulted("execute",r.defaultExecute)],h=function(n,t){t.previousSelector()(n).orThunk(function(){var e=t.selectors();return p.descendant(n.element(),e.cell())}).each(function(t){n.getSystem().triggerFocus(t,n.element())})},y=function(n,t,e){return m.search(n.element()).bind(function(r){return e.execute()(n,t,r)})},b=function(n,t){return f.map(n,function(n){return g.descendants(n,t.selectors().cell())})},w=function(n,t){return function(e,r,o){var u=o.cycles()?n:t;return p.closest(r,o.selectors().row()).bind(function(n){var t=g.descendants(n,o.selectors().cell());return i.findIndex(t,r).bind(function(t){var r=g.descendants(e,o.selectors().row());return i.findIndex(r,n).bind(function(n){var e=b(r,o);return u(e,n,t).map(function(n){return n.cell()})})})})}},O=w(c.cycleLeft,c.moveLeft),x=w(c.cycleRight,c.moveRight),S=w(c.cycleUp,c.moveUp),T=w(c.cycleDown,c.moveDown),k=l.constant([a.rule(u.inSet(n.LEFT()),o.west(O,x)),a.rule(u.inSet(n.RIGHT()),o.east(O,x)),a.rule(u.inSet(n.UP()),o.north(S)),a.rule(u.inSet(n.DOWN()),o.south(T)),a.rule(u.inSet(n.SPACE().concat(n.ENTER())),y)]),C=l.constant({}),E=l.constant({});return e.typical(v,t.init,k,C,E,d.some(h))}),i("6z",["8b","28","8r","8w","8x","90","8t","8u","29","6","z","8","4u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=[c.strict("selector"),c.defaulted("execute",r.defaultExecute),c.defaulted("moveOnTab",!1)],g=function(n,t,e){return e.focusManager().get(n).bind(function(r){return e.execute()(n,t,r)})},p=function(n,t){d.descendant(n.element(),t.selector()).each(function(e){t.focusManager().set(n,e)})},v=function(n,t,e){return i.horizontal(n,e.selector(),t,-1)},h=function(n,t,e){return i.horizontal(n,e.selector(),t,1)},y=function(n,t,e){return e.moveOnTab()?o.move(v)(n,t,e):f.none()},b=function(n,t,e){return e.moveOnTab()?o.move(h)(n,t,e):f.none()},w=s.constant([a.rule(u.inSet(n.UP()),o.move(v)),a.rule(u.inSet(n.DOWN()),o.move(h)),a.rule(u.and([u.isShift,u.inSet(n.TAB())]),y),a.rule(u.and([u.isNotShift,u.inSet(n.TAB())]),b),a.rule(u.inSet(n.ENTER()),g),a.rule(u.inSet(n.SPACE()),g)]),O=s.constant({}),x=s.constant({});return e.typical(m,t.init,w,O,x,f.some(p))}),i("70",["8b","28","4q","8r","8t","8u","29","6","z"],function(n,t,e,r,o,i,u,a,c){var s=[e.onKeyboardHandler("onSpace"),e.onKeyboardHandler("onEnter"),e.onKeyboardHandler("onShiftEnter"),e.onKeyboardHandler("onLeft"),e.onKeyboardHandler("onRight"),e.onKeyboardHandler("onTab"),e.onKeyboardHandler("onShiftTab"),e.onKeyboardHandler("onUp"),e.onKeyboardHandler("onDown"),e.onKeyboardHandler("onEscape"),u.option("focusIn")],f=function(t,e,r){return[i.rule(o.inSet(n.SPACE()),r.onSpace()),i.rule(o.and([o.isNotShift,o.inSet(n.ENTER())]),r.onEnter()),i.rule(o.and([o.isShift,o.inSet(n.ENTER())]),r.onShiftEnter()),i.rule(o.and([o.isShift,o.inSet(n.TAB())]),r.onShiftTab()),i.rule(o.and([o.isNotShift,o.inSet(n.TAB())]),r.onTab()),i.rule(o.inSet(n.UP()),r.onUp()),i.rule(o.inSet(n.DOWN()),r.onDown()),i.rule(o.inSet(n.LEFT()),r.onLeft()),i.rule(o.inSet(n.RIGHT()),r.onRight()),i.rule(o.inSet(n.SPACE()),r.onSpace()),i.rule(o.inSet(n.ESCAPE()),r.onEscape())]},l=function(n,t){return t.focusIn().bind(function(e){return e(n,t)})},d=a.constant({}),m=a.constant({});return r.typical(s,t.init,f,d,m,c.some(l))}),i("4y",["6u","6v","6w","6x","6y","6z","70"],function(n,t,e,r,o,i,u){return{cyclic:n.schema(),flow:r.schema(),flatgrid:e.schema(),matrix:o.schema(),execution:t.schema(),menu:i.schema(),special:u.schema()}}),i("33",["q","4y","4z","14","16"],function(n,t,e,r,o){return n.createModes({branchKey:"mode",branches:t,name:"keying",active:{events:function(n,t){return n.handler().toEvents(n,t)}},apis:{focusIn:function(n){n.getSystem().triggerFocus(n.element(),n.element())},setGridSize:function(n,t,e,i,u){r.hasKey(e,"setGridSize")?e.setGridSize(i,u):o.error("Layout does not support setGridSize")}},state:e})}),i("50",["4a","14","y","6","3f","u"],function(n,t,e,r,o,i){var u=o.generate("alloy-premade"),a=o.generate("api"),c=function(n){return t.wrap(u,n)},s=function(n){return t.readOptFrom(n,u)},f=function(t){return n.markAsSketchApi(function(n){var e=i.prototype.slice.call(arguments,0),r=n.config(a);return t.apply(void 0,[r].concat(e))},t)};return{apiConfig:r.constant(a),makeApi:f,premade:c,getPremade:s}}),i("53",["4c","29","2e","6k","6","3f","z"],function(n,t,e,r,o,i,u){var a=r.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),c=t.defaulted("factory",{sketch:o.identity}),s=t.defaulted("schema",[]),f=t.strict("name"),l=t.field("pname","pname",n.defaultedThunk(function(n){return"<alloy."+i.generate(n.name)+">"}),e.anyValue()),d=t.defaulted("defaults",o.constant({})),m=t.defaulted("overrides",o.constant({})),g=e.objOf([c,s,f,l,d,m]),p=e.objOf([c,s,f,d,m]),v=e.objOf([c,s,f,l,d,m]),h=e.objOf([c,s,f,t.strict("unit"),l,d,m]),y=function(n){return n.fold(u.some,u.none,u.some,u.some)},b=function(n){var t=function(n){return n.name()};return n.fold(t,t,t,t)},w=function(n){return n.fold(o.identity,o.identity,o.identity,o.identity)},O=function(n,t){return function(r){var o=e.asStructOrDie("Converting part type",t,r);return n(o)}};return{required:O(a.required,g),external:O(a.external,p),optional:O(a.optional,v),group:O(a.group,h),asNamedPart:y,name:b,asCommon:w,original:o.constant("entirety")}}),i("72",["14","y","x","w","6n","6","6k","v"],function(n,t,e,r,o,i,u,a){var c="placeholder",s=u.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),f=function(n){return t.contains([c],n)},l=function(t,r,u,c){return t.exists(function(n){return n!==u.owner})?s.single(!0,i.constant(u)):n.readOptFrom(c,u.name).fold(function(){throw new a("Unknown placeholder component: "+u.name+"\nKnown: ["+e.keys(c)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+o.stringify(u,null,2))},function(n){return n.replace()})},d=function(n,t,e,r){return e.uiType===c?l(n,t,e,r):s.single(!1,i.constant(e))},m=function(e,o,i,u){return d(e,o,i,u).fold(function(a,c){var s=c(o,i.config,i.validated),f=n.readOptFrom(s,"components").getOr([]),l=t.bind(f,function(n){return m(e,o,n,u)});return[r.deepMerge(s,{components:l})]},function(n,t){return t(o,i.config,i.validated)})},g=function(n,e,r,o){return t.bind(r,function(t){return m(n,e,t,o)})},p=function(n,t){var e=!1,r=function(){return e},o=function(){if(!0===e)throw new a("Trying to use the same placeholder more than once: "+n);return e=!0,t},u=function(){return t.fold(function(n){return n},function(n){return n})};return{name:i.constant(n),required:u,used:r,replace:o}},v=function(n,t,r,i){var u=e.map(i,function(n,t){return p(t,n)}),c=g(n,t,r,u);return e.each(u,function(e){if(!1===e.used()&&e.required())throw new a("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+o.stringify(t.components(),null,2))}),c},h=function(n,t){return t.fold(function(t,e){return[e(n)]},function(t,e){return e(n)})};return{single:s.single,multiple:s.multiple,isSubstitute:f,placeholder:i.constant(c),substituteAll:g,substitutePlaces:v,singleReplace:h}}),i("71",["53","72","14","y","6","w"],function(n,t,e,r,o,i){var u=function(n,t,r,o){var u=r;return i.deepMerge(t.defaults()(n,r,o),r,{uid:n.partUids()[t.name()]},t.overrides()(n,r,o),{"debug.sketcher":e.wrap("part-"+t.name(),u)})};return{subs:function(e,a,c){var s={},f={};return r.each(c,function(e){e.fold(function(n){s[n.pname()]=t.single(!0,function(t,e,r){return n.factory().sketch(u(t,n,e,r))})},function(t){var e=a.parts()[t.name()]();f[t.name()]=o.constant(u(a,t,e[n.original()]()))},function(n){s[n.pname()]=t.single(!1,function(t,e,r){return n.factory().sketch(u(t,n,e,r))})},function(n){s[n.pname()]=t.multiple(!0,function(t){var e=t[n.name()]();return r.map(e,function(e){return n.factory().sketch(i.deepMerge(n.defaults()(t,e),e,n.overrides()(t,e)))})})})}),{internals:o.constant(s),externals:o.constant(f)}}}}),i("52",["4q","71","53","72","4c","29","14","2e","y","6","w","x","z"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(n,t){var r={};return c.each(t,function(t){e.asNamedPart(t).each(function(t){var e=g(n,t.pname());r[t.name()]=function(r){var o=a.asRawOrDie("Part: "+t.name()+" in "+n,a.objOf(t.schema()),r);return f.deepMerge(e,{config:r,validated:o})}})}),r},g=function(n,t){return{uiType:r.placeholder(),owner:n,name:t}},p=function(n){return c.map(n,e.name)},v=function(n,t,e){var r=t.partUids()[e];return n.getSystem().getByUid(r).toOption()},h=function(n,t){var e=p(t);return u.wrapAll(c.map(e,function(t){return{key:t,value:n+"-"+t}}))};return{generate:m,generateOne:function(n,t,e){return{uiType:r.placeholder(),owner:n,name:t,config:e,validated:{}}},schemas:function(t){return c.bind(t,function(t){return t.fold(d.none,d.some,d.none,d.none).map(function(t){return i.strictObjOf(t.name(),t.schema().concat([n.snapshot(e.original())]))}).toArray()})},names:p,substitutes:function(n,e,r){return t.subs(n,e,r)},components:function(n,t,e){return r.substitutePlaces(d.some(n),t,t.components(),e)},defaultUids:h,defaultUidsSchema:function(n){return i.field("partUids","partUids",o.mergeWithThunk(function(t){return h(t.uid,n)}),a.anyValue())},getAllParts:function(n,t){var e=n.getSystem();return l.map(t.partUids(),function(n){return s.constant(e.getByUid(n))})},getPart:v,getPartOrDie:function(n,t,e){return v(n,t,e).getOrDie("Could not find part: "+e)},getParts:function(n,t,e){var r={},o=t.partUids(),i=n.getSystem();return c.each(e,function(n){r[n]=i.getByUid(o[n])}),l.map(r,s.constant)},getPartsOrDie:function(n,t,e){var r={},o=t.partUids(),i=n.getSystem();return c.each(e,function(n){r[n]=i.getByUid(o[n]).getOrDie()}),l.map(r,s.constant)}}}),i("73",["4q","72","29","14","2e","y","6","w","x","6n","v"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(t,r,o){return(r.length>0?[e.strictObjOf("parts",r)]:[]).concat([e.strict("uid"),e.defaulted("dom",{}),e.defaulted("components",[]),n.snapshot("originalSpec"),e.defaulted("debug.sketcher",{})]).concat(o)};return{asRawOrDie:function(n,t,e,r){var i=l(n,r,e);return o.asRawOrDie(n+" [SpecSchema]",o.objOfOnly(i.concat(t)),e)},asStructOrDie:function(n,t,e,r,i){var u=l(n,r,i,e);return o.asStructOrDie(n+" [SpecSchema]",o.objOfOnly(u.concat(t)),e)},addBehaviours:function(n,t){return a.deepMerge(n,t)},getPartsSchema:function(o,u,a){var l=void 0!==a?a:"Unknown owner",d=function(){return[n.output("partUids",{})]},m=void 0!==u?u:d();if(0===o.length&&0===m.length)return d();return[e.strictObjOf("parts",i.flatten([i.map(o,e.strict),i.map(m,function(n){return e.defaulted(n,t.single(!1,function(){throw new f("The optional part: "+n+" was not specified in the config, but it was used in components")}))})])),e.state("partUids",function(n){if(!r.hasKey(n,"parts"))throw new f("Part uid definition for owner: "+l+' requires "parts"\nExpected parts: '+o.join(", ")+"\nSpec: "+s.stringify(n,null,2));return c.map(n.parts,function(t,e){return r.readOptFrom(t,"uid").getOrThunk(function(){return n.uid+"-"+e})})})]},extend:function(n,t,e){return n(a.deepMerge(t,e))}}}),i("51",["52","30","73","14","w"],function(n,t,e,r,o){var i=function(n,t,i,u){var c=a(u),s=e.asStructOrDie(n,t,c,[],[]);return o.deepMerge(i(s,c),{"debug.sketcher":r.wrap(n,u)})},u=function(t,i,u,c,s){var f=a(s),l=n.schemas(u),d=n.defaultUidsSchema(u),m=e.asStructOrDie(t,i,f,l,[d]),g=n.substitutes(t,m,u),p=n.components(t,m,g.internals());return o.deepMerge(c(m,p,f,g.externals()),{"debug.sketcher":r.wrap(t,s)})},a=function(n){return o.deepMerge({uid:t.generate("uid")},n)};return{supplyUid:a,single:i,composite:u}}),i("34",["50","51","4a","52","53","29","2e","6","w","x"],function(n,t,e,r,o,i,u,a,c,s){var f=u.objOfOnly([i.strict("name"),i.strict("factory"),i.strict("configFields"),i.defaulted("apis",{}),i.defaulted("extraApis",{})]),l=u.objOfOnly([i.strict("name"),i.strict("factory"),i.strict("configFields"),i.strict("partFields"),i.defaulted("apis",{}),i.defaulted("extraApis",{})]);return{single:function(r){var o=u.asRawOrDie("Sketcher for "+r.name,f,r),i=function(n){return t.single(o.name,o.configFields,o.factory,n)},l=s.map(o.apis,n.makeApi),d=s.map(o.extraApis,function(n,t){return e.markAsExtraApi(n,t)});return c.deepMerge({name:a.constant(o.name),partFields:a.constant([]),configFields:a.constant(o.configFields),sketch:i},l,d)},composite:function(o){var i=u.asRawOrDie("Sketcher for "+o.name,l,o),f=function(n){return t.composite(i.name,i.configFields,i.partFields,i.factory,n)},d=r.generate(i.name,i.partFields),m=s.map(i.apis,n.makeApi),g=s.map(i.extraApis,function(n,t){return e.markAsExtraApi(n,t)});return c.deepMerge({name:a.constant(i.name),partFields:a.constant(i.partFields),configFields:a.constant(i.configFields),sketch:f,parts:a.constant(d)},m,g)}}}),i("35",["3d","2","2g","t","y","7"],function(n,t,e,r,o,i){return{events:function(u){var a=function(t){return n.run(r.execute(),function(n,e){t(n),e.stop()})},c=function(n,e){e.stop(),t.emitExecute(n)},s=function(n,t){t.cut()},f=i.detect().deviceType.isTouch()?[n.run(r.tap(),c)]:[n.run(e.click(),c),n.run(e.mousedown(),s)];return n.derive(o.flatten([u.map(a).toArray(),f]))}}}),i("1n",["q","32","33","34","35","29","w"],function(n,t,e,r,o,i,u){var a=function(r){var i=o.events(r.action());return{uid:r.uid(),dom:r.dom(),components:r.components(),events:i,behaviours:u.deepMerge(n.derive([t.config({}),e.config({mode:"execution",useSpace:!0,useEnter:!0})]),r.buttonBehaviours()),domModification:{attributes:{type:"button",role:r.role().getOr("button")}},eventOrder:r.eventOrder()}};return r.single({name:"Button",factory:a,configFields:[i.defaulted("uid",void 0),i.strict("dom"),i.defaulted("components",[]),i.defaulted("buttonBehaviours",{}),i.option("action"),i.option("role"),i.defaulted("eventOrder",{})]})}),i("36",["14","y","w","a","b","4n","10","u"],function(n,t,e,r,o,i,u,a){var c=function(r){var o=void 0!==r.dom().attributes?r.dom().attributes:[];return t.foldl(o,function(t,r){return"class"===r.name?t:e.deepMerge(t,n.wrap(r.name,r.value))},{})},s=function(n){return a.prototype.slice.call(n.dom().classList,0)},f=function(n){var t=r.fromHtml(n),a=u.children(t),f=c(t),l=s(t),d=0===a.length?{}:{innerHtml:i.get(t)};return e.deepMerge({tag:o.name(t),classes:l,attributes:f},d)};return{fromHtml:f,sketch:function(n,t,r){return n.sketch(e.deepMerge({dom:f(t)},r))}}}),i("1o",["36","37","i"],function(n,t,e){var r=function(r){var o=t.supplant(r,{prefix:e.prefix()});return n.fromHtml(o)};return{dom:r,spec:function(n){return{dom:r(n)}}}}),i("l",["q","1g","1m","1n","w","1l","i","1o"],function(n,t,e,r,o,i,u,a){var c=function(n,t){return d(t,function(){n.execCommand(t)},{})},s=function(e){return n.derive([t.config({toggleClass:u.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),i.format(e,function(n,e){(e?t.on:t.off)(n)})])},f=function(n,t){var e=s(t);return d(t,function(){n.execCommand(t)},e)},l=function(n,t,e,r){var o=s(e);return d(t,r,o)},d=function(t,i,u){return r.sketch({dom:a.dom('<span class="${prefix}-toolbar-button ${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:i,buttonBehaviours:o.deepMerge(n.derive([e.config({})]),u)})};return{forToolbar:d,forToolbarCommand:c,forToolbarStateAction:l,forToolbarStateCommand:f}}),i("92",["1w"],function(n){var t=function(t,e,r){return n.max(e,n.min(r,t))},e=function(e,r,o,i,u,a){return a.fold(function(){var e=r-o,a=n.round(e/u)*u;return t(o+a,o-1,i+1)},function(t){var e=(r-t)%u,o=n.round(e/u),a=n.floor((r-t)/u),c=n.floor((i-t)/u),s=t+n.min(c,a+o)*u;return n.max(t,s)})};return{reduceBy:function(t,e,r,o){return t<e?t:t>r?r:t===e?e-1:n.max(e,t-o)},increaseBy:function(t,e,r,o){return t>r?t:t<e?e:t===r?r+1:n.min(r,t+o)},findValueOfX:function(r,o,i,u,a,c,s){var f=i-o;if(u<r.left)return o-1;if(u>r.right)return i+1;var l=n.min(r.right,n.max(u,r.left))-r.left,d=t(l/r.width*f+o,o-1,i+1),m=n.round(d);return c&&d>=o&&d<=i?e(r,d,o,i,a,s):m}}}),i("74",["2","92","6","z","7","1w"],function(n,t,e,r,o){var i="slider.change.value",u=o.detect().deviceType.isTouch(),a=function(n){var t=n.event().raw();return u&&void 0!==t.touches&&1===t.touches.length?r.some(t.touches[0]):u&&void 0!==t.touches?r.none():u||void 0===t.clientX?r.none():r.some(t)},c=function(n){return a(n).map(function(n){return n.clientX})},s=function(t,e){n.emitWith(t,i,{value:e})},f=function(n,e,r,o){var i=t.findValueOfX(e,r.min(),r.max(),o,r.stepSize(),r.snapToGrid(),r.snapStart());s(n,i)};return{setXFromEvent:function(n,t,e,r){return c(r).map(function(r){return f(n,e,t,r),r})},setToLedge:function(n,t){s(n,t.min()-1,r.none())},setToRedge:function(n,t){s(n,t.max()+1,r.none())},moveLeftFromRedge:function(n,t){s(n,t.max(),r.none())},moveRightFromLedge:function(n,t){s(n,t.min(),r.none())},moveLeft:function(n,e){var o=t.reduceBy(e.value().get(),e.min(),e.max(),e.stepSize());s(n,o,r.none())},moveRight:function(n,e){var o=t.increaseBy(e.value().get(),e.min(),e.max(),e.stepSize());s(n,o,r.none())},changeEvent:e.constant(i)}}),i("54",["q","32","33","3d","2g","53","74","29","5","6","z","7"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=l.detect().deviceType.isTouch(),m=function(n,t){return i.optional({name:n+"-edge",overrides:function(n){var e=r.derive([r.runActionExtra(o.touchstart(),t,[n])]),i=r.derive([r.runActionExtra(o.mousedown(),t,[n]),r.runActionExtra(o.mousemove(),function(n,e){e.mouseIsDown().get()&&t(n,e)},[n])]);return{events:d?e:i}}})};return[m("left",u.setToLedge),m("right",u.setToRedge),i.required({name:"thumb",defaults:s.constant({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:r.derive([r.redirectToPart(o.touchstart(),n,"spectrum"),r.redirectToPart(o.touchmove(),n,"spectrum"),r.redirectToPart(o.touchend(),n,"spectrum")])}}}),i.required({schema:[a.state("mouseIsDown",function(){return c(!1)})],name:"spectrum",overrides:function(i){var a=function(n,t){var e=n.element().dom().getBoundingClientRect();u.setXFromEvent(n,i,e,t)},c=r.derive([r.run(o.touchstart(),a),r.run(o.touchmove(),a)]),s=r.derive([r.run(o.mousedown(),a),r.run(o.mousemove(),function(n,t){i.mouseIsDown().get()&&a(n,t)})]);return{behaviours:n.derive(d?[]:[e.config({mode:"special",onLeft:function(n){return u.moveLeft(n,i),f.some(!0)},onRight:function(n){return u.moveRight(n,i),f.some(!0)}}),t.config({})]),events:d?c:s}}})]}),i("55",["29","5","6","7"],function(n,t,e,r){var o=r.detect().deviceType.isTouch();return[n.strict("min"),n.strict("max"),n.defaulted("stepSize",1),n.defaulted("onChange",e.noop),n.defaulted("onInit",e.noop),n.defaulted("onDragStart",e.noop),n.defaulted("onDragEnd",e.noop),n.defaulted("snapToGrid",!1),n.option("snapStart"),n.strict("getInitialValue"),n.defaulted("sliderBehaviours",{}),n.state("value",function(n){return t(n.min)})].concat(o?[]:[n.state("mouseIsDown",function(){return t(!1)})])}),i("5b",[],function(){return{onLoad:function(n,t,e){
t.store().manager().onLoad(n,t,e)},onUnload:function(n,t,e){t.store().manager().onUnload(n,t,e)},setValue:function(n,t,e,r){t.store().manager().setValue(n,t,e,r)},getValue:function(n,t,e){return t.store().manager().getValue(n,t,e)}}}),i("5a",["3d","27","5b"],function(n,t,e){return{events:function(r,o){var i=r.resetOnDom()?[n.runOnAttached(function(n){e.onLoad(n,r,o)}),n.runOnDetached(function(n){e.onUnload(n,r,o)})]:[t.loadEvent(r,o,e.onLoad)];return n.derive(i)}}}),i("5d",["4g","5"],function(n,t){return{memory:function(){var e=t(null),r=function(){return{mode:"memory",value:e.get()}},o=function(){return null===e.get()},i=function(){e.set(null)};return n({set:e.set,get:e.get,isNotSet:o,clear:i,readState:r})},dataset:function(){var e=t({});return n({readState:function(){return{mode:"dataset",dataset:e.get()}},set:e.set,get:e.get})},manual:function(){return n({readState:function(){}})},init:function(n){return n.store().manager().state(n)}}}),i("75",["5d","4q","29","14","6"],function(n,t,e,r){var o=function(n,t,e,r){t.store().getDataKey(),e.set({}),t.store().setData()(n,r),t.onSetValue()(n,r)},i=function(n,t,e){var o=t.store().getDataKey()(n),i=e.get();return r.readOptFrom(i,o).fold(function(){return t.store().getFallbackEntry()(o)},function(n){return n})},u=function(n,t,e){t.store().initialValue().each(function(r){o(n,t,e,r)})},a=function(n,t,e){e.set({})};return[e.option("initialValue"),e.strict("getFallbackEntry"),e.strict("getDataKey"),e.strict("setData"),t.output("manager",{setValue:o,getValue:i,onLoad:u,onUnload:a,state:n.dataset})]}),i("76",["28","4q","29","6"],function(n,t,e,r){var o=function(n,t){return t.store().getValue()(n)},i=function(n,t,e,r){t.store().setValue()(n,r),t.onSetValue()(n,r)},u=function(n,t){t.store().initialValue().each(function(e){t.store().setValue()(n,e)})};return[e.strict("getValue"),e.defaulted("setValue",r.noop),e.option("initialValue"),t.output("manager",{setValue:i,getValue:o,onLoad:u,onUnload:r.noop,state:n.init})]}),i("77",["5d","4q","29"],function(n,t,e){var r=function(n,t,e,r){e.set(r),t.onSetValue()(n,r)},o=function(n,t,e){return e.get()},i=function(n,t,e){t.store().initialValue().each(function(n){e.isNotSet()&&e.set(n)})},u=function(n,t,e){e.clear()};return[e.option("initialValue"),t.output("manager",{setValue:r,getValue:o,onLoad:i,onUnload:u,state:n.memory})]}),i("5c",["75","76","77","4q","29","2e"],function(n,t,e,r,o,i){return[o.defaultedOf("store",{mode:"memory"},i.choose("mode",{memory:e,manual:t,dataset:n})),r.onHandler("onSetValue"),o.defaulted("resetOnDom",!1)]}),i("3g",["q","5a","5b","5c","5d"],function(n,t,e,r,o){var i=n.create({fields:r,name:"representing",active:t,apis:e,extra:{setValueFrom:function(n,t){var e=i.getValue(t);i.setValue(n,e)}},state:o});return i}),i("5m",["39","78"],function(n,t){var e=t("width",function(n){return n.dom().offsetWidth});return{set:function(n,t){e.set(n,t)},get:function(n){return e.get(n)},getOuter:function(n){return e.getOuter(n)},setMax:function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=e.max(t,r,o);n.set(t,"max-width",i+"px")}}}),i("56",["q","33","3g","3d","2g","52","74","y","6","w","z","7","39","5m"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var g=l.detect().deviceType.isTouch();return{sketch:function(l,p){var v=l.max()-l.min(),h=function(n){var t=n.element().dom().getBoundingClientRect();return(t.left+t.right)/2},y=function(n){return i.getPartOrDie(n,l,"thumb")},b=function(n,t,e){var r=e.value().get();return r<e.min()?i.getPart(n,e,"left-edge").fold(function(){return 0},function(n){return h(n)-t.left}):r>e.max()?i.getPart(n,e,"right-edge").fold(function(){return t.width},function(n){return h(n)-t.left}):(e.value().get()-e.min())/v*t.width},w=function(n){var t=i.getPartOrDie(n,l,"spectrum").element().dom().getBoundingClientRect(),e=n.element().dom().getBoundingClientRect(),r=b(n,t,l);return t.left-e.left+r},O=function(n){var t=w(n),e=y(n),r=m.get(e.element())/2;d.set(e.element(),"left",t-r+"px")},x=function(n,t){var e=l.value().get(),r=y(n);return e!==t||d.getRaw(r.element(),"left").isNone()?(l.value().set(t),O(n),l.onChange()(n,r,t),f.some(!0)):f.none()},S=function(n){x(n,l.min(),f.none())},T=function(n){x(n,l.max(),f.none())},k=g?[r.run(o.touchstart(),function(n){l.onDragStart()(n,y(n))}),r.run(o.touchend(),function(n){l.onDragEnd()(n,y(n))})]:[r.run(o.mousedown(),function(n,t){t.stop(),l.onDragStart()(n,y(n)),l.mouseIsDown().set(!0)}),r.run(o.mouseup(),function(n){l.onDragEnd()(n,y(n)),l.mouseIsDown().set(!1)})];return{uid:l.uid(),dom:l.dom(),components:p,behaviours:s.deepMerge(n.derive(a.flatten([g?[]:[t.config({mode:"special",focusIn:function(n){return i.getPart(n,l,"spectrum").map(t.focusIn).map(c.constant(!0))}})],[e.config({store:{mode:"manual",getValue:function(){return l.value().get()}}})]])),l.sliderBehaviours()),events:r.derive([r.run(u.changeEvent(),function(n,t){x(n,t.event().value())}),r.runOnAttached(function(n){l.value().set(l.getInitialValue()());var t=y(n);O(n),l.onInit()(n,t,l.value().get())})].concat(k)),apis:{resetToMin:S,resetToMax:T,refresh:O},domModification:{styles:{position:"relative"}}}}}}),i("38",["34","54","55","56","1w"],function(n,t,e,r){return n.composite({name:"Slider",configFields:e,partFields:t,factory:r.sketch,apis:{resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}})}),i("3a",["l"],function(n){return{button:function(t,e,r){return n.forToolbar(e,function(){var n=r();t.setContextToolbar([{label:e+" group",items:n}])},{})}}}),i("1p",["q","1f","1g","38","39","1l","i","3a","1o"],function(n,t,e,r,o,i,u,a,c){var s=-1,f=function(t){var a=function(n){return n<0?"black":n>360?"white":"hsl("+n+", 100%, 50%)"},s=function(n,t,e){var r=a(e);o.set(t.element(),"background-color",r)},f=function(n,e,r){var i=a(r);o.set(e.element(),"background-color",i),t.onChange(n,e,i)};return r.sketch({dom:c.dom('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[r.parts()["left-edge"](c.spec('<div class="${prefix}-hue-slider-black"></div>')),r.parts().spectrum({dom:c.dom('<div class="${prefix}-slider-gradient-container"></div>'),components:[c.spec('<div class="${prefix}-slider-gradient"></div>')],behaviours:n.derive([e.config({toggleClass:u.resolve("thumb-active")})])}),r.parts()["right-edge"](c.spec('<div class="${prefix}-hue-slider-white"></div>')),r.parts().thumb({dom:c.dom('<div class="${prefix}-slider-thumb"></div>'),behaviours:n.derive([e.config({toggleClass:u.resolve("thumb-active")})])})],onChange:f,onDragStart:function(n,t){e.on(t)},onDragEnd:function(n,t){e.off(t)},onInit:s,stepSize:10,min:0,max:360,getInitialValue:t.getInitialValue,sliderBehaviours:n.derive([i.orientation(r.refresh)])})},l=function(n){return[f(n)]};return{makeItems:l,sketch:function(n,t){var e={onChange:function(n,e,r){t.undoManager.transact(function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()})},getInitialValue:function(){return s}};return a.button(n,"color",function(){return l(e)})}}}),i("3b",["q","1f","1g","38","29","2e","1l","i","1o"],function(n,t,e,r,o,i,u,a,c){var s=i.objOfOnly([o.strict("getInitialValue"),o.strict("onChange"),o.strict("category"),o.strict("sizes")]);return{sketch:function(t){var o=i.asRawOrDie("SizeSlider",s,t),f=function(n){return n>=0&&n<o.sizes.length},l=function(n,t,e){f(e)&&o.onChange(e)};return r.sketch({dom:{tag:"div",classes:[a.resolve("slider-"+o.category+"-size-container"),a.resolve("slider"),a.resolve("slider-size-container")]},onChange:l,onDragStart:function(n,t){e.on(t)},onDragEnd:function(n,t){e.off(t)},min:0,max:o.sizes.length-1,stepSize:1,getInitialValue:o.getInitialValue,snapToGrid:!0,sliderBehaviours:n.derive([u.orientation(r.refresh)]),components:[r.parts().spectrum({dom:c.dom('<div class="${prefix}-slider-size-container"></div>'),components:[c.spec('<div class="${prefix}-slider-size-line"></div>')]}),r.parts().thumb({dom:c.dom('<div class="${prefix}-slider-thumb"></div>'),behaviours:n.derive([e.config({toggleClass:a.resolve("thumb-active")})])})]})}}}),i("58",["1i","6","z","a"],function(n,t,e,r){var o=function(o,i,u){for(var a=o.dom(),c=n.isFunction(u)?u:t.constant(!1);a.parentNode;){a=a.parentNode;var s=r.fromDom(a),f=i(s);if(f.isSome())return f;if(c(s))break}return e.none()};return{ancestor:o,closest:function(n,t,r){return t(n).orThunk(function(){return r(n)?e.none():o(n,t,r)})}}}),i("3c",["y","6","z","1a","a","b","39","58","10"],function(n,t,e,r,o,i,u,a,c){var s=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],f="medium",l=2,d=function(n){return e.from(s[n])},m=function(t){return n.findIndex(s,function(n){return n===t})},g=function(n,t){return(i.isElement(t)?e.some(t):c.parent(t)).map(function(t){return a.closest(t,function(n){return u.getRaw(n,"font-size")},n).getOrThunk(function(){return u.get(t,"font-size")})}).getOr("")},p=function(t){var e=t.selection.getStart(),i=o.fromDom(e),u=o.fromDom(t.getBody()),a=g(function(n){return r.eq(u,n)},i);return n.find(s,function(n){return a===n}).getOr(f)},v=function(n,t){p(n)!==t&&n.execCommand("fontSize",!1,t)},h=function(n){var t=p(n);return m(t).getOr(l)},y=function(n,t){d(t).each(function(t){v(n,t)})};return{candidates:t.constant(s),get:h,apply:y}}),i("1q",["3b","3a","3c","1o"],function(n,t,e,r){var o=e.candidates(),i=function(t){return n.sketch({onChange:t.onChange,sizes:o,category:"font",getInitialValue:t.getInitialValue})},u=function(n){return[r.spec('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),i(n),r.spec('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]};return{makeItems:u,sketch:function(n,r){var o={onChange:function(n){e.apply(r,n)},getInitialValue:function(){return e.get(r)}};return t.button(n,"font-size",function(){return u(o)})}}}),i("79",[],function(){function n(n,t){return o(document.createElement("canvas"),n,t)}function t(t){var r;return r=n(t.width,t.height),e(r).drawImage(t,0,0),r}function e(n){return n.getContext("2d")}function r(n){var t=null;try{t=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(n){}return t||(t=null),t}function o(n,t,e){return n.width=t,n.height=e,n}return{create:n,clone:t,resize:o,get2dContext:e,get3dContext:r}}),i("7a",[],function(){function n(n){return n.naturalWidth||n.width}function t(n){return n.naturalHeight||n.height}return{getWidth:n,getHeight:t}}),i("7b",[],function(){function n(n,t){return function(){n.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(t,n(r,this),n(o,this))}function e(n){var t=this;return null===this._state?void this._deferreds.push(n):void c(function(){var e=t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void n.reject(t)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void a(n(e,t),n(r,this),n(o,this))}this._state=!0,this._value=t,i.call(this)}catch(n){o.call(this,n)}}function o(n){this._state=!1,this._value=n,i.call(this)}function i(){for(var n=0,t=this._deferreds.length;n<t;n++)e.call(this,this._deferreds[n]);this._deferreds=null}function u(n,t,e,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r}function a(n,t,e){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,e(n))})}catch(n){if(r)return;r=!0,e(n)}}if(window.Promise)return window.Promise;var c=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)},s=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return t.prototype["catch"]=function(n){return this.then(null,n)},t.prototype.then=function(n,r){var o=this;return new t(function(t,i){e.call(o,new u(n,r,t,i))})},t.all=function(){var n=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new t(function(t,e){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(n){r(i,n)},e)}n[i]=u,0==--o&&t(n)}catch(n){e(n)}}if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)r(i,n[i])})},t.resolve=function(n){return n&&"object"==typeof n&&n.constructor===t?n:new t(function(t){t(n)})},t.reject=function(n){return new t(function(t,e){e(n)})},t.race=function(n){return new t(function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)})},t}),i("7c",["4m"],function(n){return function(t,e){return new(n.getOrDie("Blob"))(t,e)}}),i("7d",["4m"],function(n){return function(){return new(n.getOrDie("FileReader"))}}),i("7e",["4m"],function(n){return function(t){return new(n.getOrDie("Uint8Array"))(t)}}),i("7f",["4m"],function(n){return{atob:function(t){return n.getOrDie("atob")(t)},requestAnimationFrame:function(t){n.getOrDie("requestAnimationFrame")(t)}}}),i("59",["79","7a","7b","z","7c","7d","7e","7f","u","1w"],function(n,t,e,r,o,i,u,a,c,s){function f(n){return new e(function(t){function e(){n.removeEventListener("load",e),t(n)}n.complete?t(n):n.addEventListener("load",e)})}function l(n){return f(n).then(function(n){var t=n.src;return 0===t.indexOf("blob:")?m(t):0===t.indexOf("data:")?p(t):m(t)})}function d(n){return new e(function(t,e){function r(){a(),t(u)}function o(){a(),e("Unable to load data of type "+n.type+": "+i)}var i=URL.createObjectURL(n),u=new Image,a=function(){u.removeEventListener("load",r),u.removeEventListener("error",o)};u.addEventListener("load",r),u.addEventListener("error",o),u.src=i,u.complete&&r()})}function m(n){return new e(function(t){var e=new XMLHttpRequest;e.open("GET",n,!0),e.responseType="blob",e.onload=function(){200==this.status&&t(this.response)},e.send()})}function g(n){var t=n.split(","),e=/data:([^;]+)/.exec(t[0]);if(!e)return r.none();for(var i=e[1],f=t[1],l=1024,d=a.atob(f),m=d.length,g=s.ceil(m/l),p=new c(g),v=0;v<g;++v){for(var h=v*l,y=s.min(h+l,m),b=new c(y-h),w=h,O=0;w<y;++O,++w)b[O]=d[w].charCodeAt(0);p[v]=u(b)}return r.some(o(p,{type:i}))}function p(n){return new e(function(t,e){g(n).fold(function(){e("uri is not base64: "+n)},t)})}function v(n){return 0===n.indexOf("blob:")?m(n):0===n.indexOf("data:")?p(n):null}function h(n,t,r){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new e(function(e){n.toBlob(function(n){e(n)},t,r)}):p(n.toDataURL(t,r))}function y(n,t,e){return t=t||"image/png",n.then(function(n){return n.toDataURL(t,e)})}function b(e){return d(e).then(function(e){x(e);var r;return r=n.create(t.getWidth(e),t.getHeight(e)),n.get2dContext(r).drawImage(e,0,0),r})}function w(n){return new e(function(t){var e=new i;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})}function O(n){return w(n).then(function(n){return n.split(",")[1]})}function x(n){URL.revokeObjectURL(n.src)}return{blobToImage:d,imageToBlob:l,blobToDataUri:w,blobToBase64:O,dataUriToBlobSync:g,canvasToBlob:h,canvasToDataURL:y,blobToCanvas:b,uriToBlob:v}}),i("3e",["59","z"],function(n,t){return{blobToImage:function(t){return n.blobToImage(t)},imageToBlob:function(t){return n.imageToBlob(t)},blobToDataUri:function(t){return n.blobToDataUri(t)},blobToBase64:function(t){return n.blobToBase64(t)},dataUriToBlobSync:function(t){return n.dataUriToBlobSync(t)},uriToBlob:function(e){return t.from(n.uriToBlob(e))}}}),i("1r",["1h","3d","2g","1n","3e","3f","z","1o"],function(n,t,e,r,o,i,u,a){var c=function(n,t){o.blobToBase64(t).then(function(e){n.undoManager.transact(function(){var r=n.editorUpload.blobCache,o=r.create(i.generate("mceu"),t,e);r.add(o);var u=n.dom.createHTML("img",{src:o.blobUri()});n.insertContent(u)})})},s=function(n){var t=n.event(),e=t.raw().target.files||t.raw().dataTransfer.files;return u.from(e[0])};return{sketch:function(o){var i={tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},u=n.record({dom:i,events:t.derive([t.cutter(e.click()),t.run(e.change(),function(n,t){s(t).each(function(n){c(o,n)})})])});return r.sketch({dom:a.dom('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[u.asSpec()],action:function(n){u.get(n).element().dom().click()}})}}}),i("5e",[],function(){return{get:function(n){return n.dom().textContent},set:function(n,t){n.dom().textContent=t}}}),i("3h",["6","z","a","4i","5e","4u"],function(n,t,e,r,o,i){var u=function(n){return n.length>0},a=function(n){return void 0===n||null===n?"":n},c=function(n){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:t.none()}},s=function(n){var e=o.get(n),i=r.get(n,"href"),u=r.get(n,"title"),c=r.get(n,"target");return{url:a(i),text:e!==i?a(e):"",title:a(u),target:a(c),link:t.some(n)}},f=function(n){return p(n).fold(function(){return c(n)},function(n){return s(n)})},l=function(n){return r.get(n,"href")===o.get(n)},d=function(n,e,r){return r.text.filter(u).fold(function(){return l(n)?t.some(e):t.none()},t.some)},m=function(t,e){e.link.bind(n.identity).each(function(){t.execCommand("unlink")})},g=function(n,t){var e={};return e.href=n,t.title.filter(u).each(function(n){e.title=n}),t.target.filter(u).each(function(n){e.target=n}),e},p=function(n){var t=e.fromDom(n.selection.getStart());return i.closest(t,"a")};return{getInfo:f,applyInfo:function(t,e){e.url.filter(u).fold(function(){m(t,e)},function(i){var a=g(i,e);e.link.bind(n.identity).fold(function(){var n=e.text.filter(u).getOr(i);t.insertContent(t.dom.createHTML("a",a,t.dom.encode(n)))},function(n){var t=d(n,i,e);r.setAll(n,a),t.each(function(t){o.set(n,t)})})})},query:p}}),i("3u",["q","3d","29","6"],function(n,t,e,r){var o=function(o,i){var u=t.derive(i);return n.create({fields:[e.strict("enabled")],name:o,active:{events:r.constant(u)}})};return{events:o,config:function(t,e){return{key:t,value:{config:{},me:o(t,e),configAsRaw:r.constant({}),initialConfig:{},state:n.noState()}}}}}),i("7g",[],function(){return{getCurrent:function(n,t){return t.find()(n)}}}),i("7h",["29"],function(n){return[n.strict("find")]}),i("5f",["q","7g","7h"],function(n,t,e){return n.create({fields:e,name:"composing",apis:t})}),i("3v",["34","29","w"],function(n,t,e){var r=function(n){return{uid:n.uid(),dom:e.deepMerge({tag:"div",attributes:{role:"presentation"}},n.dom()),components:n.components(),behaviours:n.containerBehaviours(),events:n.events(),domModification:n.domModification(),eventOrder:n.eventOrder()}};return n.single({name:"Container",factory:r,configFields:[t.defaulted("components",[]),t.defaulted("containerBehaviours",{}),t.defaulted("events",{}),t.defaulted("domModification",{}),t.defaulted("eventOrder",{})]})}),i("5g",["q","5f","3g","3d","34","29","z"],function(n,t,e,r,o,i,u){var a=function(o){return{uid:o.uid(),dom:o.dom(),behaviours:n.derive([e.config({store:{mode:"memory",initialValue:o.getInitialValue()()}}),t.config({find:u.some})]),events:r.derive([r.runOnAttached(function(n){e.setValue(n,o.getInitialValue()())})])}};return o.single({name:"DataField",factory:a,configFields:[i.strict("uid"),i.strict("dom"),i.strict("getInitialValue")]})}),i("87",["4b","14"],function(n,t){return{exhibit:function(e,r){return n.nu({attributes:t.wrapAll([{key:r.tabAttr(),value:"true"}])})}}}),i("88",["29"],function(n){return[n.defaulted("tabAttr","data-alloy-tabstop")]}),i("64",["q","87","88"],function(n,t,e){return n.create({fields:e,name:"tabstopping",active:t})}),i("93",["v"],function(n){return{set:function(t,e){if(void 0===e)throw new n("Value.set was undefined");t.dom().value=e},get:function(n){return n.dom().value}}}),i("7i",["q","32","3g","64","4q","29","14","6","w","93"],function(n,t,e,r,o,i,u,a,c,s){var f=[i.option("data"),i.defaulted("inputAttributes",{}),i.defaulted("inputStyles",{}),i.defaulted("type","input"),i.defaulted("tag","input"),o.onHandler("onSetValue"),i.defaulted("styles",{}),i.option("placeholder"),i.defaulted("eventOrder",{}),i.defaulted("hasTabstop",!0),i.defaulted("inputBehaviours",{}),i.defaulted("selectOnFocus",!0)],l=function(o){return c.deepMerge(n.derive([e.config({store:{mode:"manual",initialValue:o.data().getOr(void 0),getValue:function(n){return s.get(n.element())},setValue:function(n,t){s.get(n.element())!==t&&s.set(n.element(),t)}},onSetValue:o.onSetValue()}),t.config({onFocus:!1===o.selectOnFocus()?a.noop:function(n){var t=n.element(),e=s.get(t);t.dom().setSelectionRange(0,e.length)}}),o.hasTabstop()?r.config({}):r.revoke()]),o.inputBehaviours())},d=function(n){return{tag:n.tag(),attributes:c.deepMerge(u.wrapAll([{key:"type",value:n.type()}].concat(n.placeholder().map(function(n){return{key:"placeholder",value:n}}).toArray())),n.inputAttributes()),styles:n.inputStyles()}};return{schema:a.constant(f),behaviours:l,dom:d}}),i("5h",["34","7i"],function(n,t){var e=function(n){return{uid:n.uid(),dom:t.dom(n),components:[],behaviours:t.behaviours(n),eventOrder:n.eventOrder()}};return n.single({name:"Input",configFields:t.schema(),factory:e})}),i("3i",["3u","q","5f","3g","1g","1h","3d","2","2g","1n","3v","5g","5h","z","i","1o"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p){var v="input-clearing";return{field:function(l,h){var y=i.record(d.sketch({placeholder:h,onSetValue:function(n){a.emit(n,c.input())},inputBehaviours:t.derive([e.config({find:m.some})]),selectOnFocus:!1})),b=i.record(s.sketch({dom:p.dom('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var t=y.get(n);r.setValue(t,"")}}));return{name:l,spec:f.sketch({dom:p.dom('<div class="${prefix}-input-container"></div>'),components:[y.asSpec(),b.asSpec()],containerBehaviours:t.derive([o.config({toggleClass:g.resolve("input-container-empty")}),e.config({find:function(n){return m.some(y.get(n))}}),n.config(v,[u.run(c.input(),function(n){var t=y.get(n);(r.getValue(t).length>0?o.off:o.on)(n)})])])})}},hidden:function(n){return{name:n,spec:l.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return m.none()}})}}}}),i("7k",["y","4i","2f","b"],function(n,t,e,r){var o=["input","button","textarea"],i=function(n,t,e){t.disabled()&&m(n,t,e)},u=function(t){return n.contains(o,r.name(t.element()))},a=function(n){return t.has(n.element(),"disabled")},c=function(n){t.set(n.element(),"disabled","disabled")},s=function(n){t.remove(n.element(),"disabled")},f=function(n){return"true"===t.get(n.element(),"aria-disabled")},l=function(n){t.set(n.element(),"aria-disabled","true")},d=function(n){t.set(n.element(),"aria-disabled","false")},m=function(n,t){t.disableClass().each(function(t){e.add(n.element(),t)});(u(n)?c:l)(n)};return{enable:function(n,t){t.disableClass().each(function(t){e.remove(n.element(),t)});(u(n)?s:d)(n)},disable:m,isDisabled:function(n){return u(n)?a(n):f(n)},onLoad:i}}),i("7j",["3d","t","27","7k","4b","y"],function(n,t,e,r,o,i){return{exhibit:function(n,t){return o.nu({classes:t.disabled()?t.disableClass().map(i.pure).getOr([]):[]})},events:function(o,i){return n.derive([n.abort(t.execute(),function(n){return r.isDisabled(n,o,i)}),e.loadEvent(o,i,r.onLoad)])}}}),i("7l",["29"],function(n){return[n.defaulted("disabled",!1),n.option("disableClass")]}),i("5i",["q","7j","7k","7l"],function(n,t,e,r){return n.create({fields:r,name:"disabling",active:t,apis:e})}),i("5k",["q","5f","3g","51","52","53","29","y","w","x"],function(n,t,e,r,o,i,u,a,c,s){var f="form",l=[u.defaulted("formBehaviours",{})],d=function(n){return"<alloy.field."+n+">"},m=function(n){var t=function(){var n=[];return{field:function(t,e){return n.push(t),o.generateOne(f,d(t),e)},record:function(){return n}}}(),e=n(t),u=t.record(),c=a.map(u,function(n){return i.required({name:n,pname:d(n)})});return r.composite(f,l,c,g,e)},g=function(r,i,u){return c.deepMerge({"debug.sketcher":{Form:u},uid:r.uid(),dom:r.dom(),components:i,behaviours:c.deepMerge(n.derive([e.config({store:{mode:"manual",getValue:function(n){var i=o.getAllParts(n,r);return s.map(i,function(n){return n().bind(t.getCurrent).map(e.getValue)})},setValue:function(n,i){s.each(i,function(i,u){o.getPart(n,r,u).each(function(n){t.getCurrent(n).each(function(n){e.setValue(n,i)})})})}}})]),r.formBehaviours())})};return{sketch:m}}),i("1z",["z","5"],function(n,t){var e=function(e){var r=t(n.none()),o=function(){r.get().each(e)};return{clear:function(){o(),r.set(n.none())},isSet:function(){return r.get().isSome()},set:function(t){o(),r.set(n.some(t))}}};return{destroyable:function(){return e(function(n){n.destroy()})},unbindable:function(){return e(function(n){n.unbind()})},api:function(){var e=t(n.none()),r=function(){e.get().each(function(n){n.destroy()})};return{clear:function(){r(),e.set(n.none())},isSet:function(){return e.get().isSome()},set:function(t){r(),e.set(n.some(t))},run:function(n){e.get().each(n)}}},value:function(){var e=t(n.none());return{clear:function(){e.set(n.none())},set:function(t){e.set(n.some(t))},isSet:function(){return e.get().isSome()},on:function(n){e.get().each(n)}}}}}),i("5n",[],function(){var n=1,t=-1,e=0;return{init:function(n){return{xValue:n,points:[]}},move:function(e,r){if(r===e.xValue)return e;var o=r-e.xValue>0?n:t,i={direction:o,xValue:r};return{xValue:r,points:function(){if(0===e.points.length)return[];return e.points[e.points.length-1].direction===o?e.points.slice(0,e.points.length-1):e.points}().concat([i])}},complete:function(r){if(0===r.points.length)return e;var o=r.points[0].direction,i=r.points[r.points.length-1].direction;return o===t&&i===t?t:o===n&&i==n?n:e}}}),i("3j",["3u","q","5i","5j","33","1f","3g","1h","3d","2","2g","1n","3v","5k","29","2e","y","5","z","1z","39","5l","4u","5m","1l","5n","i","1o"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w,O,x,S,T,k,C,E){return{sketch:function(i){var D="navigateEvent",A="serializer-wrapper-events",R="form-events",F=p.objOf([g.strict("fields"),g.defaulted("maxFieldIndex",i.fields.length-1),g.strict("onExecute"),g.strict("getInitialValue"),g.state("state",function(){return{dialogSwipeState:b.value(),currentScreen:h(0)}})]),M=p.asRawOrDie("SerialisedDialog",F,i),B=function(n,r,o){return l.sketch({dom:E.dom('<span class="${prefix}-icon-'+r+' ${prefix}-icon"></span>'),action:function(t){s.emitWith(t,D,{direction:n})},buttonBehaviours:t.derive([e.config({disableClass:C.resolve("toolbar-navigation-disabled"),disabled:!o})])})},I=function(n,t){x.descendant(n.element(),"."+C.resolve("serialised-dialog-chain")).each(function(n){w.set(n,"left",-M.state.currentScreen.get()*t.width+"px")})},z=function(n,t){var e=O.descendants(n.element(),"."+C.resolve("serialised-dialog-screen"));x.descendant(n.element(),"."+C.resolve("serialised-dialog-chain")).each(function(n){M.state.currentScreen.get()+t>=0&&M.state.currentScreen.get()+t<e.length&&(w.getRaw(n,"left").each(function(r){var o=parseInt(r,10),i=S.get(e[0]);w.set(n,"left",o-t*i+"px")}),M.state.currentScreen.set(M.state.currentScreen.get()+t))})},N=function(n){var t=O.descendants(n.element(),"input");y.from(t[M.state.currentScreen.get()]).each(function(t){n.getSystem().getByDom(t).each(function(t){s.dispatchFocus(n,t.element())})});var e=H.get(n);r.highlightAt(e,M.state.currentScreen.get())},q=function(){M.state.currentScreen.set(0),M.state.dialogSwipeState.clear()},j=a.record(m.sketch(function(e){return{dom:E.dom('<div class="${prefix}-serialised-dialog"></div>'),components:[d.sketch({dom:E.dom('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:v.map(M.fields,function(n,t){return t<=M.maxFieldIndex?d.sketch({dom:E.dom('<div class="${prefix}-serialised-dialog-screen"></div>'),components:v.flatten([[B(-1,"previous",t>0)],[e.field(n.name,n.spec)],[B(1,"next",t<M.maxFieldIndex)]])}):e.field(n.name,n.spec)})})],formBehaviours:t.derive([T.orientation(function(n,t){I(n,t)}),o.config({mode:"special",focusIn:function(n){N(n)},onTab:function(n){return z(n,1),y.some(!0)},onShiftTab:function(n){return z(n,-1),y.some(!0)}}),n.config(R,[c.runOnAttached(function(n){q();var t=H.get(n);r.highlightFirst(t),M.getInitialValue(n).each(function(t){u.setValue(n,t)})}),c.runOnExecute(M.onExecute),c.run(f.transitionend(),function(n,t){"left"===t.event().raw().propertyName&&N(n)}),c.run(D,function(n,t){var e=t.event().direction();z(n,e)})])])}})),H=a.record({dom:E.dom('<div class="${prefix}-dot-container"></div>'),behaviours:t.derive([r.config({highlightClass:C.resolve("dot-active"),itemClass:C.resolve("dot-item")})]),components:v.bind(M.fields,function(n,t){return t<=M.maxFieldIndex?[E.spec('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:E.dom('<div class="${prefix}-serializer-wrapper"></div>'),components:[j.asSpec(),H.asSpec()],behaviours:t.derive([o.config({mode:"special",focusIn:function(n){var t=j.get(n);o.focusIn(t)}}),n.config(A,[c.run(f.touchstart(),function(n,t){M.state.dialogSwipeState.set(k.init(t.event().raw().touches[0].clientX))}),c.run(f.touchmove(),function(n,t){M.state.dialogSwipeState.on(function(n){t.event().prevent(),M.state.dialogSwipeState.set(k.move(n,t.event().raw().touches[0].clientX))})}),c.run(f.touchend(),function(n){M.state.dialogSwipeState.on(function(t){var e=j.get(n),r=-1*k.complete(t);z(e,r)})})])])}}}}),i("3k",["6","7"],function(n,t){var e=t.detect(),r=function(n,t){var e=t.selection.getRng();n(),t.selection.setRng(e)};return{forAndroid:function(t,o){(e.os.isAndroid()?r:n.apply)(o,t)}}}),i("1s",["3g","z","17","3h","l","3i","3j","3k"],function(n,t,e,r,o,i,u,a){var c=e.cached(function(e,o){return[{label:"the link group",items:[u.sketch({fields:[i.field("url","Type or paste URL"),i.field("text","Link text"),i.field("title","Link title"),i.field("target","Link target"),i.hidden("link")],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return t.some(r.getInfo(o))},onExecute:function(t){var i=n.getValue(t);r.applyInfo(o,i),e.restoreToolbar(),o.focus()}})]}]});return{sketch:function(n,t){return o.forToolbarStateAction(t,"link","link",function(){var e=c(n,t);n.setContextToolbar(e),a.forAndroid(t,function(){n.focusToolbar()}),r.query(t).each(function(n){t.selection.select(n.dom())})})}}}),i("3l",[],function(){return[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}]}),i("7q",["14","6","z","4i","2f"],function(n,t,e,r,o){var i=function(e,r,o,i){return n.readOptFrom(r.routes(),i.start()).map(t.apply).bind(function(e){return n.readOptFrom(e,i.destination()).map(t.apply)})},u=function(n,t,e){return f(n,t,e).bind(function(r){return a(n,t,e,r)})},a=function(n,e,r,o){return i(n,e,r,o).bind(function(n){return n.transition().map(function(e){return{transition:t.constant(e),route:t.constant(n)}})})},c=function(n,t,e){u(n,t,e).each(function(e){var i=e.transition();o.remove(n.element(),i.transitionClass()),r.remove(n.element(),t.destinationAttr())})},s=function(n,e,o,i){return{start:t.constant(r.get(n.element(),e.stateAttr())),destination:t.constant(i)}},f=function(n,o){var i=n.element();return r.has(i,o.destinationAttr())?e.some({start:t.constant(r.get(n.element(),o.stateAttr())),destination:t.constant(r.get(n.element(),o.destinationAttr()))}):e.none()},l=function(n,t,e,o){c(n,t,e),r.has(n.element(),t.stateAttr())&&r.get(n.element(),t.stateAttr())!==o&&t.onFinish()(n,o),r.set(n.element(),t.stateAttr(),o)},d=function(n,t){r.has(n.element(),t.destinationAttr())&&(r.set(n.element(),t.stateAttr(),r.get(n.element(),t.destinationAttr())),r.remove(n.element(),t.destinationAttr()))};return{findRoute:i,disableTransition:c,getCurrentRoute:f,jumpTo:l,progressTo:function(n,t,e,i){d(n,t,e,i)
;var u=s(n,t,e,i);a(n,t,e,u).fold(function(){l(n,t,e,i)},function(u){c(n,t,e);var a=u.transition();o.add(n.element(),a.transitionClass()),r.set(n.element(),t.destinationAttr(),i)})},getState:function(n,t){var o=n.element();return r.has(o,t.stateAttr())?e.some(r.get(o,t.stateAttr())):e.none()}}}),i("7p",["3d","2g","7q"],function(n,t,e){return{events:function(r,o){return n.derive([n.run(t.transitionend(),function(n,t){var i=t.event().raw();e.getCurrentRoute(n,r,o).each(function(t){e.findRoute(n,r,o,t).each(function(u){u.transition().each(function(u){i.propertyName===u.property()&&(e.jumpTo(n,r,o,t.destination()),r.onTransition()(n,t))})})})}),n.runOnAttached(function(n){e.jumpTo(n,r,o,r.initialState())})])}}}),i("7r",["4q","29","2e","48"],function(n,t,e,r){return[t.defaulted("destinationAttr","data-transitioning-destination"),t.defaulted("stateAttr","data-transitioning-state"),t.strict("initialState"),n.onHandler("onTransition"),n.onHandler("onFinish"),t.strictOf("routes",e.setOf(r.value,e.setOf(r.value,e.objOfOnly([t.optionObjOfOnly("transition",[t.strict("property"),t.strict("transitionClass")])]))))]}),i("5o",["q","7p","7q","7r","14","x"],function(n,t,e,r,o,i){var u=function(n){var t={};return i.each(n,function(n,e){var r=e.split("<->");t[r[0]]=o.wrap(r[1],n),t[r[1]]=o.wrap(r[0],n)}),t},a=function(n,t,e){return o.wrapAll([{key:n,value:o.wrap(t,e)},{key:t,value:o.wrap(n,e)}])},c=function(n,t,e,r){return o.wrapAll([{key:n,value:o.wrapAll([{key:t,value:r},{key:e,value:r}])},{key:t,value:o.wrapAll([{key:n,value:r},{key:e,value:r}])},{key:e,value:o.wrapAll([{key:n,value:r},{key:t,value:r}])}])};return n.create({fields:r,name:"transitioning",active:t,apis:e,extra:{createRoutes:u,createBistate:a,createTristate:c}})}),i("7t",["28","4c","29","2e","y","6","x","6n","v"],function(n,t,e,r,o,i,u,a,c){return{generateFrom:function(s,f){var l=o.map(f,function(o){return e.field(o.name(),o.name(),t.asOption(),r.objOf([e.strict("config"),e.defaulted("state",n)]))}),d=r.asStruct("component.behaviours",r.objOf(l),s.behaviours).fold(function(n){throw new c(r.formatError(n)+"\nComplete spec:\n"+a.stringify(s,null,2))},i.identity);return{list:f,data:u.map(d,function(n){var t=n();return i.constant(t.map(function(n){return{config:n.config(),state:n.state().init(n.config())}}))})}},getBehaviours:function(n){return n.list},getData:function(n){return n.data}}}),i("7s",["7t","14","y","x","v"],function(n,t,e,r){var o=function(n){var o=t.readOptFrom(n,"behaviours").getOr({}),i=e.filter(r.keys(o),function(n){return void 0!==o[n]});return e.map(i,function(t){return n.behaviours[t].me})},i=function(t,e){return n.generateFrom(t,e)};return{generate:function(n){var t=o(n);return i(n,t)},generateFrom:i}}),i("5q",["6q"],function(n){return n.exactly(["getSystem","config","spec","connect","disconnect","element","syncComponents","readState","components","events"])}),i("6a",["6q"],function(n){return n.exactly(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn"])}),i("5r",["6a","13","6","v"],function(n,t,e,r){return function(o){var i=function(n){return function(){throw new r("The component must be in a context to send: "+n+"\n"+t.element(o().element())+" is not in context.")}};return n({debugInfo:e.constant("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),build:i("build"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn")})}}),i("95",["14","x"],function(n,t){return{byInnerKey:function(e,r){var o={};return t.each(e,function(e,i){t.each(e,function(t,e){var u=n.readOr(e,[])(o);o[e]=u.concat([r(i,t)])})}),o}}}),i("7u",["95","4b","14","y","x","w","6n","6","48"],function(n,t,e,r,o,i,u,a,c){var s=function(n,t){return{name:a.constant(n),modification:t}},f=function(n,t){return n.length>1?c.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+u.stringify(r.map(n,function(n){return n.name()}))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===n.length?c.value({}):c.value(n[0].modification().fold(function(){return{}},function(n){return e.wrap(t,n)}))},l=function(n,t,e,o){return c.error("Mulitple behaviours have tried to change the _"+t+'_ "'+n+'". The guilty behaviours are: '+u.stringify(r.bind(o,function(n){return void 0!==n.modification().getOr({})[t]?[n.name()]:[]}),null,2)+". This is not currently supported.")},d=function(n,t){return r.foldl(n,function(r,i){var u=i.modification().getOr({});return r.bind(function(r){var i=o.mapToArray(u,function(o,i){return void 0!==r[i]?l(t,i,u,n):c.value(e.wrap(i,o))});return e.consolidate(i,r)})},c.value({})).map(function(n){return e.wrap(t,n)})},m={classes:function(n,t){var o=r.bind(n,function(n){return n.modification().getOr([])});return c.value(e.wrap(t,o))},attributes:d,styles:d,domChildren:f,defChildren:f,innerHtml:f,value:f};return{combine:function(u,a,f,l){var d=i.deepMerge({},a);r.each(f,function(n){d[n.name()]=n.exhibit(u,l)});var g=n.byInnerKey(d,s),p=o.map(g,function(n){return r.bind(n,function(n){return n.modification().fold(function(){return[]},function(){return[n]})})}),v=o.mapToArray(p,function(n,t){return e.readOptFrom(m,t).fold(function(){return c.error("Unknown field type: "+t)},function(e){return e(n,t)})});return e.consolidate(v,{}).map(t.nu)}}}),i("96",["6n","48","v"],function(n,t,e){return{sortKeys:function(r,o,i,u){var a=i.slice(0);try{var c=a.sort(function(t,i){var a=t[o](),c=i[o](),s=u.indexOf(a),f=u.indexOf(c);if(-1===s)throw new e("The ordering for "+r+" does not have an entry for "+a+".\nOrder specified: "+n.stringify(u,null,2));if(-1===f)throw new e("The ordering for "+r+" does not have an entry for "+c+".\nOrder specified: "+n.stringify(u,null,2));return s<f?-1:f<s?1:0});return t.value(c)}catch(n){return t.error([n])}}}}),i("6b",["6"],function(n){return{nu:function(t,e){return{handler:t,purpose:n.constant(e)}},curryArgs:function(t,e){return{handler:n.curry.apply(void 0,[t.handler].concat(e)),purpose:t.purpose}},getHandler:function(n){return n.handler}}}),i("7v",["95","96","47","6b","14","y","6","w","x","48","6n","u","v"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=function(n,t){return{name:u.constant(n),handler:u.constant(t)}},m=function(n,t){var e={};return i.each(n,function(n){e[n.name()]=n.handlers(t)}),e},g=function(t,e,r){var o=a.deepMerge(r,m(e,t));return n.byInnerKey(o,d)},p=function(n,t,e,r){var o=g(n,e,r);return b(o,t)},v=function(n){var t=e.read(n);return function(n,e){var r=l.prototype.slice.call(arguments,0);t.abort.apply(void 0,r)?e.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},h=function(n,t){return new s.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+f.stringify(i.map(t,function(n){return n.name()}),null,2)])},y=function(n,r,o){var u=r[o];return u?t.sortKeys("Event: "+o,"name",n,u).map(function(n){var t=i.map(n,function(n){return n.handler()});return e.fuse(t)}):h(o,n)},b=function(n,t){var e=c.mapToArray(n,function(n,e){return(1===n.length?s.value(n[0].handler()):y(n,t,e)).map(function(u){var a=v(u),c=n.length>1?i.filter(t,function(t){return i.contains(n,function(n){return n.name()===t})}).join(" > "):n[0].name();return o.wrap(e,r.nu(a,c))})});return o.consolidate(e,{})};return{combine:p}}),i("7w",["4q","6o","4b","4s","4c","29","14","2e","y","6","w","v"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(n){return u.wrap(r.idAttr(),n.uid())};return{toInfo:function(t){return a.asStruct("custom.definition",a.objOfOnly([i.field("dom","dom",o.strict(),a.objOfOnly([i.strict("tag"),i.defaulted("styles",{}),i.defaulted("classes",[]),i.defaulted("attributes",{}),i.option("value"),i.option("innerHtml")])),i.strict("components"),i.strict("uid"),i.defaulted("events",{}),i.defaulted("apis",s.constant({})),i.field("eventOrder","eventOrder",o.mergeWith({"alloy.execute":["disabling","alloy.base.behaviour","toggling"],"alloy.focus":["alloy.base.behaviour","keying","focusing"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"]}),a.anyValue()),i.option("domModification"),n.snapshot("originalSpec"),i.defaulted("debug.sketcher","unknown")]),t)},toDefinition:function(n){var e={tag:n.dom().tag(),classes:n.dom().classes(),attributes:f.deepMerge(l(n),n.dom().attributes()),styles:n.dom().styles(),domChildren:c.map(n.components(),function(n){return n.element()})};return t.nu(f.deepMerge(e,n.dom().innerHtml().map(function(n){return u.wrap("innerHtml",n)}).getOr({}),n.dom().value().map(function(n){return u.wrap("value",n)}).getOr({})))},toModification:function(n){return n.domModification().fold(function(){return e.nu({})},e.nu)},toApis:function(n){return n.apis()},toEvents:function(n){return n.events()}}}),i("89",["y","2f","4j","u"],function(n,t,e,r){var o=function(n){for(var t=n.dom().classList,e=new r(t.length),o=0;o<t.length;o++)e[o]=t.item(o);return e};return{add:function(e,r){n.each(r,function(n){t.add(e,n)})},remove:function(e,r){n.each(r,function(n){t.remove(e,n)})},toggle:function(e,r){n.each(r,function(n){t.toggle(e,n)})},hasAll:function(e,r){return n.forall(r,function(n){return t.has(e,n)})},hasAny:function(e,r){return n.exists(r,function(n){return t.has(e,n)})},get:function(n){return e.supports(n)?o(n):e.get(n)}}}),i("7x",["6o","y","4i","89","39","a","4n","2s","93","v"],function(n,t,e,r,o,i,u,a,c,s){var f=function(e){if(e.domChildren().isSome()&&e.defChildren().isSome())throw new s("Cannot specify children and child specs! Must be one or the other.\nDef: "+n.defToStr(e));return e.domChildren().fold(function(){var n=e.defChildren().getOr([]);return t.map(n,d)},function(n){return n})},l=function(n){var t=i.fromTag(n.tag());e.setAll(t,n.attributes().getOr({})),r.add(t,n.classes().getOr([])),o.setAll(t,n.styles().getOr({})),u.set(t,n.innerHtml().getOr(""));var s=f(n);return a.append(t,s),n.value().each(function(n){c.set(t,n)}),t},d=function(t){var e=n.nu(t);return l(e)};return{renderToDom:l}}),i("5p",["7s","5q","5r","50","7t","7u","7v","7w","4b","7x","2e","y","5","6","w","1i","6n","10","v"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y){return{build:function(b){var w=function(){return H},O=d(e(w)),x=f.getOrDie(a.toInfo(g.deepMerge(b,{behaviours:void 0}))),S=n.generate(b),T=o.getBehaviours(S),k=o.getData(S),C=a.toDefinition(x),E={"alloy.base.modification":a.toModification(x)},D=i.combine(k,E,T,C).getOrDie(),A=c.merge(C,D),R=s.renderToDom(A),F={"alloy.base.behaviour":a.toEvents(x)},M=u.combine(k,x.eventOrder(),T,F).getOrDie(),B=d(x.components()),I=function(n){O.set(n)},z=function(){O.set(e(w))},N=function(){var n=h.children(R),t=l.bind(n,function(n){return O.get().getByDom(n).fold(function(){return[]},function(n){return[n]})});B.set(t)},q=function(n){if(n===r.apiConfig())return x.apis();var t=k;return(p.isFunction(t[n.name()])?t[n.name()]:function(){throw new y("Could not find "+n.name()+" in "+v.stringify(b,null,2))})()},j=function(n){return k[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},H=t({getSystem:O.get,config:q,spec:m.constant(b),readState:j,connect:I,disconnect:z,element:m.constant(R),syncComponents:N,components:B.get,events:m.constant(M)});return H}}}),i("5s",["3d","t","13","1a","16"],function(n,t,e,r,o){var i=function(n,t,e){return r.eq(t,n.element())&&!r.eq(t,e)};return{events:n.derive([n.can(t.focus(),function(n,r){var u=r.event().originator(),a=r.event().target();return!i(n,u,a)||(o.warn(t.focus()+" did not get interpreted by the desired target. \nOriginator: "+e.element(u)+"\nTarget: "+e.element(a)+"\nCheck the "+t.focus()+" event handlers"),!1)})])}}),i("5t",[],function(){return{make:function(n){return n}}}),i("3q",["5p","5q","5r","50","5s","30","5t","29","14","2e","y","5","6","w","z","48","a","v"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v){var h=function(n){var t=c.readOr("components",[])(n);return f.map(t,O)},y=function(t){var e=u.make(t),r=h(e),i=m.deepMerge(o,e,c.wrap("components",r));return p.value(n.build(i))},b=function(n){var t=v.fromText(n);return w({element:t})},w=function(n){var o=s.asStructOrDie("external.component",s.objOfOnly([a.strict("element"),a.option("uid")]),n),u=l(e()),c=function(n){u.set(n)},f=function(){u.set(e(function(){return m}))};o.uid().each(function(n){i.writeOnly(o.element(),n)});var m=t({getSystem:u.get,config:g.none,connect:c,disconnect:f,element:d.constant(o.element()),spec:d.constant(n),readState:d.constant("No state"),syncComponents:d.noop,components:d.constant([]),events:d.constant({})});return r.premade(m)},O=function(n){return r.getPremade(n).fold(function(){var t=m.deepMerge({uid:i.generate("")},n);return y(t).getOrDie()},function(n){return n})};return{build:O,premade:r.premade,external:w,text:b}}),i("9b",["32","2","6","8"],function(n,t,e,r){var o="alloy.item-hover",i="alloy.item-focus",u=function(e){(r.search(e.element()).isNone()||n.isFocused(e))&&(n.isFocused(e)||n.focus(e),t.emitWith(e,o,{item:e}))},a=function(n){t.emitWith(n,i,{item:n})};return{hover:e.constant(o),focus:e.constant(i),onHover:u,onFocus:a}}),i("98",["q","32","33","3g","1g","3d","2","2g","t","4q","9b","29","w"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(s){return{dom:d.deepMerge(s.dom(),{attributes:{role:s.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:d.deepMerge(n.derive([s.toggling().fold(o.revoke,function(n){return o.config(d.deepMerge({aria:{mode:"checked"}},n))}),t.config({ignore:s.ignoreFocus(),onFocus:function(n){f.onFocus(n)}}),e.config({mode:"execution"}),r.config({store:{mode:"memory",initialValue:s.data()}})]),s.itemBehaviours()),events:i.derive([i.runWithTarget(c.tapOrClick(),u.emitExecute),i.cutter(a.mousedown()),i.run(a.mouseover(),f.onHover),i.run(c.focusItem(),t.focus)]),components:s.components(),domModification:s.domModification()}};return[l.strict("data"),l.strict("components"),l.strict("dom"),l.option("toggling"),l.defaulted("itemBehaviours",{}),l.defaulted("ignoreFocus",!1),l.defaulted("domModification",{}),s.output("builder",m)]}),i("99",["3d","t","4q","29"],function(n,t,e,r){var o=function(e){return{dom:e.dom(),components:e.components(),events:n.derive([n.stopper(t.focusItem())])}};return[r.strict("dom"),r.strict("components"),e.output("builder",o)]}),i("a1",["q","3g","53","6"],function(n,t,e,r){var o="item-widget",i=[e.required({name:"widget",overrides:function(e){return{behaviours:n.derive([t.config({store:{mode:"manual",getValue:function(){return e.data()},setValue:function(){}}})])}}})];return{owner:r.constant(o),parts:r.constant(i)}}),i("9a",["8v","q","32","33","3g","3d","2g","t","4q","a1","9b","52","29","w","z"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g){var p=function(c){var d=l.substitutes(s.owner(),c,s.parts()),p=l.components(s.owner(),c,d.internals()),v=function(n){return l.getPart(n,c,"widget").map(function(n){return r.focusIn(n),n})},h=function(t,e){return n.inside(e.event().target())?g.none():c.autofocus()?(e.setSource(t.element()),g.none()):g.none()};return m.deepMerge({dom:c.dom(),components:p,domModification:c.domModification(),events:i.derive([i.runOnExecute(function(n,t){v(n).each(function(){t.stop()})}),i.run(u.mouseover(),f.onHover),i.run(a.focusItem(),function(n){c.autofocus()?v(n):e.focus(n)})]),behaviours:t.derive([o.config({store:{mode:"memory",initialValue:c.data()}}),e.config({onFocus:function(n){f.onFocus(n)}}),r.config({mode:"special",onLeft:h,onRight:h,onEscape:function(n,t){return e.isFocused(n)||c.autofocus()?c.autofocus()?(t.setSource(n.element()),g.none()):g.none():(e.focus(n),g.some(!0))}})])})};return[d.strict("uid"),d.strict("data"),d.strict("components"),d.strict("dom"),d.defaulted("autofocus",!1),d.defaulted("domModification",{}),l.defaultUidsSchema(s.parts()),c.output("builder",p)]}),i("7y",["97","4q","98","99","9a","53","30","29","2e","6","w"],function(n,t,e,r,o,i,u,a,c,s,f){var l=c.choose("type",{widget:o,item:e,separator:r}),d=function(n,t){return{mode:"flatgrid",selector:"."+n.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:n.focusManager()}},m=function(n,t){return{mode:"menu",selector:"."+n.markers().item(),moveOnTab:t.moveOnTab(),focusManager:n.focusManager()}},g=[i.group({factory:{sketch:function(n){var t=c.asStructOrDie("menu.spec item",l,n);return t.builder()(t)}},name:"items",unit:"item",defaults:function(n,t){var e=u.generate("");return f.deepMerge({uid:e},t)},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus(),domModification:{classes:[n.markers().item()]}}}})],p=[a.strict("value"),a.strict("items"),a.strict("dom"),a.strict("components"),a.defaulted("eventOrder",{}),a.defaulted("menuBehaviours",{}),a.defaultedOf("movement",{mode:"menu",moveOnTab:!0},c.choose("mode",{grid:[t.initSize(),t.output("config",d)],menu:[a.defaulted("moveOnTab",!0),t.output("config",m)]})),t.itemMarkers(),a.defaulted("fakeFocus",!1),a.defaulted("focusManager",n.dom()),t.onHandler("onHighlight")];return{name:s.constant("Menu"),schema:s.constant(p),parts:s.constant(g)}}),i("9c",["6"],function(n){var t="alloy.menu-focus";return{focus:n.constant(t)}}),i("7z",["q","5f","5j","33","3g","3d","2","9b","9c","6","w","v"],function(n,t,e,r,o,i,u,a,c,s,f){return{make:function(l,d){return f.deepMerge({dom:f.deepMerge(l.dom(),{attributes:{role:"menu"}}),uid:l.uid(),behaviours:f.deepMerge(n.derive([e.config({highlightClass:l.markers().selectedItem(),itemClass:l.markers().item(),onHighlight:l.onHighlight()}),o.config({store:{mode:"memory",initialValue:l.value()}}),t.config({find:s.identity}),r.config(l.movement().config()(l,l.movement()))]),l.menuBehaviours()),events:i.derive([i.run(a.focus(),function(n,t){var r=t.event();n.getSystem().getByDom(r.target()).each(function(r){e.highlight(n,r),t.stop(),u.emitWith(n,c.focus(),{menu:n,item:r})})}),i.run(a.hover(),function(n,t){var r=t.event().item();e.highlight(n,r)})]),components:d,eventOrder:l.eventOrder()})}}}),i("5u",["34","7y","7z"],function(n,t,e){return n.composite({name:"Menu",configFields:t.schema(),partFields:t.parts(),factory:e.make})}),i("5w",["z","1a","8","2u","10"],function(n,t,e,r,o){return{preserve:function(i,u){var a=o.owner(u),c=e.active(a).bind(function(e){var o=function(n){return t.eq(e,n)};return o(u)?n.some(u):r.descendant(u,o)}),s=i(u);return c.each(function(n){e.active(a).filter(function(e){return t.eq(e,n)}).orThunk(function(){e.focus(n)})}),s}}}),i("3p",["5w","3","y","1a","9"],function(n,t,e,r,o){var i=function(n,e,r,o){var i=n.getSystem().build(o);t.attachWith(n,i,r)},u=function(n,o,i,u){var c=a(n,o);e.find(c,function(n){return r.eq(u.element(),n.element())}).each(t.detach)},a=function(n){return n.components()};return{append:function(n,t,e,r){i(n,t,o.append,r)},prepend:function(n,t,e,r){i(n,t,o.prepend,r)},remove:u,set:function(r,o,i,u){t.detachChildren(r),n.preserve(function(){var n=e.map(u,r.getSystem().build);e.each(n,function(n){t.attach(r,n)})},r.element())},contents:a}}),i("1y",["q","3p"],function(n,t){return n.create({fields:[],name:"replacing",apis:t})}),i("a2",["14","y","x","z"],function(n,t,e,r){var o=function(n){return e.tupleMap(n,function(n,t){return{k:n,v:t}})},i=function(t,e,o,u){return n.readOptFrom(o,u).bind(function(u){return n.readOptFrom(t,u).bind(function(n){var u=i(t,e,o,n);return r.some([n].concat(u))})}).getOr([])};return{generate:function(r,u){var a={};e.each(r,function(n,e){t.each(n,function(n){a[n]=e})});var c=u,s=o(u),f=e.map(s,function(n,t){return[t].concat(i(a,c,s,t))});return e.map(a,function(t){return n.readOptFrom(f,t).getOr([t])})}}}),i("9d",["a2","14","y","x","6","z","5"],function(n,t,e,r,o,i,u){return function(){var a=u({}),c=u({}),s=u({}),f=u(i.none()),l=u(o.constant([])),d=function(n){return t.readOptFrom(c.get(),n)};return{setContents:function(t,e,r,o){f.set(i.some(t)),a.set(r),c.set(e),l.set(o);var u=o(e),d=n.generate(u,r);s.set(d)},expand:function(n){return t.readOptFrom(a.get(),n).map(function(e){var r=t.readOptFrom(s.get(),n).getOr([]);return[e].concat(r)})},refresh:function(n){return t.readOptFrom(s.get(),n)},collapse:function(n){return t.readOptFrom(s.get(),n).bind(function(n){return n.length>1?i.some(n.slice(1)):i.none()})},lookupMenu:d,otherMenus:function(n){var t=l.get()(c.get());return e.difference(r.keys(t),n)},getPrimary:function(){return f.get().bind(d)},getMenus:function(){return c.get()},clear:function(){a.set({}),c.set({}),s.set({}),f.set(i.none())},isClear:function(){return f.get().isNone()}}}}),i("80",["8v","q","5f","5j","33","1y","3g","3q","3d","2","t","97","5u","9d","9b","9c","14","y","6","w","x","z","15","12","2f","89","4u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w,O,x,S,T,k,C){return{make:function(y,E){var D=function(n,t){return w.map(t,function(t,e){var r=d.sketch(b.deepMerge(t,{value:e,items:t.items,markers:v.narrow(E.markers,["item","selectedItem"]),fakeFocus:y.fakeFocus(),onHighlight:y.onHighlight(),focusManager:y.fakeFocus()?l.highlights():l.dom()}));return n.getSystem().build(r)})},A=m(),R=function(n){var t=D(n,y.data().menus());return A.setContents(y.data().primary(),t,y.data().expansions(),function(t){return M(n,t)}),A.getPrimary()},F=function(n){return u.getValue(n).value},M=function(){return w.map(y.data().menus(),function(n){return h.bind(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})})},B=function(n,t){r.highlight(n,t),r.getHighlighted(t).orThunk(function(){return r.getFirst(t)}).each(function(t){s.dispatch(n,t.element(),f.focusItem())})},I=function(n,t){return x.cat(h.map(t,n.lookupMenu))},z=function(n,t,e){return O.from(e[0]).bind(t.lookupMenu).map(function(r){var o=I(t,e.slice(1));h.each(o,function(n){T.add(n.element(),y.markers().backgroundMenu())}),S.inBody(r.element())||i.append(n,a.premade(r)),k.remove(r.element(),[y.markers().backgroundMenu()]),B(n,r);var u=I(t,t.otherMenus(e));return h.each(u,function(t){k.remove(t.element(),[y.markers().backgroundMenu()]),y.stayInDom()||i.remove(n,t)}),r})},N=function(n,t){var e=F(t);return A.expand(e).bind(function(e){return O.from(e[0]).bind(A.lookupMenu).each(function(e){S.inBody(e.element())||i.append(n,a.premade(e)),y.onOpenSubmenu()(n,t,e),r.highlightFirst(e)}),z(n,A,e)})},q=function(n,t){var e=F(t);return A.collapse(e).bind(function(e){return z(n,A,e).map(function(e){return y.onCollapseMenu()(n,t,e),e})})},j=function(n,t){var e=F(t);return A.refresh(e).bind(function(t){return z(n,A,t)})},H=function(t,e){return n.inside(e.element())?O.none():N(t,e)},P=function(t,e){return n.inside(e.element())?O.none():q(t,e)},V=function(n,t){return q(n,t).orThunk(function(){return y.onEscape()(n,t)})},L=function(n){return function(t,e){return C.closest(e.getSource(),"."+y.markers().item()).bind(function(e){return t.getSystem().getByDom(e).bind(function(e){return n(t,e)})})}},U=c.derive([c.run(p.focus(),function(n,t){var e=t.event().menu();r.highlight(n,e)}),c.runOnExecute(function(n,t){var e=t.event().target();return n.getSystem().getByDom(e).bind(function(t){return 0===F(t).indexOf("collapse-item")?q(n,t):N(n,t).orThunk(function(){return y.onExecute()(n,t)})})}),c.runOnAttached(function(n){R(n).each(function(t){i.append(n,a.premade(t)),y.openImmediately()&&(B(n,t),y.onOpenMenu()(n,t))})})].concat(y.navigateOnHover()?[c.run(g.hover(),function(n,t){var e=t.event().item();j(n,e),N(n,e),y.onHover()(n,e)})]:[])),W=function(n){r.getHighlighted(n).each(function(t){r.getHighlighted(t).each(function(t){q(n,t)})})};return{uid:y.uid(),dom:y.dom(),behaviours:b.deepMerge(t.derive([o.config({mode:"special",onRight:L(H),onLeft:L(P),onEscape:L(V),focusIn:function(n){A.getPrimary().each(function(t){s.dispatch(n,t.element(),f.focusItem())})}}),r.config({highlightClass:y.markers().selectedMenu(),itemClass:y.markers().menu()}),e.config({find:function(n){return r.getHighlighted(n)}}),i.config({})]),y.tmenuBehaviours()),eventOrder:y.eventOrder(),apis:{collapseMenu:W},events:U}},collapseItem:y.constant("collapse-item")}}),i("5v",["34","4q","80","29","14","3f"],function(n,t,e,r,o,i){var u=function(n,t,e){return{primary:n,menus:t,expansions:e}},a=function(n,t){return{primary:n,menus:o.wrap(n,t),expansions:{}}},c=function(n){return{value:i.generate(e.collapseItem()),text:n}};return n.single({name:"TieredMenu",configFields:[t.onStrictKeyboardHandler("onExecute"),t.onStrictKeyboardHandler("onEscape"),t.onStrictHandler("onOpenMenu"),t.onStrictHandler("onOpenSubmenu"),t.onHandler("onCollapseMenu"),r.defaulted("openImmediately",!0),r.strictObjOf("data",[r.strict("primary"),r.strict("menus"),r.strict("expansions")]),r.defaulted("fakeFocus",!1),t.onHandler("onHighlight"),t.onHandler("onHover"),t.tieredMenuMarkers(),r.strict("dom"),r.defaulted("navigateOnHover",!0),r.defaulted("stayInDom",!1),r.defaulted("tmenuBehaviours",{}),r.defaulted("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)}},factory:e.make,extraApis:{tieredData:u,singleData:a,collapseItem:c}})}),i("3z",["6","2f","i"],function(n,t,e){var r=e.resolve("scrollable");return{register:function(n){t.add(n,r)},deregister:function(n){t.remove(n,r)},scrollable:n.constant(r)}}),i("3m",["3u","q","3g","1g","5o","3q","1h","3d","1n","5u","5v","14","y","w","x","39","4u","5m","1l","i","3z"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w){var O=function(n){return l.readOptFrom(n,"format").getOr(n.title)},x=function(n,t){var e=T("Styles",[].concat(d.map(n.items,function(t){return S(O(t),t.title,t.isSelected(),t.getPreview(),l.hasKey(n.expansions,O(t)))})),t,!1),r=g.map(n.menus,function(e,r){var o=d.map(e,function(t){return S(O(t),t.title,void 0!==t.isSelected&&t.isSelected(),void 0!==t.getPreview?t.getPreview():"",l.hasKey(n.expansions,O(t)))});return T(r,o,t,!0)}),o=m.deepMerge(r,l.wrap("styles",e));return{tmenu:f.tieredData("styles",o,n.expansions)}},S=function(n,e,o,i,u){return{data:{value:n,text:e},type:"item",dom:{tag:"div",classes:u?[b.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:b.resolve("format-matches"),selected:o},itemBehaviours:t.derive(u?[]:[y.format(n,function(n,t){(t?r.on:r.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:i},innerHtml:e}}]}},T=function(e,r,u,l){return{value:e,dom:{tag:"div"},components:[c.sketch({dom:{tag:"div",classes:[b.resolve("styles-collapser")]},components:l?[{dom:{tag:"span",classes:[b.resolve("styles-collapse-icon")]}},i.text(e)]:[i.text(e)],action:function(n){if(l){var t=u().get(n);f.collapseMenu(t)}}}),{dom:{tag:"div",classes:[b.resolve("styles-menu-items-container")]},components:[s.parts().items({})],behaviours:t.derive([n.config("adhoc-scrollable-menu",[a.runOnAttached(function(n){p.set(n.element(),"overflow-y","auto"),p.set(n.element(),"-webkit-overflow-scrolling","touch"),w.register(n.element())}),a.runOnDetached(function(n){p.remove(n.element(),"overflow-y"),p.remove(n.element(),"-webkit-overflow-scrolling"),w.deregister(n.element())})])])}],items:r,menuBehaviours:t.derive([o.config({initialState:"after",routes:o.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}};return{sketch:function(n){var t=x(n.formats,function(){return r}),r=u.record(f.sketch({dom:{tag:"div",classes:[b.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,r){var o=e.getValue(r);n.handle(r,o.value)},onEscape:function(){},onOpenMenu:function(n,t){var e=h.get(n.element());h.set(t.element(),e),o.jumpTo(t,"current")},onOpenSubmenu:function(n,t,e){var r=h.get(n.element()),i=v.ancestor(t.element(),'[role="menu"]').getOrDie("hacky"),u=n.getSystem().getByDom(i).getOrDie();h.set(e.element(),r),o.progressTo(u,"before"),o.jumpTo(e,"after"),o.progressTo(e,"current")},onCollapseMenu:function(n,t,e){var r=v.ancestor(t.element(),'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(r).getOrDie();o.progressTo(i,"after"),o.progressTo(e,"current")},navigateOnHover:!1,openImmediately:!0,data:t.tmenu,markers:{backgroundMenu:b.resolve("styles-background-menu"),menu:b.resolve("styles-menu"),selectedMenu:b.resolve("styles-selected-menu"),item:b.resolve("styles-item"),selectedItem:b.resolve("styles-selected-item")}}));return r.asSpec()}}}),i("3n",["14","y","w"],function(n,t,e){var r=function(t){var r=e.deepMerge(n.exclude(t,["items"]),{menu:!0}),o=i(t.items,t.title);return{item:r,menus:e.deepMerge(o.menus,n.wrap(t.title,o.items)),expansions:e.deepMerge(o.expansions,n.wrap(t.title,t.title))}},o=function(t){return n.hasKey(t,"items")?r(t):{item:t,menus:{},expansions:{}}},i=function(n){return t.foldr(n,function(n,t){var r=o(t);return{menus:e.deepMerge(n.menus,r.menus),items:[r.item].concat(n.items),expansions:e.deepMerge(n.expansions,r.expansions)}},{menus:{},expansions:{},items:[]})};return{expand:i}}),i("1t",["1g","14","y","6","3f","w","3l","3m","3n"],function(n,t,e,r,o,i,u,a,c){var s=function(n,r){var o=function(r){return e.bind(r,function(e){if(void 0!==e.items){return o(e.items).length>0?[e]:[]}return!t.hasKey(e,"format")||n.formatter.canApply(e.format)?[e]:[]})},i=o(r);return c.expand(i)};return{register:function(n,a){var c=function(t){return function(){return n.formatter.match(t)}},s=function(t){return function(){return n.formatter.getCssText(t)}},f=function(n){return i.deepMerge(n,{isSelected:c(n.format),getPreview:s(n.format)})},l=function(n){return i.deepMerge(n,{isSelected:r.constant(!1),getPreview:r.constant("")})},d=function(t){var e=o.generate(t.title),r=i.deepMerge(t,{format:e,isSelected:c(e),getPreview:s(e)});return n.formatter.register(e,r),r},m=t.readOptFrom(a,"style_formats").getOr(u),g=function(n){return e.map(n,function(n){if(t.hasKey(n,"items")){var e=g(n.items);return i.deepMerge(l(n),{items:e})}return t.hasKey(n,"format")?f(n):d(n)})};return g(m)},ui:function(t,e,r){var o=s(t,e);return a.sketch({formats:o,handle:function(e,o){t.undoManager.transact(function(){n.isOn(e)?t.formatter.remove(o):t.formatter.apply(o)}),r()}})}}}),i("h",["q","1f","1g","1h","14","y","6","z","1i","1j","1k","1l","g","i","l","1p","1q","1r","1s","1t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b){var w=["undo","bold","italic","link","image","bullist","styleselect"],O=function(n){var t=n.replace(/\|/g," ").trim();return t.length>0?t.split(/\s+/):[]},x=function(n){return i.bind(n,function(n){return c.isArray(n)?x(n):O(n)})},S=function(n){var t=void 0!==n.toolbar?n.toolbar:w;return c.isArray(t)?x(t):O(t)};return{identify:S,setup:function(r,i){var u=function(n){return function(){return g.forToolbarCommand(i,n)}},c=function(n){return function(){return g.forToolbarStateCommand(i,n)}},s=function(n,t,e){return function(){return g.forToolbarStateAction(i,n,t,e)}},f=u("undo"),w=u("redo"),O=c("bold"),x=c("italic"),S=c("underline"),T=u("removeformat"),k=function(){return y.sketch(r,i)},C=s("unlink","link",function(){i.execCommand("unlink",null,!1)}),E=function(){return h.sketch(i)},D=s("unordered-list","ul",function(){i.execCommand("InsertUnorderedList",null,!1)}),A=s("ordered-list","ol",function(){i.execCommand("InsertOrderedList",null,!1)}),R=function(){return v.sketch(r,i)},F=function(){return p.sketch(r,i)},M=b.register(i,i.settings),B=function(){return b.ui(i,M,function(){i.fire("scrollIntoView")})},I=function(){return g.forToolbar("style-formats",function(n){i.fire("toReading"),r.dropup().appear(B,e.on,n)},n.derive([e.config({toggleClass:m.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),t.config({channels:o.wrapAll([l.receive(d.orientationChanged(),e.off),l.receive(d.dropupDismissed(),e.off)])})]))},z=function(n,t){return{isSupported:function(){return n.forall(function(n){return o.hasKey(i.buttons,n)})},sketch:t}};return{undo:z(a.none(),f),redo:z(a.none(),w),bold:z(a.none(),O),italic:z(a.none(),x),underline:z(a.none(),S),removeformat:z(a.none(),T),link:z(a.none(),k),unlink:z(a.none(),C),image:z(a.none(),E),bullist:z(a.some("bullist"),D),numlist:z(a.some("numlist"),A),fontsizeselect:z(a.none(),R),forecolor:z(a.none(),F),styleselect:z(a.none(),I)}},detect:function(n,t){var e=S(n),r={};return i.bind(e,function(n){var e=!o.hasKey(r,n)&&o.hasKey(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return r[n]=!0,e})}}}),i("3o",["6","a"],function(n,t){var e=function(t,e,r,o,i,u,a){return{target:n.constant(t),x:n.constant(e),y:n.constant(r),stop:o,prevent:i,kill:u,raw:n.constant(a)}},r=function(r,o){return function(i){if(r(i)){var u=t.fromDom(i.target),a=function(){i.stopPropagation()
},c=function(){i.preventDefault()},s=n.compose(c,a),f=e(u,i.clientX,i.clientY,a,c,s,i);o(f)}}},o=function(t,e,o,u,a){var c=r(o,u);return t.dom().addEventListener(e,c,a),{unbind:n.curry(i,t,e,c,a)}},i=function(n,t,e,r){n.dom().removeEventListener(t,e,r)};return{bind:function(n,t,e,r){return o(n,t,e,r,!1)},capture:function(n,t,e,r){return o(n,t,e,r,!0)}}}),i("1u",["6","3o"],function(n,t){var e=n.constant(!0);return{bind:function(n,r,o){return t.bind(n,r,e,o)},capture:function(n,r,o){return t.capture(n,r,e,o)}}}),u("1v",clearInterval),u("1x",setInterval),i("j",["6","z","7","1u","a","1v","1w","1x"],function(n,t,e,r,o,i,u,a){var c=50,s=1e3/c,f=function(t){var e=t.matchMedia("(orientation: portrait)").matches;return{isPortrait:n.constant(e)}};return{get:f,onChange:function(n,e){var u=o.fromDom(n),l=null,d=function(){i(l);var t=f(n);e.onChange(t),g(function(){e.onReady(t)})},m=r.bind(u,"orientationchange",d),g=function(e){i(l);var r=n.innerHeight,o=0;l=a(function(){r!==n.innerHeight?(i(l),e(t.some(n.innerHeight))):o>s&&(i(l),e(t.none())),o++},c)};return{onAdjustment:g,destroy:function(){m.unbind()}}},getActualWidth:function(n){var t=e.detect().os.isiOS(),r=f(n).isPortrait();return t&&!r?n.screen.height:n.screen.width}}}),u("86",clearTimeout),i("9e",["86","1j"],function(n,t){return function(e,r){var o=null;return{cancel:function(){null!==o&&(n(o),o=null)},schedule:function(){var n=arguments;o=t(function(){e.apply(null,n),o=null},r)}}}}),i("8c",["9e","2g","t","14","5","6","z","1a","1w"],function(n,t,e,r,o,i,u,a,c){var s=5,f=400,l=function(n){return void 0===n.raw().touches||1!==n.raw().touches.length?u.none():u.some(n.raw().touches[0])},d=function(n,t){var e=c.abs(n.clientX-t.x()),r=c.abs(n.clientY-t.y());return e>s||r>s};return{monitor:function(c){var s=o(u.none()),m=n(function(n){s.set(u.none()),c.triggerEvent(e.longpress(),n)},f),g=function(n){return l(n).each(function(t){m.cancel();var e={x:i.constant(t.clientX),y:i.constant(t.clientY),target:n.target};m.schedule(e),s.set(u.some(e))}),u.none()},p=function(n){return m.cancel(),l(n).each(function(n){s.get().each(function(t){d(n,t)&&s.set(u.none())})}),u.none()},v=function(n){m.cancel();var t=function(t){return a.eq(t.target(),n.target())};return s.get().filter(t).map(function(){return c.triggerEvent(e.tap(),n)})},h=r.wrapAll([{key:t.touchstart(),value:g},{key:t.touchmove(),value:p},{key:t.touchend(),value:v}]);return{fireIfReady:function(n,t){return r.readOptFrom(h,t).bind(function(t){return t(n)})}}}}}),i("81",["8c","1u"],function(n,t){return{monitor:function(e){var r=n.monitor({triggerEvent:function(n,t){e.onTapContent(t)}});return{fireTouchstart:function(n){r.fireIfReady(n,"touchstart")},onTouchend:function(){return t.bind(e.body(),"touchend",function(n){r.fireIfReady(n,"touchend")})},onTouchmove:function(){return t.bind(e.body(),"touchmove",function(n){r.fireIfReady(n,"touchmove")})}}}}}),i("5x",["1g","y","6","7","1a","8","1u","a","b","10","81"],function(n,t,e,r,o,i,u,a,c,s,f){var l=r.detect().os.version.major>=6;return{initEvents:function(r,d,m){var g=f.monitor(r),p=s.owner(d),v=function(n){return!o.eq(n.start(),n.finish())||n.soffset()!==n.foffset()},h=function(){return i.active(p).filter(function(n){return"input"===c.name(n)}).exists(function(n){return n.dom().selectionStart!==n.dom().selectionEnd})},y=function(){var t=r.doc().dom().hasFocus()&&r.getSelection().exists(v);m.getByDom(d).each(!0===(t||h())?n.on:n.off)},b=[u.bind(r.body(),"touchstart",function(n){r.onTouchContent(),g.fireTouchstart(n)}),g.onTouchmove(),g.onTouchend(),u.bind(d,"touchstart",function(){r.onTouchToolstrip()}),r.onToReading(function(){i.blur(r.body())}),r.onToEditing(e.noop),r.onScrollToCursor(function(n){n.preventDefault(),r.getCursorBox().each(function(n){var t=r.win(),e=n.top()>t.innerHeight||n.bottom()>t.innerHeight?n.bottom()-t.innerHeight+50:0;0!==e&&t.scrollTo(t.pageXOffset,t.pageYOffset+e)})})].concat(!0===l?[]:[u.bind(a.fromDom(r.win()),"blur",function(){m.getByDom(d).each(n.off)}),u.bind(p,"select",y),u.bind(r.doc(),"selectionchange",y)]);return{destroy:function(){t.each(b,function(n){n.unbind()})}}}}}),i("82",["y","6","8","a","b","1j"],function(n,t,e,r,o,i){var u=function(){return function(n){i(function(){n()},0)}};return{resume:function(i){i.focus();var a=r.fromDom(i.document.body);(e.active().exists(function(t){return n.contains(["input","textarea"],o.name(t))})?u(a):t.apply)(function(){e.active().each(e.blur),e.focus(a)})}}}),u("9f",isNaN),u("8h",parseInt),i("83",["4i","9f","8h"],function(n,t,e){return{safeParse:function(r,o){var i=e(n.get(r,o),10);return t(i)?0:i}}}),i("aa",["7","z","v"],function(n,t,e){return function(r,o){var i=function(n){if(!r(n))throw new e("Can only get "+o+" value of a "+o+" node");return s(n).getOr("")},u=function(n){try{return a(n)}catch(n){return t.none()}},a=function(n){return r(n)?t.from(n.dom().nodeValue):t.none()},c=n.detect().browser,s=c.isIE()&&10===c.version.major?u:a;return{get:i,getOption:s,set:function(n,t){if(!r(n))throw new e("Can only set raw "+o+" value of a "+o+" node");n.dom().nodeValue=t}}}}),i("a3",["b","aa"],function(n,t){var e=t(n.isText,"text");return{get:function(n){return e.get(n)},getOption:function(n){return e.getOption(n)},set:function(n,t){e.set(n,t)}}}),i("9g",["y","b","a3","10"],function(n,t,e,r){var o=function(n){return"img"===t.name(n)?1:e.getOption(n).fold(function(){return r.children(n).length},function(n){return n.length})},i="\xa0",u=function(n){return e.getOption(n).filter(function(n){return 0!==n.trim().length||n.indexOf(i)>-1}).isSome()},a=["img","br"];return{getEnd:o,isEnd:function(n,t){return o(n)===t},isStart:function(n,t){return 0===t},isCursorPosition:function(e){return u(e)||n.contains(a,t.name(e))}}}),i("a4",["6k","6"],function(n,t){var e=n.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),r=function(n,t,e,r){return n.fold(t,e,r)},o=function(n){return n.fold(t.identity,t.identity,t.identity)};return{before:e.before,on:e.on,after:e.after,cata:r,getStart:o}}),i("9h",["6k","2o","a","10","a4"],function(n,t,e,r,o){var i=n.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),u=t.immutable("start","soffset","finish","foffset"),a=function(n){return i.exact(n.start(),n.soffset(),n.finish(),n.foffset())},c=function(n){return n.match({domRange:function(n){return e.fromDom(n.startContainer)},relative:function(n){return o.getStart(n)},exact:function(n){return n}})},s=function(n){var t=c(n);return r.defaultView(t)};return{domRange:i.domRange,relative:i.relative,exact:i.exact,exactFromRange:a,range:u,getWin:s}}),i("9i",["1a","a","10"],function(n,t,e){var r=function(n,t,r,o){var i=e.owner(n).dom().createRange();return i.setStart(n.dom(),t),i.setEnd(r.dom(),o),i};return{after:function(t,e,o,i){var u=r(t,e,o,i),a=n.eq(t,o)&&e===i;return u.collapsed&&!a},commonAncestorContainer:function(n,e,o,i){var u=r(n,e,o,i);return t.fromDom(u.commonAncestorContainer)}}}),i("9j",["y","a","1b"],function(n,t,e){return{fromElements:function(r,o){var i=(o||e).createDocumentFragment();return n.each(r,function(n){i.appendChild(n.dom())}),t.fromDom(i)}}}),i("9k",["6","z","1a","a"],function(n,t,e,r){var o=function(n,t){var e=n.document.createRange();return i(e,t),e},i=function(n,t){n.selectNodeContents(t.dom())},u=function(n,t){t.fold(function(t){n.setStartBefore(t.dom())},function(t,e){n.setStart(t.dom(),e)},function(t){n.setStartAfter(t.dom())})},a=function(n,t){t.fold(function(t){n.setEndBefore(t.dom())},function(t,e){n.setEnd(t.dom(),e)},function(t){n.setEndAfter(t.dom())})},c=function(n,t){s(n),n.insertNode(t.dom())},s=function(n){n.deleteContents()},f=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}};return{create:function(n){return n.document.createRange()},replaceWith:c,selectNodeContents:o,selectNodeContentsUsing:i,isCollapsed:function(n,t,r,o){return e.eq(n,r)&&t===o},relativeToNative:function(n,t,e){var r=n.document.createRange();return u(r,t),a(r,e),r},exactToNative:function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},deleteContents:s,cloneFragment:function(n){var t=n.cloneContents();return r.fromDom(t)},getFirstRect:function(n){var e=n.getClientRects(),r=e.length>0?e[0]:n.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(f):t.none()},getBounds:function(n){var e=n.getBoundingClientRect();return e.width>0||e.height>0?t.some(e).map(f):t.none()},isWithin:function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&t.compareBoundaryPoints(n.START_TO_END,n)>-1},toString:function(n){return n.toString()}}}),i("9l",["6k","6","z","17","a","9k"],function(n,t,e,r,o,i){var u=n.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),a=function(n,t,e){return t(o.fromDom(e.startContainer),e.startOffset,o.fromDom(e.endContainer),e.endOffset)},c=function(n,o){return o.match({domRange:function(n){return{ltr:t.constant(n),rtl:e.none}},relative:function(t,o){return{ltr:r.cached(function(){return i.relativeToNative(n,t,o)}),rtl:r.cached(function(){return e.some(i.relativeToNative(n,o,t))})}},exact:function(t,o,u,a){return{ltr:r.cached(function(){return i.exactToNative(n,t,o,u,a)}),rtl:r.cached(function(){return e.some(i.exactToNative(n,u,a,t,o))})}}})},s=function(n,t){var e=t.ltr();if(e.collapsed){return t.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return u.rtl(o.fromDom(n.endContainer),n.endOffset,o.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return a(n,u.ltr,e)})}return a(n,u.ltr,e)},f=function(n,t){var e=c(n,t);return s(n,e)},l=function(n,t){return f(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),e),i}})};return{ltr:u.ltr,rtl:u.rtl,diagnose:f,asLtrRange:l}}),i("ab",["1w"],function(n){return{inRect:function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},searchForPoint:function(t,e,r,o,i){if(0===i)return 0;if(e===o)return i-1;for(var u=o,a=1;a<i;a++){var c=t(a),s=n.abs(e-c.left);if(r>c.bottom);else{if(r<c.top||s>u)return a-1;u=s}}return 0}}}),i("ac",["z","15","a3","ab","1w"],function(n,t,e,r){var o=function(n,t,o,i,u){var a=function(e){var r=n.dom().createRange();return r.setStart(t.dom(),e),r.collapse(!0),r},c=function(n){return a(n).getBoundingClientRect()},s=e.get(t).length,f=r.searchForPoint(c,o,i,u.right,s);return a(f)};return{locate:function(e,i,u,a){var c=e.dom().createRange();c.selectNode(i.dom());var s=c.getClientRects();return t.findMap(s,function(t){return r.inRect(t,u,a)?n.some(t):n.none()}).map(function(n){return o(e,i,u,a,n)})}}}),i("a5",["z","15","b","10","ab","ac","1w"],function(n,t,e,r,o,i,u){var a=function(e,i,u,a){var s=e.dom().createRange(),f=r.children(i);return t.findMap(f,function(t){return s.selectNode(t.dom()),o.inRect(s.getBoundingClientRect(),u,a)?c(e,t,u,a):n.none()})},c=function(n,t,r,o){return(e.isText(t)?i.locate:a)(n,t,r,o)};return{locate:function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=u.max(i.left,u.min(i.right,e)),s=u.max(i.top,u.min(i.bottom,r));return c(n,t,a,s)}}}),i("ad",["z","2u","10","9g"],function(n,t,e,r){var o=function(n){return i(n,r.isCursorPosition)},i=function(t,r){var o=function(t){for(var i=e.children(t),u=i.length-1;u>=0;u--){var a=i[u];if(r(a))return n.some(a);var c=o(a);if(c.isSome())return c}return n.none()};return o(t)};return{first:function(n){return t.descendant(n,r.isCursorPosition)},last:o}}),i("a6",["z","10","ad"],function(n,t,e){var r=!0,o=!1,i=function(n,t){return t-n.left<n.right-t?r:o},u=function(n,t,e){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(e),r},a=function(n,t,o){var a=n.dom().createRange();a.selectNode(t.dom());var c=a.getBoundingClientRect(),s=i(c,o);return(s===r?e.first:e.last)(t).map(function(t){return u(n,t,s)})},c=function(t,e,r){var o=e.dom().getBoundingClientRect(),a=i(o,r);return n.some(u(t,e,a))};return{search:function(n,e,r){return(0===t.children(e).length?c:a)(n,e,r)}}}),i("9m",["z","a","10","9h","a5","a6","1b","1w"],function(n,t,e,r,o,i,u,a){var c=function(t,e,r){return n.from(t.dom().caretPositionFromPoint(e,r)).bind(function(e){if(null===e.offsetNode)return n.none();var r=t.dom().createRange();return r.setStart(e.offsetNode,e.offset),r.collapse(),n.some(r)})},s=function(t,e,r){return n.from(t.dom().caretRangeFromPoint(e,r))},f=function(n,t,e,r){var i=n.dom().createRange();i.selectNode(t.dom());var u=i.getBoundingClientRect(),c=a.max(u.left,a.min(u.right,e)),s=a.max(u.top,a.min(u.bottom,r));return o.locate(n,t,c,s)},l=function(n,r,o){return t.fromPoint(n,r,o).bind(function(t){var u=function(){return i.search(n,t,r)};return 0===e.children(t).length?u():f(n,t,r,o).orThunk(u)})},d=u.caretPositionFromPoint?c:u.caretRangeFromPoint?s:l;return{fromPoint:function(n,e,o){var i=t.fromDom(n.document);return d(i,e,o).map(function(n){return r.range(t.fromDom(n.startContainer),n.startOffset,t.fromDom(n.endContainer),n.endOffset)})}}}),i("9n",["y","a","b","5l","2r","9k","9l"],function(n,t,e,r,o,i,u){var a=function(t,e,u,a){var c=i.create(t),s=(o.is(e,a)?[e]:[]).concat(r.descendants(e,a));return n.filter(s,function(n){return i.selectNodeContentsUsing(c,n),i.isWithin(u,c)})};return{find:function(n,r,o){var i=u.asLtrRange(n,r),c=t.fromDom(i.commonAncestorContainer);return e.isElement(c)?a(n,c,i,o):[]}}}),i("9o",["y","a","b","9h","a4"],function(n,t,e,r,o){var i=function(t,r){var i=e.name(t);return"input"===i?o.after(t):n.contains(["br","img"],i)?0===r?o.before(t):o.after(t):o.on(t,r)},u=function(n,t){var e=n.fold(o.before,i,o.after),u=t.fold(o.before,i,o.after);return r.relative(e,u)},a=function(n,t,e,o){var u=i(n,t),a=i(e,o);return r.relative(u,a)};return{beforeSpecial:i,preprocess:function(n){return n.match({domRange:function(n){var e=t.fromDom(n.startContainer),r=t.fromDom(n.endContainer);return a(e,n.startOffset,r,n.endOffset)},relative:u,exact:a})},preprocessRelative:u,preprocessExact:a}}),i("85",["z","9i","a","9j","10","9h","9k","9l","9m","9n","9o"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(t,e){n.from(t.getSelection()).each(function(n){n.removeAllRanges(),n.addRange(e)})},d=function(n,t,e,r,o){var i=u.exactToNative(n,t,e,r,o);l(n,i)},m=function(n,t){return a.diagnose(n,t).match({ltr:function(t,e,r,o){d(n,t,e,r,o)},rtl:function(t,e,r,o){var i=n.getSelection();i.extend?(i.collapse(t.dom(),e),i.extend(r.dom(),o)):d(n,r,o,t,e)}})},g=function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return n.some(i.range(e.fromDom(r.startContainer),r.startOffset,e.fromDom(o.endContainer),o.endOffset))}return n.none()},p=function(r){var o=e.fromDom(r.anchorNode),u=e.fromDom(r.focusNode);return t.after(o,r.anchorOffset,u,r.focusOffset)?n.some(i.range(e.fromDom(r.anchorNode),r.anchorOffset,e.fromDom(r.focusNode),r.focusOffset)):g(r)},v=function(t){var e=t.getSelection();return e.rangeCount>0?p(e):n.none()};return{setExact:function(n,t,e,r,o){var i=f.preprocessExact(t,e,r,o);m(n,i)},getExact:v,get:function(n){return v(n).map(function(n){return i.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},setRelative:function(n,t,e){var r=f.preprocessRelative(t,e);m(n,r)},toNative:function(n){var t=i.getWin(n).dom(),e=function(n,e,r,o){return u.exactToNative(t,n,e,r,o)},r=f.preprocess(n);return a.diagnose(t,r).match({ltr:e,rtl:e})},setToElement:function(n,t){var e=u.selectNodeContents(n,t);l(n,e)},clear:function(n){n.getSelection().removeAllRanges()},clone:function(n,t){var e=a.asLtrRange(n,t);return u.cloneFragment(e)},replace:function(n,t,e){var o=a.asLtrRange(n,t),i=r.fromElements(e,n.document);u.replaceWith(o,i)},deleteAt:function(n,t){var e=a.asLtrRange(n,t);u.deleteContents(e)},forElement:function(n,t){var r=u.selectNodeContents(n,t);return i.range(e.fromDom(r.startContainer),r.startOffset,e.fromDom(r.endContainer),r.endOffset)},getFirstRect:function(n,t){var e=a.asLtrRange(n,t);return u.getFirstRect(e)},getBounds:function(n,t){var e=a.asLtrRange(n,t);return u.getBounds(e)},getAtPoint:function(n,t,e){return c.fromPoint(n,t,e)},findWithin:function(n,t,e){return s.find(n,t,e)},getAsString:function(n,t){var e=a.asLtrRange(n,t);return u.toString(e)}}}),i("84",["y","6","a","10","9g","9h","85"],function(n,t,e,r,o,i,u){var a=2,c=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:t.constant(a),height:n.height}},s=function(n){return{left:t.constant(n.left),top:t.constant(n.top),right:t.constant(n.right),bottom:t.constant(n.bottom),width:t.constant(n.width),height:t.constant(n.height)}},f=function(t){if(t.collapsed){var a=e.fromDom(t.startContainer);return r.parent(a).bind(function(e){var r=i.exact(a,t.startOffset,e,o.getEnd(e));return u.getFirstRect(t.startContainer.ownerDocument.defaultView,r).map(c).map(n.pure)}).getOr([])}return n.map(t.getClientRects(),s)};return{getRectangles:function(n){var t=n.getSelection();return void 0!==t&&t.rangeCount>0?f(t.getRangeAt(0)):[]}}}),i("5y",["6","z","1u","a","4i","1w","82","i","83","84"],function(n,t,e,r,o,i,u,a,c,s){var f=50,l="data-"+a.resolve("last-outer-height"),d=function(n,t){o.set(n,l,t)},m=function(n){return c.safeParse(n,l)},g=function(t){return{top:n.constant(t.top()),bottom:n.constant(t.top()+t.height())}},p=function(n){var e=s.getRectangles(n);return e.length>0?t.some(e[0]).map(g):t.none()},v=function(n,e){var r=m(e),o=n.innerHeight;return r>o?t.some(r-o):t.none()},h=function(n,t,e){return t.top()>n.innerHeight||t.bottom()>n.innerHeight?i.min(e,t.bottom()-n.innerHeight+f):0};return{setup:function(n,t){var o=r.fromDom(t.document.body),i=function(){u.resume(t)},a=e.bind(r.fromDom(n),"resize",function(){v(n,o).each(function(n){p(t).each(function(e){var r=h(t,e,n);0!==r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)})}),d(o,n.innerHeight)});d(o,n.innerHeight);return{toEditing:i,destroy:function(){a.unbind()}}}}}),i("5z",["6","z","1a","1u","a","85"],function(n,t,e,r,o,i){var u=function(n){return t.some(o.fromDom(n.dom().contentWindow.document.body))},a=function(n){return t.some(o.fromDom(n.dom().contentWindow.document))},c=function(n){return t.from(n.dom().contentWindow)},s=function(n){return c(n).bind(i.getExact)},f=function(n){return n.getFrame()},l=function(n,t){return function(e){return e[n].getOrThunk(function(){var n=f(e);return function(){return t(n)}})()}},d=function(n,t,e,o){return n[e].getOrThunk(function(){return function(n){return r.bind(t,o,n)}})},m=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},g=function(r){var l=f(r),g=function(n){var r=function(n){return e.eq(n.start(),n.finish())&&n.soffset()===n.foffset()},o=function(n){var e=n.start().dom().getBoundingClientRect();return e.width>0||e.height>0?t.some(e).map(m):t.none()};return i.getExact(n).filter(r).bind(o)};return u(l).bind(function(t){return a(l).bind(function(e){return c(l).map(function(u){var a=o.fromDom(e.dom().documentElement),c=r.getCursorBox.getOrThunk(function(){return function(){return i.get(u).bind(function(n){return i.getFirstRect(u,n).orThunk(function(){return g(u)})})}}),f=r.setSelection.getOrThunk(function(){return function(n,t,e,r){i.setExact(u,n,t,e,r)}}),m=r.clearSelection.getOrThunk(function(){return function(){i.clear(u)}});return{body:n.constant(t),doc:n.constant(e),win:n.constant(u),html:n.constant(a),getSelection:n.curry(s,l),setSelection:f,clearSelection:m,frame:n.constant(l),onKeyup:d(r,e,"onKeyup","keyup"),onNodeChanged:d(r,e,"onNodeChanged","selectionchange"),onDomChanged:r.onDomChanged,onScrollToCursor:r.onScrollToCursor,onScrollToElement:r.onScrollToElement,onToReading:r.onToReading,onToEditing:r.onToEditing,onToolbarScrollStart:r.onToolbarScrollStart,onTouchContent:r.onTouchContent,onTapContent:r.onTapContent,onTouchToolstrip:r.onTouchToolstrip,getCursorBox:c}})})})};return{getBody:l("getBody",u),getDoc:l("getDoc",a),getWin:l("getWin",c),getSelection:l("getSelection",s),getFrame:f,getActiveApi:g}}),i("60",["y","7","4i","39","5l"],function(n,t,e,r,o){var i="data-ephox-mobile-fullscreen-style",u="display:none!important;",a="position:absolute!important;",c="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",s="background-color:rgb(255,255,255)!important;",f=t.detect().os.isAndroid(),l=function(n){var t=r.get(n,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":s};return{clobberStyles:function(t,r){var s=function(n){return o.siblings(n,"*")},d=function(n){return function(t){var r=e.get(t,"style"),o=void 0===r?"no-styles":r.trim();o!==n&&(e.set(t,i,o),e.set(t,"style",n))}},m=o.ancestors(t,"*"),g=n.bind(m,s),p=l(r);n.each(g,d(u)),n.each(m,d(a+c+p));d((!0===f?"":a)+c+p)(t)},restoreStyles:function(){var t=o.all("["+i+"]");n.each(t,function(n){var t=e.get(n,i);"no-styles"!==t?e.set(n,"style",t):e.remove(n,"style"),e.remove(n,i)})}}}),i("61",["9","a","4i","4u"],function(n,t,e,r){return{tag:function(){var o=r.first("head").getOrDie(),i=function(){var r=t.fromTag("meta");return e.set(r,"name","viewport"),n.append(o,r),r},u=r.first('meta[name="viewport"]').getOrThunk(i),a=e.get(u,"content");return{maximize:function(){e.set(u,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){void 0!==a&&null!==a&&a.length>0?e.set(u,"content",a):e.set(u,"content","user-scalable=yes")}}}}}),i("3r",["1z","2f","5x","5y","5z","60","i","61"],function(n,t,e,r,o,i,u,a){return{create:function(c,s){var f=a.tag(),l=n.api(),d=n.api();return{enter:function(){s.hide(),t.add(c.container,u.resolve("fullscreen-maximized")),t.add(c.container,u.resolve("android-maximized")),f.maximize(),t.add(c.body,u.resolve("android-scroll-reload")),l.set(r.setup(c.win,o.getWin(c.editor).getOrDie("no"))),o.getActiveApi(c.editor).each(function(n){i.clobberStyles(c.container,n.body()),d.set(e.initEvents(n,c.toolstrip,c.alloy))})},exit:function(){f.restore(),s.show(),t.remove(c.container,u.resolve("fullscreen-maximized")),t.remove(c.container,u.resolve("android-maximized")),i.restoreStyles(),t.remove(c.body,u.resolve("android-scroll-reload")),d.clear(),l.clear()}}}}}),i("3s",["29","2e","6","a","10","1k"],function(n,t,e,r,o){return t.objOf([n.strictObjOf("editor",[n.strict("getFrame"),n.option("getBody"),n.option("getDoc"),n.option("getWin"),n.option("getSelection"),n.option("setSelection"),n.option("clearSelection"),n.option("cursorSaver"),n.option("onKeyup"),n.option("onNodeChanged"),n.option("getCursorBox"),n.strict("onDomChanged"),n.defaulted("onTouchContent",e.noop),n.defaulted("onTapContent",e.noop),n.defaulted("onTouchToolstrip",e.noop),n.defaulted("onScrollToCursor",e.constant({unbind:e.noop})),n.defaulted("onScrollToElement",e.constant({unbind:e.noop})),n.defaulted("onToEditing",e.constant({unbind:e.noop})),n.defaulted("onToReading",e.constant({unbind:e.noop})),n.defaulted("onToolbarScrollStart",e.identity)]),n.strict("socket"),n.strict("toolstrip"),n.strict("dropup"),n.strict("toolbar"),n.strict("container"),n.strict("alloy"),n.state("win",function(n){return o.owner(n.socket).dom().defaultView}),n.state("body",function(n){return r.fromDom(n.socket.dom().ownerDocument.body)}),n.defaulted("translate",e.identity),n.defaulted("setReadOnly",e.noop)])}),i("62",["86","1j"],function(n,t){return{adaptable:function(e,r){var o=null,i=null;return{cancel:function(){null!==o&&(n(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){e.apply(null,i),o=null,i=null},r))}}},first:function(e,r){var o=null;return{cancel:function(){null!==o&&(n(o),o=null)},throttle:function(){var n=arguments;null===o&&(o=t(function(){e.apply(null,n),o=null,n=null},r))}}},last:function(e,r){var o=null;return{cancel:function(){null!==o&&(n(o),o=null)},throttle:function(){var i=arguments;null!==o&&n(o),o=t(function(){e.apply(null,i),o=null,i=null},r)}}}}}),i("3t",["q","1g","1h","1n","3v","62","1j","i","1o"],function(n,t,e,r,o,i,u,a,c){return{sketch:function(u){var s=e.record(o.sketch({dom:c.dom('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:n.derive([t.config({toggleClass:a.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),f=i.first(u,200);return o.sketch({dom:c.dom('<div class="${prefix}-disabled-mask"></div>'),components:[o.sketch({dom:c.dom('<div class="${prefix}-content-container"></div>'),components:[r.sketch({dom:c.dom('<div class="${prefix}-content-tap-section"></div>'),components:[s.asSpec()],action:function(){f.throttle()},buttonBehaviours:n.derive([t.config({toggleClass:a.resolve("mask-tap-icon-selected")})])})]})]})}}}),i("20",["3q","2e","6","9","39","3r","3s","3t"],function(n,t,e,r,o,i,u,a){return{produce:function(c){var s=t.asRawOrDie("Getting AndroidWebapp schema",u,c);o.set(s.toolstrip,"width","100%");var f=function(){s.setReadOnly(!0),m.enter()},l=n.build(a.sketch(f,s.translate));s.alloy.add(l);var d={show:function(){s.alloy.add(l)},hide:function(){s.alloy.remove(l)}};r.append(s.container,l.element());var m=i.create(s,d);return{setReadOnly:s.setReadOnly,refreshStructure:e.noop,enter:m.enter,exit:m.exit,destroy:e.noop}}}}),i("63",["q","1y","4q","53","29","6"],function(n,t,e,r,o,i){var u=[o.defaulted("shell",!0),o.defaulted("toolbarBehaviours",{})],a=function(){return{behaviours:n.derive([t.config({})])}},c=[r.optional({name:"groups",overrides:a})];return{name:i.constant("Toolbar"),schema:i.constant(u),parts:i.constant(c)}}),i("3w",["q","1y","34","52","63","w","z","16","v"],function(n,t,e,r,o,i,u,a,c){var s=function(e,o){var s=function(n,e){f(n).fold(function(){throw a.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new c("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(n){t.set(n,e)})},f=function(n){return e.shell()?u.some(n):r.getPart(n,e,"groups")},l=e.shell()?{behaviours:[t.config({})],components:[]}:{behaviours:[],components:o};return{uid:e.uid(),dom:e.dom(),components:l.components,behaviours:i.deepMerge(n.derive(l.behaviours),e.toolbarBehaviours()),apis:{setGroups:s},domModification:{attributes:{role:"group"}}}};return e.composite({name:"Toolbar",configFields:o.schema(),partFields:o.parts(),factory:s,apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}})}),i("65",["4q","53","29","6"],function(n,t,e,r){var o=[e.strict("items"),n.markers(["itemClass"]),e.defaulted("hasTabstop",!0),e.defaulted("tgroupBehaviours",{})],i=[t.group({name:"items",unit:"item",overrides:function(n){return{domModification:{classes:[n.markers().itemClass()]}}}})];return{name:r.constant("ToolbarGroup"),schema:r.constant(o),parts:r.constant(i)}}),i("3x",["q","33","64","34","65","w","v"],function(n,t,e,r,o,i){var u=function(r,o,u){return i.deepMerge({dom:{attributes:{role:"toolbar"}}},{uid:r.uid(),dom:r.dom(),components:o,behaviours:i.deepMerge(n.derive([t.config({mode:"flow",selector:"."+r.markers().itemClass()}),r.hasTabstop()?e.config({}):e.revoke()]),r.tgroupBehaviours()),"debug.sketcher":u["debug.sketcher"]})};return r.composite({name:"ToolbarGroup",configFields:o.schema(),partFields:o.parts(),factory:u})}),i("3y",["6","1u","4i","4u","i"],function(n,t,e,r,o){var i="data-"+o.resolve("horizontal-scroll"),u=function(n){n.dom().scrollTop=1;var t=0!==n.dom().scrollTop;return n.dom().scrollTop=0,t},a=function(n){n.dom().scrollLeft=1;var t=0!==n.dom().scrollLeft;return n.dom().scrollLeft=0,t},c=function(n){return n.dom().scrollTop>0||u(n)},s=function(n){return n.dom().scrollLeft>0||a(n)},f=function(n){return"true"===e.get(n,i)?s:c};return{exclusive:function(e,o){return t.bind(e,"touchmove",function(t){r.closest(t.target(),o).filter(f).fold(function(){t.raw().preventDefault()},n.noop)})},markAsHorizontal:function(n){e.set(n,i,"true")}}}),i("21",["3u","q","33","1g","3q","3d","3v","3w","3x","y","5","6","39","3y","i","3z","1o"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v){return function(){var h=function(e){var r=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:v.dom('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+r+'"></div>'),tgroupBehaviours:t.derive([n.config("adhoc-scrollable-toolbar",!0===e.scrollable?[i.runOnInit(function(n){d.set(n.element(),"overflow-x","auto"),m.markAsHorizontal(n.element()),p.register(n.element())})]:[])]),components:[u.sketch({components:[c.parts().items({})]})],markers:{itemClass:g.resolve("toolbar-group-item")},items:e.items}},y=o.build(a.sketch({dom:v.dom('<div class="${prefix}-toolbar"></div>'),components:[a.parts().groups({})],toolbarBehaviours:t.derive([r.config({toggleClass:g.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),e.config({mode:"cyclic"})]),shell:!0})),b=o.build(u.sketch({dom:{classes:[g.resolve("toolstrip")]},components:[o.premade(y)],containerBehaviours:t.derive([r.config({toggleClass:g.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),w=function(){a.setGroups(y,O.get()),r.off(y)},O=f([]),x=function(n){O.set(n),w()},S=function(n){return s.map(n,l.compose(c.sketch,h))},T=function(){a.refresh(y)},k=function(n){r.on(y),a.setGroups(y,n)},C=function(){r.isOn(y)&&w()},E=function(){e.focusIn(y)};return{wrapper:l.constant(b),toolbar:l.constant(y),createGroups:S,setGroups:x,setContextToolbar:k,restoreToolbar:C,refresh:T,focus:E}}}),i("22",["q","1y","1","3q","1n","3v","6","2f","i","1o"],function(n,t,e,r,o,i,u,a,c,s){var f=function(n,e){t.append(n,r.premade(e))},l=function(n,e){t.remove(n,e)};return{makeEditSwitch:function(n){return r.build(o.sketch({dom:s.dom('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))},makeSocket:function(){return r.build(i.sketch({dom:s.dom('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:n.derive([t.config({})])}))},updateMode:function(n,t,r,o){(!0===r?e.toAlpha:e.toOmega)(o);(r?f:l)(n,t)}}}),i("67",["2f","89","39"],function(n,t,e){var r=function(n,t){return t.getAnimationRoot().fold(function(){return n.element()},function(t){return t(n)})},o=function(n){return n.dimension().property()},i=function(n,t){return n.dimension().getDimension()(t)},u=function(n,e){var o=r(n,e);t.remove(o,[e.shrinkingClass(),e.growingClass()])},a=function(t,r){n.remove(t.element(),r.openClass()),n.add(t.element(),r.closedClass()),e.set(t.element(),o(r),"0px"),e.reflow(t.element())},c=function(n,t){s(n,t);var e=i(t,n.element());return a(n,t),e},s=function(t,r){n.remove(t.element(),r.closedClass()),n.add(t.element(),r.openClass()),e.remove(t.element(),o(r))},f=function(n,t,r){r.setCollapsed(),e.set(n.element(),o(t),i(t,n.element())),e.reflow(n.element()),u(n,t),a(n,t),t.onStartShrink()(n),t.onShrunk()(n)},l=function(t,u,c){c.setCollapsed(),e.set(t.element(),o(u),i(u,t.element())),e.reflow(t.element());var s=r(t,u);n.add(s,u.shrinkingClass()),a(t,u),u.onStartShrink()(t)},d=function(t,i,u){var a=c(t,i),f=r(t,i);n.add(f,i.growingClass()),s(t,i),e.set(t.element(),o(i),a),u.setExpanded(),i.onStartGrow()(t)},m=function(t,e){var o=r(t,e);return!0===n.has(o,e.growingClass())},g=function(t,e){var o=r(t,e);return!0===n.has(o,e.shrinkingClass())};return{grow:function(n,t,e){e.isExpanded()||d(n,t,e)},shrink:function(n,t,e){e.isExpanded()&&l(n,t,e)},immediateShrink:function(n,t,e){e.isExpanded()&&f(n,t,e)},hasGrown:function(n,t,e){return e.isExpanded()},hasShrunk:function(n,t,e){return e.isCollapsed()},isGrowing:m,isShrinking:g,isTransitioning:function(n,t,e){return!0===m(n,t,e)||!0===g(n,t,e)},toggleGrow:function(n,t,e){(e.isExpanded()?l:d)(n,t,e)},disableTransitions:u}}),i("66",["3d","2g","67","4b","14","39"],function(n,t,e,r,o,i){return{exhibit:function(n,t){return t.expanded()?r.nu({classes:[t.openClass()],styles:{}}):r.nu({classes:[t.closedClass()],styles:o.wrap(t.dimension().property(),"0px")})},events:function(r,o){return n.derive([n.run(t.transitionend(),function(n,t){if(t.event().raw().propertyName===r.dimension().property()){e.disableTransitions(n,r,o),o.isExpanded()&&i.remove(n.element(),r.dimension().property());(o.isExpanded()?r.onGrown():r.onShrunk())(n,t)}})])}}}),i("68",["4q","29","2e","8a","5m"],function(n,t,e,r,o){return[t.strict("closedClass"),t.strict("openClass"),t.strict("shrinkingClass"),t.strict("growingClass"),t.option("getAnimationRoot"),n.onHandler("onShrunk"),n.onHandler("onStartShrink"),n.onHandler("onGrown"),n.onHandler("onStartGrow"),t.defaulted("expanded",!1),t.strictOf("dimension",e.choose("property",{
width:[n.output("property","width"),n.output("getDimension",function(n){return o.get(n)+"px"})],height:[n.output("property","height"),n.output("getDimension",function(n){return r.get(n)+"px"})]}))]}),i("69",["4g","5","6"],function(n,t,e){return{init:function(r){var o=t(r.expanded()),i=function(){return"expanded: "+o.get()};return n({isExpanded:function(){return!0===o.get()},isCollapsed:function(){return!1===o.get()},setCollapsed:e.curry(o.set,!1),setExpanded:e.curry(o.set,!0),readState:i})}}}),i("40",["q","66","67","68","69"],function(n,t,e,r,o){return n.create({fields:r,name:"sliding",active:t,apis:e,state:o})}),i("23",["q","1y","40","3q","3v","6","1k","1l","i"],function(n,t,e,r,o,i,u,a,c){return{build:function(s,f){var l=r.build(o.sketch({dom:{tag:"div",classes:c.resolve("dropup")},components:[],containerBehaviours:n.derive([t.config({}),e.config({closedClass:c.resolve("dropup-closed"),openClass:c.resolve("dropup-open"),shrinkingClass:c.resolve("dropup-shrinking"),growingClass:c.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(n){s(),f(),t.set(n,[])},onGrown:function(){s(),f()}}),a.orientation(function(){d(i.noop)})])})),d=function(n){u.requestAnimationFrame(function(){n(),e.shrink(l)})};return{appear:function(n,r,o){!0===e.hasShrunk(l)&&!1===e.isTransitioning(l)&&u.requestAnimationFrame(function(){r(o),t.set(l,[n()]),e.grow(l)})},disappear:d,component:i.constant(l),element:l.element}}}}),i("6c",["8b","t","8c","29","2e","y","7","1u","b","10","1j"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(t){return t.raw().which===n.BACKSPACE()[0]&&!i.contains(["input","textarea"],c.name(t.target()))},d=u.detect().browser.isFirefox(),m=o.objOfOnly([r.strictFunction("triggerEvent"),r.strictFunction("broadcastEvent"),r.defaulted("stopBackspace",!0)]),g=function(n,t){return d?a.capture(n,"focus",t):a.bind(n,"focusin",t)},p=function(n,t){return d?a.capture(n,"blur",t):a.bind(n,"focusout",t)};return{setup:function(n,r){var c=o.asRawOrDie("Getting GUI events settings",m,r),d=u.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],v=e.monitor(c),h=i.map(d.concat(["selectstart","input","contextmenu","change","transitionend","dragstart","dragover","drop"]),function(t){return a.bind(n,t,function(n){v.fireIfReady(n,t).each(function(t){t&&n.kill()});c.triggerEvent(t,n)&&n.kill()})}),y=a.bind(n,"keydown",function(n){c.triggerEvent("keydown",n)?n.kill():!0===c.stopBackspace&&l(n)&&n.prevent()}),b=g(n,function(n){c.triggerEvent("focusin",n)&&n.kill()}),w=p(n,function(n){c.triggerEvent("focusout",n)&&n.kill(),f(function(){c.triggerEvent(t.postBlur(),n)},0)}),O=s.defaultView(n),x=a.bind(O,"scroll",function(n){c.broadcastEvent(t.windowScroll(),n)&&n.kill()});return{unbind:function(){i.each(h,function(n){n.unbind()}),y.unbind(),b.unbind(),w.unbind(),x.unbind()}}}}}),i("8d",["14","5"],function(n,t){return{derive:function(e,r){var o=n.readOptFrom(e,"target").map(function(n){return n()}).getOr(r);return t(o)}}}),i("8e",["5","6","v"],function(n,t,e){var r=function(e,r){var o=n(!1),i=n(!1);return{stop:function(){o.set(!0)},cut:function(){i.set(!0)},isStopped:o.get,isCut:i.get,event:t.constant(e),setSource:r.set,getSource:r.get}};return{fromSource:r,fromExternal:function(r){var o=n(!1);return{stop:function(){o.set(!0)},cut:t.noop,isStopped:o.get,isCut:t.constant(!1),event:t.constant(r),setTarget:t.die(new e("Cannot set target of a broadcasted event")),getTarget:t.die(new e("Cannot get target of a broadcasted event"))}},fromTarget:function(t,e){var o=n(e);return r(t,o)}}}),i("6d",["6b","8d","8e","6k","y","10","v"],function(n,t,e,r,o,i){var u=r.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),a=function(t,r,o,a,c,s){var f=t(r,a),l=e.fromSource(o,c);return f.fold(function(){return s.logEventNoHandlers(r,a),u.complete()},function(t){var e=t.descHandler();return n.getHandler(e)(l),l.isStopped()?(s.logEventStopped(r,t.element(),e.purpose()),u.stopped()):l.isCut()?(s.logEventCut(r,t.element(),e.purpose()),u.complete()):i.parent(t.element()).fold(function(){return s.logNoParent(r,t.element(),e.purpose()),u.complete()},function(n){return s.logEventResponse(r,t.element(),e.purpose()),u.resume(n)})})},c=function(n,t,e,r,o,i){return a(n,t,e,r,o,i).fold(function(){return!0},function(r){return c(n,t,e,r,o,i)},function(){return!1})},s=function(n,t,e,r){var o=e.target();return f(n,t,e,o,r)},f=function(n,e,r,o,i){var u=t.derive(r,o);return c(n,e,r,o,u,i)};return{triggerHandler:function(n,e,r,o,i){var u=t.derive(r,o);return a(n,e,r,o,u,i)},triggerUntilStopped:s,triggerOnUntilStopped:f,broadcast:function(t,r){var i=e.fromExternal(r);return o.each(t,function(t){var e=t.descHandler();n.getHandler(e)(i)}),i.isStopped()}}}),i("9p",["2u"],function(n){return{closest:function(t,e,r){return n.closest(t,function(n){return e(n).isSome()},r).bind(e)}}}),i("8f",["9p","6b","30","14","6","x","z","2o","16"],function(n,t,e,r,o,i,u,a){var c=a.immutable("element","descHandler"),s=function(n,t){return{id:o.constant(n),descHandler:o.constant(t)}};return function(){var o={},a=function(n,t){return e.read(t).fold(function(){return u.none()},function(e){var o=r.readOpt(e);return n.bind(o).map(function(n){return c(t,n)})})};return{registerId:function(n,e,r){i.each(r,function(r,i){var u=void 0!==o[i]?o[i]:{};u[e]=t.curryArgs(r,n),o[i]=u})},unregisterId:function(n){i.each(o,function(t){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(n){return r.readOptFrom(o,n).map(function(n){return i.mapToArray(n,function(n,t){return s(t,n)})}).getOr([])},find:function(t,e,i){var u=r.readOpt(e)(o);return n.closest(i,function(n){return a(u,n)},t)}}}}),i("6e",["8f","13","30","14","12","v"],function(n,t,e,r,o,i){return function(){var u=n(),a={},c=function(n){var t=n.element();return e.read(t).fold(function(){return e.write("uid-",n.element())},function(n){return n})},s=function(n,e){var r=a[e];if(r!==n)throw new i('The tagId "'+e+'" is already used by: '+t.element(r.element())+"\nCannot use it for: "+t.element(n.element())+"\nThe conflicting element is"+(o.inBody(r.element())?" ":" not ")+"already in the DOM");f(n)},f=function(n){e.read(n.element()).each(function(n){a[n]=void 0,u.unregisterId(n)})};return{find:function(n,t,e){return u.find(n,t,e)},filter:function(n){return u.filterByType(n)},register:function(n){var t=c(n);r.hasKey(a,t)&&s(n,t);var e=[n];u.registerId(e,t,n.events()),a[t]=n},unregister:f,getById:function(n){return r.readOpt(n)(a)}}}}),i("41",["3q","t","3","6a","3v","4","6b","6c","6d","13","6e","30","y","6","48","1a","8","9","11","b","2f","10","v"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w,O,x){var S=function(){var t=n.build(o.sketch({dom:{tag:"div"}}));return T(t)},T=function(o){var s=function(n){return O.parent(o.element()).fold(function(){return!0},function(t){return p.eq(n,t)})},h=f(),w=function(n,t){return h.find(s,n,t)},S=a.setup(o.element(),{triggerEvent:function(n,t){return i.monitorEvent(n,t.target(),function(e){return c.triggerUntilStopped(w,n,t,e)})},broadcastEvent:function(n,t){var e=h.filter(n);return c.broadcast(e,t)}}),T=r({debugInfo:m.constant("real"),triggerEvent:function(n,t,e){i.monitorEvent(n,t,function(r){c.triggerOnUntilStopped(w,n,e,t,r)})},triggerFocus:function(n,e){l.read(n).fold(function(){v.focus(n)},function(){i.monitorEvent(t.focus(),n,function(r){c.triggerHandler(w,t.focus(),{originator:m.constant(e),target:m.constant(n)},n,r)})})},triggerEscape:function(n,t){T.triggerEvent("keydown",n.element(),t.event())},getByUid:function(n){return B(n)},getByDom:function(n){return I(n)},build:n.build,addToGui:function(n){E(n)},removeFromGui:function(n){D(n)},addToWorld:function(n){k(n)},removeFromWorld:function(n){C(n)},broadcast:function(n){F(n)},broadcastOn:function(n,t){M(n,t)}}),k=function(n){n.connect(T),b.isText(n.element())||(h.register(n),d.each(n.components(),k),T.triggerEvent(t.systemInit(),n.element(),{target:m.constant(n.element())}))},C=function(n){b.isText(n.element())||(d.each(n.components(),C),h.unregister(n)),n.disconnect()},E=function(n){e.attach(o,n)},D=function(n){e.detach(n)},A=function(){S.unbind(),y.remove(o.element())},R=function(n){var e=h.filter(t.receive());d.each(e,function(t){var e=t.descHandler();u.getHandler(e)(n)})},F=function(n){R({universal:m.constant(!0),data:m.constant(n)})},M=function(n,t){R({universal:m.constant(!1),channels:m.constant(n),data:m.constant(t)})},B=function(n){return h.getById(n).fold(function(){return g.error(new x('Could not find component with uid: "'+n+'" in system.'))},g.value)},I=function(n){return l.read(n).bind(B)};return k(o),{root:m.constant(o),element:o.element,destroy:A,add:E,remove:D,getByUid:B,getByDom:I,addToWorld:k,removeFromWorld:C,broadcast:F,broadcastOn:M}};return{create:S,takeover:T}}),i("24",["q","1","3q","41","3v","6","i"],function(n,t,e,r,o,i,u){var a=i.constant(u.resolve("readonly-mode")),c=i.constant(u.resolve("edit-mode"));return function(i){var s=e.build(o.sketch({dom:{classes:[u.resolve("outer-container")].concat(i.classes)},containerBehaviours:n.derive([t.config({alpha:a(),omega:c()})])}));return r.takeover(s)}}),i("k",["1y","1","6","1z","20","i","21","22","23","24"],function(n,t,e,r,o,i,u,a,c,s){return function(t){var f=s({classes:[i.resolve("android-container")]}),l=u(),d=r.api(),m=a.makeEditSwitch(d),g=a.makeSocket(),p=c.build(e.noop,t);f.add(l.wrapper()),f.add(g),f.add(p.component());var v=function(n){var t=l.createGroups(n);l.setGroups(t)},h=function(n){var t=l.createGroups(n);l.setContextToolbar(t)},y=function(){l.focus()},b=function(){l.restoreToolbar()},w=function(n){d.set(o.produce(n))},O=function(){d.run(function(t){t.exit(),n.remove(g,m)})},x=function(n){a.updateMode(g,m,n,f.root())};return{system:e.constant(f),element:f.element,init:w,exit:O,setToolbarGroups:v,setContextToolbar:h,focusToolbar:y,restoreToolbar:b,updateMode:x,socket:e.constant(g),dropup:e.constant(p)}}}),i("9q",["6"],function(n){var t=function(e,r){var o=function(n,o){return t(e+n,r+o)};return{left:n.constant(e),top:n.constant(r),translate:o}};return t}),i("9r",["6","1a","a","b","2u","1b"],function(n,t,e,r,o,i){return{attached:function(r,u){var a=u||e.fromDom(i.documentElement);return o.ancestor(r,n.curry(t.eq,a)).isSome()},windowOf:function(n){var t=n.dom();return t===t.window?n:r.isDocument(n)?t.defaultView||t.parentWindow:null}}}),i("8g",["9q","9r","a"],function(n,t,e){var r=function(t){var e=t.getBoundingClientRect();return n(e.left,e.top)},o=function(n,t){return void 0!==n?n:void 0!==t?t:0},i=function(n){var r=n.dom().ownerDocument,i=r.body,a=t.windowOf(e.fromDom(r)),c=r.documentElement,s=o(a.pageYOffset,c.scrollTop),f=o(a.pageXOffset,c.scrollLeft),l=o(c.clientTop,i.clientTop),d=o(c.clientLeft,i.clientLeft);return u(n).translate(f-d,s-l)},u=function(o){var i=o.dom(),u=i.ownerDocument,a=u.body,c=e.fromDom(u.documentElement);return a===i?n(a.offsetLeft,a.offsetTop):t.attached(o,c)?r(i):n(0,0)};return{absolute:i,relative:function(t){var e=t.dom();return n(e.offsetLeft,e.offsetTop)},viewport:u}}),i("6f",["8c","y","62","1a","1u","8a","8g","81"],function(n,t,e,r,o,i,u,a){return{initEvents:function(n,c,s,f){var l=function(){c.run(function(n){n.highlightSelection()})},d=function(){c.run(function(n){n.refreshSelection()})},m=function(n,t){var e=n-f.dom().scrollTop;c.run(function(n){n.scrollIntoView(e,e+t)})},g=function(n){var t=u.absolute(n).top(),e=i.get(n);m(c,f,t,e)},p=function(){n.getCursorBox().each(function(n){m(n.top(),n.height())})},v=function(){c.run(function(n){n.clearSelection()})},h=function(){v(),T.throttle()},y=function(){p(n,c,f),c.run(function(n){n.syncHeight()})},b=function(){var t=i.get(s);c.run(function(n){n.setViewportOffset(t)}),d(c),y(n,c,f)},w=function(){c.run(function(n){n.toEditing()})},O=function(){c.run(function(n){n.toReading()})},x=function(n){c.run(function(t){t.onToolbarTouch(n)})},S=a.monitor(n),T=e.last(y,300),k=[n.onKeyup(h),n.onNodeChanged(d),n.onDomChanged(T.throttle),n.onDomChanged(d),n.onScrollToCursor(function(n){n.preventDefault(),T.throttle()}),n.onScrollToElement(function(n){g(n.element())}),n.onToEditing(w),n.onToReading(O),o.bind(n.doc(),"touchend",function(t){r.eq(n.html(),t.target())||r.eq(n.body(),t.target())}),o.bind(s,"transitionend",function(n){"height"===n.raw().propertyName&&b()}),o.capture(s,"touchstart",function(t){l(),x(t),n.onTouchToolstrip()}),o.bind(n.body(),"touchstart",function(t){v(),n.onTouchContent(),S.fireTouchstart(t)}),S.onTouchmove(),S.onTouchend(),o.bind(n.body(),"click",function(n){n.kill()}),o.bind(s,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){t.each(k,function(n){n.unbind()})}}}}}),i("9s",["8","1j"],function(n,t){return{refreshInput:function(e){var r=e.dom().selectionStart,o=e.dom().selectionEnd,i=e.dom().selectionDirection;t(function(){e.dom().setSelectionRange(r,o,i),n.focus(e)},50)},refresh:function(n){var t=n.getSelection();if(t.rangeCount>0){var e=t.getRangeAt(0),r=n.document.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),t.removeAllRanges(),t.addRange(r)}}}}),i("8p",["1a","8","a","9s"],function(n,t,e,r){return{resume:function(o,i){t.active().each(function(e){n.eq(e,i)||t.blur(e)}),o.focus(),t.focus(e.fromDom(o.document.body)),r.refresh(o)}}}),i("8i",["y","9","2s","11","1u","a","2f","89","39","10","8p","i","84"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){return function(m,g){var p=m.document,v=i.fromTag("div");u.add(v,l.resolve("unfocused-selections")),t.append(i.fromDom(p.documentElement),v);var h=o.bind(v,"touchstart",function(n){n.prevent(),f.resume(m,g),w()}),y=function(n){var t=i.fromTag("span");return a.add(t,[l.resolve("layer-editor"),l.resolve("unfocused-selection")]),c.setAll(t,{left:n.left()+"px",top:n.top()+"px",width:n.width()+"px",height:n.height()+"px"}),t},b=function(){w();var t=d.getRectangles(m),r=n.map(t,y);e.append(v,r)},w=function(){r.empty(v)};return{update:b,isActive:function(){return s.children(v).length>0},destroy:function(){h.unbind(),r.remove(v)},clear:w}}}),i("9w",["y","z","1j"],function(n,t,e){var r=function(o){var i=t.none(),u=[],a=function(n){return r(function(t){c(function(e){t(n(e))})})},c=function(n){f()?d(n):u.push(n)},s=function(n){i=t.some(n),l(u),u=[]},f=function(){return i.isSome()},l=function(t){n.each(t,d)},d=function(n){i.each(function(t){e(function(){n(t)},0)})};return o(s),{get:c,map:a,isReady:f}};return{nu:r,pure:function(n){return r(function(t){t(n)})}}}),i("a7",["u","1j"],function(n,t){return{bounce:function(e){return function(){var r=n.prototype.slice.call(arguments),o=this;t(function(){e.apply(o,r)},0)}}}}),i("9t",["9w","a7"],function(n,t){var e=function(r){var o=function(n){r(t.bounce(n))};return{map:function(n){return e(function(t){o(function(e){var r=n(e);t(r)})})},bind:function(n){return e(function(t){o(function(e){n(e).get(t)})})},anonBind:function(n){return e(function(t){o(function(){n.get(t)})})},toLazy:function(){return n.nu(o)},get:o}};return{nu:e,pure:function(n){return e(function(t){t(n)})}}}),i("9u",["z","1v","1w","1x"],function(n,t,e,r){var o=function(t,r,o){return e.abs(t-r)<=o?n.none():t<r?n.some(t+o):n.some(t-o)};return{create:function(){var n=null;return{animate:function(i,u,a,c,s,f){var l=!1,d=function(n){l=!0,s(n)};t(n);var m=function(e){t(n),d(e)};n=r(function(){var r=i();o(r,u,a).fold(function(){t(n),d(u)},function(o){if(c(o,m),!l){var a=i();(a!==o||e.abs(a-u)>e.abs(r-u))&&(t(n),d(u))}})},f)}}},adjust:o}}),i("a8",["z","15"],function(n,t){return{findDevice:function(e,r){var o=[{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}];return t.findMap(o,function(t){return e<=t.width&&r<=t.height?n.some(t.keyboard):n.none()}).getOr({portrait:r/5,landscape:e/4})}}}),i("9v",["39","10","8a","a8","j"],function(n,t,e,r,o){var i=function(n){return r.findDevice(n.screen.width,n.screen.height)},u=function(n){var t=o.get(n).isPortrait(),e=i(n),r=t?e.portrait:e.landscape;return(t?n.screen.height:n.screen.width)-n.innerHeight>r?0:r},a=function(n,r){var o=t.owner(n).dom().defaultView;return e.get(n)+e.get(r)-u(o)};return{getGreenzone:a,updatePadding:function(t,r,o){var i=a(r,o),u=e.get(r)+e.get(o)-i;n.set(t,"padding-bottom",u+"px")}}}),i("8n",["6k","y","6","4i","39","5l","10","8a","9v","i","3z","83"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=n.generate([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),m="data-"+s.resolve("position-y-fixed"),g="data-"+s.resolve("y-property"),p="data-"+s.resolve("scrolling"),v="data-"+s.resolve("last-window-height"),h=function(n){return l.safeParse(n,m)},y=function(n){return r.get(n,g)},b=function(n){return l.safeParse(n,v)},w=function(n,t){var e=y(n);return d.fixed(n,e,t)},O=function(n,t){return d.scroller(n,t)},x=function(n){var t=h(n);return("true"===r.get(n,p)?O:w)(n,t)},S=function(n){var t=r.get(n,"style");o.setAll(n,{position:"absolute",top:"0px"}),r.set(n,m,"0px"),r.set(n,g,"top");return{restore:function(){r.set(n,"style",t||""),r.remove(n,m),r.remove(n,g)}}},T=function(n,t,e){var i=r.get(e,"style");f.register(e),o.setAll(e,{position:"absolute",height:t+"px",width:"100%",top:n+"px"}),r.set(e,m,n+"px"),r.set(e,p,"true"),r.set(e,g,"top");return{restore:function(){f.deregister(e),r.set(e,"style",i||""),r.remove(e,m),r.remove(e,p),r.remove(e,g)}}},k=function(n){var t=r.get(n,"style");o.setAll(n,{position:"absolute",bottom:"0px"}),r.set(n,m,"0px"),r.set(n,g,"bottom");return{restore:function(){r.set(n,"style",t||""),r.remove(n,m),r.remove(n,g)}}},C=function(n,t,e){var o=u.owner(n).dom().defaultView.innerHeight;return r.set(n,v,o+"px"),o-t-e};return{findFixtures:function(n){var e=i.descendants(n,"["+m+"]");return t.map(e,x)},takeover:function(n,t,i,s){var f=u.owner(n).dom().defaultView,l=S(i),d=a.get(i),g=a.get(s),p=C(n,d,g),v=T(d,p,n),h=k(s,d,p),y=!0,w=function(){y=!1,l.restore(),v.restore(),h.restore()},O=function(){return f.innerHeight>b(n)},x=function(){if(y){var e=a.get(i),u=a.get(s),f=C(n,e,u);r.set(n,m,e+"px"),o.set(n,"height",f+"px"),o.set(s,"bottom",-(e+f+u)+"px"),c.updatePadding(t,n,s)}},E=function(t){var e=t+"px";r.set(n,m,e),x()};return c.updatePadding(t,n,s),{setViewportOffset:E,isExpanding:O,isShrinking:e.not(O),refresh:x,restore:w}},getYFixedData:h}}),i("8j",["6","9t","4i","89","39","10","1w","9u","8n","i","83"],function(n,t,e,r,o,i,u,a,c,s,f){var l=a.create(),d=15,m=10,g=10,p="data-"+s.resolve("last-scroll-top"),v=function(n){var t=o.getRaw(n,"top").getOr(0);return parseInt(t,10)},h=function(n){return parseInt(n.dom().scrollTop,10)},y=function(n,t){var e=t+c.getYFixedData(n)+"px";o.set(n,"top",e)};return{moveScrollAndTop:function(e,r,i){return t.nu(function(t){var u=n.curry(h,e),a=function(n){e.dom().scrollTop=n,o.set(e,"top",v(e)+d+"px")},c=function(){e.dom().scrollTop=r,o.set(e,"top",i+"px"),t(r)};l.animate(u,r,d,a,c,g)})},moveOnlyScroll:function(r,o){return t.nu(function(t){var i=n.curry(h,r);e.set(r,p,i());var a=function(n,t){f.safeParse(r,p)!==r.dom().scrollTop?t(r.dom().scrollTop):(r.dom().scrollTop=n,e.set(r,p,n))},c=function(){r.dom().scrollTop=o,e.set(r,p,o),t(o)},s=u.abs(o-i()),d=u.ceil(s/m);l.animate(i,o,d,a,c,g)})},moveOnlyTop:function(e,r){return t.nu(function(t){var i=n.curry(v,e),a=function(n){o.set(e,"top",n+"px")},c=function(){a(r),t(r)},s=u.abs(r-i()),f=u.ceil(s/m);l.animate(i,r,f,a,c,g)})},moveWindowScroll:function(n,e,r){var o=i.owner(n).dom().defaultView;return t.nu(function(t){y(n,r),y(e,r),o.scrollTo(0,r),t(r)})}}}),i("8k",["5","9w"],function(n,t){return function(e){var r=n(t.pure({}));return{start:function(n){var o=t.nu(function(t){return e(n).get(t)});r.set(o)},idle:function(n){r.get().get(function(){n()})}}}}),i("8l",["6","8h","8j","9v","9s"],function(n,t,e,r,o){return{scrollIntoView:function(t,i,u,a,c){var s=r.getGreenzone(i,u),f=n.curry(o.refresh,t);a>s||c>s?e.moveOnlyScroll(i,i.dom().scrollTop-s+c).get(f):a<0&&e.moveOnlyScroll(i,i.dom().scrollTop+a).get(f)}}}),i("a9",["y"],function(n){return{par:function(t,e){return e(function(e){var r=[],o=0,i=function(n){return function(i){r[n]=i,++o>=t.length&&e(r)}};0===t.length?e([]):n.each(t,function(n,t){n.get(i(t))})})}}}),i("9x",["y","9t","a9"],function(n,t,e){var r=function(n){return e.par(n,t.nu)};return{par:r,mapM:function(t,e){var o=n.map(t,e);return r(o)},compose:function(n,t){return function(e){return t(e).bind(n)}}}}),i("8m",["y","9t","9x","39","8j","8n"],function(n,t,e,r,o,i){var u=function(n,e,o,i){var u=o+i;return r.set(n,e,u+"px"),t.pure(i)},a=function(n,t,e){var i=t+e,u=r.getRaw(n,"top").getOr(e),a=i-parseInt(u,10),c=n.dom().scrollTop+a;return o.moveScrollAndTop(n,c,i)},c=function(n,t){return n.fold(function(n,e,r){return u(n,e,t,r)},function(n,e){return a(n,t,e)})};return{updatePositions:function(t,r){var o=i.findFixtures(t),u=n.map(o,function(n){return c(n,r)});return e.par(u)}}}),i("8o",["8","9","11","a","39"],function(n,t,e,r,o){return{input:function(i,u){var a=r.fromTag("input");o.setAll(a,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),t.append(i,a),n.focus(a),u(a),e.remove(a)}}}),i("6g",["6","z","62","8","1u","12","a","39","1v","86","16","1w","8h","1x","1j","8i","8j","8k","8l","8m","8n","j","8o","84"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w,O,x,S){var T=5,k=function(r,i,a,c,s,f){var l=h(function(n){return v.moveWindowScroll(r,i,n)}),d=function(){var e=S.getRectangles(f);return t.from(e[0]).bind(function(e){var r=e.top()-i.dom().scrollTop;return r>c.innerHeight+T||r<-T?t.some({top:n.constant(r),bottom:n.constant(r+e.height())}):t.none()})},m=e.last(function(){l.idle(function(){b.updatePositions(a,c.pageYOffset).get(function(){d().each(function(n){i.dom().scrollTop=i.dom().scrollTop+n.top()}),l.start(0),s.refresh()})})},1e3),g=o.bind(u.fromDom(c),"scroll",function(){c.pageYOffset<0||m.throttle()});return b.updatePositions(a,c.pageYOffset).get(n.identity),{unbind:g.unbind}};return{setup:function(t){var e=t.cWin(),c=t.ceBody(),s=t.socket(),f=t.toolstrip(),l=t.toolbar(),d=t.contentElement(),m=t.keyboardType(),g=t.outerWindow(),h=t.dropup(),b=w.takeover(s,c,f,h),S=m(t.outerBody(),e,i.body(),d,f,l),T=function(){S.toEditing(),M()},C=function(){S.toReading()},E=function(n){S.onToolbarTouch(n)},D=O.onChange(g,{onChange:n.noop,onReady:b.refresh});D.onAdjustment(function(){b.refresh()});var A=o.bind(u.fromDom(g),"resize",function(){b.isExpanding()&&b.refresh()}),R=k(f,s,t.outerBody(),g,b,e),F=p(e,d),M=function(){F.clear()},B=function(){a.set(d,"height",d.dom().contentWindow.document.body.scrollHeight+"px")},I=function(t){b.setViewportOffset(t),v.moveOnlyTop(s,t).get(n.identity)},z=function(){b.restore(),D.destroy(),R.unbind(),A.unbind(),S.destroy(),F.destroy(),x.input(i.body(),r.blur)};return{toEditing:T,toReading:C,onToolbarTouch:E,refreshSelection:function(){F.isActive()&&F.update()},clearSelection:M,highlightSelection:function(){F.update()},scrollIntoView:function(n,t){y.scrollIntoView(e,s,h,n,t)},updateToolbarPadding:n.noop,setViewportOffset:I,syncHeight:B,refreshStructure:b.refresh,destroy:z}}}}),i("6h",["y","6","8","1u","12","b","8p","8o"],function(n,t,e,r,o,i,u,a){return{stubborn:function(t,o,c,s){var f=function(){u.resume(o,s)},l=function(){a.input(t,e.blur)},d=r.bind(c,"keydown",function(t){n.contains(["input","textarea"],i.name(t.target()))||f()});return{toReading:l,toEditing:f,onToolbarTouch:function(){},destroy:function(){d.unbind()}}},timid:function(n,r,o,i){var a=function(){e.blur(i)};return{toReading:function(){a()},toEditing:function(){u.resume(r,i)},onToolbarTouch:function(){a()},destroy:t.noop}}}}),i("42",["6","1z","2o","8","a","2f","39","1b","6f","6g","5z","3y","6h","60","i","3z","61"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v){return{create:function(h,y){var b=v.tag(),w=t.value(),O=t.value(),x=t.api(),S=t.api();return{enter:function(){y.hide();var t=o.fromDom(a);f.getActiveApi(h.editor).each(function(o){w.set({socketHeight:u.getRaw(h.socket,"height"),iframeHeight:u.getRaw(o.frame(),"height"),outerScroll:a.body.scrollTop}),O.set({exclusives:l.exclusive(t,"."+p.scrollable())}),i.add(h.container,g.resolve("fullscreen-maximized")),m.clobberStyles(h.container,o.body()),b.maximize(),u.set(h.socket,"overflow","scroll"),u.set(h.socket,"-webkit-overflow-scrolling","touch"),r.focus(o.body());var f=e.immutableBag(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);x.set(s.setup(f({cWin:o.win(),ceBody:o.body(),socket:h.socket,toolstrip:h.toolstrip,toolbar:h.toolbar,dropup:h.dropup.element(),contentElement:o.frame(),cursor:n.noop,outerBody:h.body,outerWindow:h.win,keyboardType:d.stubborn,isScrolling:function(){return O.get().exists(function(n){return n.socket.isScrolling()})}}))),x.run(function(n){n.syncHeight()}),S.set(c.initEvents(o,x,h.toolstrip,h.socket,h.dropup))})},refreshStructure:function(){x.run(function(n){n.refreshStructure()})},exit:function(){b.restore(),S.clear(),x.clear(),y.show(),w.on(function(n){n.socketHeight.each(function(n){u.set(h.socket,"height",n)}),n.iframeHeight.each(function(n){u.set(h.editor.getFrame(),"height",n)}),a.body.scrollTop=n.scrollTop}),w.clear(),O.on(function(n){n.exclusives.unbind()}),O.clear(),i.remove(h.container,g.resolve("fullscreen-maximized")),m.restoreStyles(),p.deregister(h.toolbar),u.remove(h.socket,"overflow"),u.remove(h.socket,"-webkit-overflow-scrolling"),r.blur(h.editor.getFrame()),f.getActiveApi(h.editor).each(function(n){n.clearSelection()})}}}}}),i("25",["3q","2e","6","39","3s","42","3t"],function(n,t,e,r,o,i,u){return{produce:function(a){var c=t.asRawOrDie("Getting IosWebapp schema",o,a);r.set(c.toolstrip,"width","100%"),r.set(c.container,"position","relative");var s=function(){c.setReadOnly(!0),d.enter()},f=n.build(u.sketch(s,c.translate));c.alloy.add(f);var l={show:function(){c.alloy.add(f)},hide:function(){c.alloy.remove(f)}},d=i.create(c,l);return{setReadOnly:c.setReadOnly,refreshStructure:d.refreshStructure,enter:d.enter,exit:d.exit,destroy:e.noop}}}}),i("m",["1y","6","1z","25","i","21","22","23","24"],function(n,t,e,r,o,i,u,a,c){return function(s){var f=c({classes:[o.resolve("ios-container")]}),l=i(),d=e.api(),m=u.makeEditSwitch(d),g=u.makeSocket(),p=a.build(function(){d.run(function(n){n.refreshStructure()})},s);f.add(l.wrapper()),f.add(g),f.add(p.component());var v=function(n){var t=l.createGroups(n);l.setGroups(t)},h=function(n){var t=l.createGroups(n);l.setContextToolbar(t)},y=function(){l.focus()},b=function(){l.restoreToolbar()},w=function(n){d.set(r.produce(n))},O=function(){d.run(function(t){n.remove(g,m),t.exit()})},x=function(n){u.updateMode(g,m,n,f.root())};return{system:t.constant(f),element:f.element,init:w,exit:O,setToolbarGroups:v,setContextToolbar:h,focusToolbar:y,restoreToolbar:b,updateMode:x,socket:t.constant(g),dropup:t.constant(p)}}}),i("26",["1e"],function(n){return n("tinymce.EditorManager")}),i("n",["14","26"],function(n,t){return{derive:function(e){var r=n.readOptFrom(e.settings,"skin_url").fold(function(){return t.baseURL+"/skins/lightgray"},function(n){return n});return{content:r+"/content.mobile.min.css",ui:r+"/skin.mobile.min.css"}}}}),i("o",["y","6","x","g"],function(n,t,e,r){var o=["x-small","small","medium","large","x-large"],i=function(n,t,e){n.system().broadcastOn([r.formatChanged()],{command:t,state:e})};return{init:function(t,r){var o=e.keys(r.formatter.get());n.each(o,function(n){r.formatter.formatChanged(n,function(e){i(t,n,e)})}),n.each(["ul","ol"],function(n){r.selection.selectorChanged(n,function(e){i(t,n,e)})})},fontSizes:t.constant(o)}}),i("p",[],function(){return{fireSkinLoaded:function(n){var t=function(){n._skinLoaded=!0,n.fire("SkinLoaded")};return function(){n.initialized?t():n.on("init",t)}}}}),i("0",["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,g,p,v,h,y,b,w,O,x,S,T){var k=i.constant("toReading"),C=i.constant("toEditing");return l.add("mobile",function(l){return{getNotificationManagerImpl:function(){return{open:i.identity,close:i.noop,reposition:i.noop,getArgs:i.identity}},renderUI:function(E){var D=x.derive(l);!1===g.isSkinDisabled(l)?(l.contentCSS.push(D.content),d.DOM.styleSheetLoader.load(D.ui,T.fireSkinLoaded(l))):T.fireSkinLoaded(l)();var A=function(){l.fire("scrollIntoView")},R=s.fromTag("div"),F=u.detect().os.isAndroid()?b(A):O(A),M=s.fromDom(E.targetNode);c.after(M,R),e.attachSystem(R,F.system());var B=function(n){return a.search(n).bind(function(n){return F.system().getByDom(n).toOption()})},I=E.targetNode.ownerDocument.defaultView,z=y.onChange(I,{onChange:function(){F.system().broadcastOn([p.orientationChanged()],{width:y.getActualWidth(I)})},onReady:i.noop}),N=function(n,t,e){!1===e&&l.selection.collapse(),F.setToolbarGroups(e?n.get():t.get()),l.setMode(!0===e?"readonly":"design"),l.fire(!0===e?k():C()),F.updateMode(e)},q=function(n,t){return l.on(n,t),{unbind:function(){l.off(n)}}};return l.on("init",function(){F.init({editor:{getFrame:function(){return s.fromDom(l.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:i.noop}},onToReading:function(n){return q(k(),n)},onToEditing:function(n){return q(C(),n)},onScrollToCursor:function(n){l.on("scrollIntoView",function(t){n(t)});return{unbind:function(){l.off("scrollIntoView"),z.destroy()}}},onTouchToolstrip:function(){e()},onTouchContent:function(){var n=s.fromDom(l.editorContainer.querySelector("."+h.resolve("toolbar")));B(n).each(t.emitExecute),F.restoreToolbar(),e()},onTapContent:function(t){var e=t.target();if("img"===f.name(e))l.selection.select(e.dom()),t.kill();else if("a"===f.name(e)){F.system().getByDom(s.fromDom(l.editorContainer)).each(function(t){n.isAlpha(t)&&m.openLink(e.dom())})}}},container:s.fromDom(l.editorContainer),socket:s.fromDom(l.contentAreaContainer),toolstrip:s.fromDom(l.editorContainer.querySelector("."+h.resolve("toolstrip"))),toolbar:s.fromDom(l.editorContainer.querySelector("."+h.resolve("toolbar"))),dropup:F.dropup(),alloy:F.system(),translate:i.noop,setReadOnly:function(n){N(O,b,n)}});var e=function(){F.dropup().disappear(function(){F.system().broadcastOn([p.dropupDismissed()],{})})};r.registerInspector("remove this",F.system());var u={label:"The first group",scrollable:!1,items:[w.forToolbar("back",function(){l.selection.collapse(),F.exit()},{})]},a={label:"Back to read only",scrollable:!1,items:[w.forToolbar("readonly-back",function(){N(O,b,!0)},{})]},c={label:"The read only mode group",scrollable:!0,items:[]},d=v.setup(F,l),g=v.detect(l.settings,d),y={label:"The extra group",scrollable:!1,items:[]},b=o([a,{label:"the action group",scrollable:!0,items:g},y]),O=o([u,c,y]);S.init(F,l)}),{iframeContainer:F.socket().element().dom(),editorContainer:F.element().dom()}}}}),function(){}}),r("0")()}();